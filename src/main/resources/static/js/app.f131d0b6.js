(function(){"use strict";var e={2875:function(e,t){function n(e,t,n){let i=e/t;if(i<1)return null;let r="";return r=i<5?i.toFixed(1):i.toFixed(0),r+n}function i(e){const t=1024,i=1048576,r=1073741824;let a=n(e,r," GB");return null!=a?a:(a=n(e,i," MB"),null!=a?a:(a=n(e,t," KB"),null!=a?a:e+" B"))}t["Z"]={name:"BytesJS",StringifySize:i}},9327:function(e,t,n){var i=n(5268);function r(e,t,n){if(null==e||null==t)return n;let r=e,a=i.Z.ToElements(t);for(var o in a=i.Z.NormalizeElements(a),a){let e=a[o],t=r[e];if(null==t)return n;r=t}return null==r?n:r}t["Z"]={name:"GetterJS",Get:r}},8822:function(e,t,n){var i=n(9327);function r(){this.info={},this.intent={}}function a(){}function o(e){null==e&&(e={});let t=new r,n=t.load(e);this.path=i.Z.Get(n,"path",""),this.type=i.Z.Get(n,"type",""),this.tt=i.Z.Get(n,"typetext",""),this.name=i.Z.Get(n,"name","[默认]"),this.intent=e}r.prototype={load(e){if(null!=e)return this.tryLoadFile(e.file),this.tryLoadFolder(e.folder),this.tryLoadProject(e.project),this.tryLoadRepository(e.repository),this.tryLoadSubmodule(e.submodule),this.tryLoadWeb(e.web),this.tryLoadWorktree(e.worktree),this.info},tryLoadFolder(e){if(null==e)return;let t={typetext:"文件夹",type:"folder"};t.name=e.name,t.path=e.path,this.info=t,this.intent={folder:e}},tryLoadFile(e){if(null==e)return;let t={typetext:"文件",type:"file"};t.name=e.name,t.path=e.path,this.info=t,this.intent={file:e}},tryLoadWeb(e){if(null==e)return;let t={typetext:"网页",type:"web"};t.name=e.name,t.location=e.location,this.info=t,this.intent={file:e}},tryLoadProject(e){if(null==e)return;let t={typetext:"工程项目",type:"project"};t.name=e.name,t.path=e.path,this.info=t,this.intent={project:e}},tryLoadRepository(e){if(null==e)return;let t={typetext:"仓库",type:"repository"};t.name=e.name,t.path=e.path,this.info=t,this.intent={repository:e}},tryLoadSubmodule(e){if(null==e)return;let t={typetext:"子模块",type:"submodule"};t.name=e.name,t.path=e.path,this.info=t,this.intent={submodule:e}},tryLoadWorktree(e){if(null==e)return;let t={typetext:"工作树",type:"worktree"};t.path=e.path,t.name=e.name,this.info=t,this.intent={worktree:e}}},a.prototype={GetTargetClass(){return this.myTargetClass},GetTargetName(){return this.myTargetName}},o.prototype={GetType(){return this.type},GetTypeText(){return this.tt},GetName(){return this.name},GetPath(){return this.path}},t["Z"]={name:"Intent",Wrap(e){return new o(e)},NewIntent(){return new a}}},5268:function(e,t,n){n(7658);function i(e){let t=e,n=[];if(null==t)return n;for(var i in t){let e=t[i];null==e||""==e||"."==e||(".."==e?n.pop():n.push(e))}return n}function r(e){let t=a(e);return t=i(t),o(t)}function a(e){const t="\\",n="/";let i=e+"",r=i.replaceAll(t,n),a=r.split(n);return a}function o(e,t,n){null==t&&(t="/"),null==n&&(n="/");let i=t,r="";if(null==e)return r;for(var a in e){let t=e[a];r+=i+t,i=n}return r}t["Z"]={name:"path-js",NormalizeElements:i,NormalizePath:r,Stringify:o,ToElements:a}},6007:function(e,t){function n(){}function i(){return new n}n.prototype={GetRepositoryID(e){return e.$route.params["repository_id"]},GetCommitID(e){return e.$route.params["commit_id"]},GetTagID(e){return e.$route.params["tag_id"]}},t["Z"]={name:"route-js",NewRouteJS:i}},9466:function(e,t){function n(e,t){let n=e+"";if(e<0)return n;if(null==t)return n;if(t<2)return n;for(;n.length<t;)n="0"+n;return n}function i(e,t){null==e&&(e=0);let n=new Date;return n.setTime(e),r(n,t)}function r(e,t){let i=e;null==i&&(i=new Date,i.setTime(0));let r=i.getFullYear(),a=i.getMonth()+1,o=i.getDate(),l=i.getHours(),s=i.getMinutes(),u=i.getSeconds(),d="",c="",p="",m=!1,h=!1;if("date"==t?m=!0:"time"==t?h=!0:(m=!0,h=!0,d="  "),m){let e=""+r,t=n(a,2),i=n(o,2);c=e+"-"+t+"-"+i}if(h){let e=n(l,2),t=n(s,2),i=n(u,2);p=e+":"+t+":"+i}return c+d+p}t["Z"]={name:"TimeJS",StringifyTimestamp:i,StringifyDate:r}},6110:function(e,t,n){var i=n(9242),r=n(7174),a=(n(4415),n(814)),o=n(3396);function l(e,t,n,i,r,a){const l=(0,o.up)("MyWorkingStateViewer"),s=(0,o.up)("MyLogViewer"),u=(0,o.up)("MyInit"),d=(0,o.up)("MyOpenWithListener"),c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l),(0,o.Wm)(s),(0,o.Wm)(u),(0,o.Wm)(d),(0,o.Wm)(c)],64)}function s(e,t,n,i,r,a){return(0,o.wg)(),(0,o.iD)("div")}var u=n(7178),d=n(6666),c=n(2655);const p={trace:1,debug:2,info:3,warn:4,error:5,fatal:6},m={trace:"跟踪",debug:"调试",info:"信息",warn:"告警",error:"错误",fatal:"崩溃"};var h={name:"utils-log-viewer",computed:{logs(){return this.$store.getters["log/logs"]},todo(){return this.$store.getters["log/todo"]},revision(){return this.$store.getters["log/revision"]}},methods:{displayLogItem(e){if(null==e)return;if(e.read)return;if(!e.display)return;e.read=!0;let t=e.action,n=this.isok(e);"fetch"==t?n||this.displayMessageBalloon(e):n?this.displayMessageTip(e):this.displayMessageDialog(e)},isok(e){let t=this.getLogLevelNum(e);return t<=p.info},displayMessageTip(e){let t=e.message,n=e.type,i=e.duration,r=!0;(0,u.z8)({message:t,type:n,duration:i,showClose:r})},displayMessageBalloon(e){let t=e.message,n=e.type,i=e.duration,r=!0,a=this.getLogLevelText(e);(0,d.bM)({message:t,title:a,type:n,duration:i,showClose:r})},displayMessageDialog(e){let t=e.message,n=e.type,i=this.getLogLevelText(e);c.T.alert(t,i,{type:n})},getLogLevelText(e){let t=e.level,n=m[t];return null==n&&(n=t),null==n&&(n="no_level"),n},getLogLevelNum(e){let t=e.level,n=p[t];return null==n?0:n},displayLogs(){let e=0,t=this.todo;if(null!=t)for(var n in t){let i=t[n];this.displayLogItem(i),e++}if(e>5)return this.$store.commit("log/clean")}},watch:{revision(){this.displayLogs()}}},f=n(89);const g=(0,f.Z)(h,[["render",s]]);var _=g;const v={class:"working-state-view"};function y(e,t,n,r,a,l){const s=(0,o.Q2)("loading");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",v,[(0,o.wy)((0,o._)("div",null,null,512),[[s,l.working]])],512)),[[i.F8,l.working]])}var w={name:"utils-working-state-view",computed:{working(){return this.$store.getters["rest/working"]},loading(){return!0}}};const b=(0,f.Z)(w,[["render",y],["__scopeId","data-v-499ae694"]]);var k=b;function x(e,t,n,i,r,a){const l=(0,o.up)("MyNewVersionDialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(l,{modelValue:r.displayNewVersionDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>r.displayNewVersionDialog=e)},null,8,["modelValue"])])}n(7658);var C=n(2314),W={name:"init-element",components:{MyNewVersionDialog:C.Z},data(){return{displayNewVersionDialog:!1}},methods:{init(){this.fetch()},fetch(){this.$store.dispatch("init/fetch").then((e=>{let t=e.data;this.handleVO(t)}))},handleVO(e){this.checkSetup(e)||this.checkNewVersion(e)},checkSetup(e){let t=e.Setup,n=t.setup_required;return!!n&&(this.doSetup(),!0)},checkNewVersion(e){let t=e.CheckUpdate;this.$store.commit("checkupdate/handle_vo",t);let n=t.checkupdate.has_new_version,i=t.checkupdate.has_ignored;return!(!n||i)&&(this.doShowNewVersion(),!0)},doSetup(){this.$router.push("/init/setup-or-import")},doShowNewVersion(){this.displayNewVersionDialog=!0}},mounted(){this.init()}};const P=(0,f.Z)(W,[["render",x]]);var I=P;function S(e,t,n,i,r,a){const l=(0,o.up)("MyDrawer");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(l,{modelValue:r.displayDrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>r.displayDrawer=e)},null,8,["modelValue"])])}var T=n(8818),D={name:"open-with-listener",components:{MyDrawer:T.Z},computed:{revision(){return this.$store.getters["intent/revision"]},current(){return this.$store.getters["intent/current"]}},data(){return{displayDrawer:!1}},watch:{revision(){this.displayDrawer=!0}}};const O=(0,f.Z)(D,[["render",S]]);var j=O,V={name:"theApp",components:{MyLogViewer:_,MyWorkingStateViewer:k,MyInit:I,MyOpenWithListener:j},computed:{},data(){return{}},methods:{initTimer(){this.$store.dispatch("timer/init")},initDebugMode(){this.$store.dispatch("dev/fetch")}},mounted(){this.initTimer(),this.initDebugMode()}};const F=(0,f.Z)(V,[["render",l]]);var U=F,z=n(2483);function A(e,t,n,i,r,a){const l=(0,o.up)("MyClient");return(0,o.wg)(),(0,o.j4)(l)}var $=n(1235),G={name:"views-home",components:{MyClient:$.Z}};const E=(0,f.Z)(G,[["render",A]]);var M=E;const N=[{path:"/",name:"Home",component:M},{path:"/repositories",component:()=>n.e(851).then(n.bind(n,1851))},{path:"/repositories/:repository_id",component:()=>n.e(415).then(n.bind(n,6415))},{path:"/repositories/:repository_id/branches",component:()=>n.e(22).then(n.bind(n,8022))},{path:"/repositories/:repository_id/commits",component:()=>n.e(335).then(n.bind(n,335))},{path:"/repositories/:repository_id/commits/:commit_id",component:()=>n.e(335).then(n.bind(n,335))},{path:"/repositories/:repository_id/projects",component:()=>n.e(325).then(n.bind(n,4325))},{path:"/repositories/:repository_id/projects/:project_id",component:()=>n.e(325).then(n.bind(n,4325))},{path:"/repositories/:repository_id/remotes",component:()=>n.e(541).then(n.bind(n,6541))},{path:"/repositories/:repository_id/tags",component:()=>n.e(403).then(n.bind(n,6403))},{path:"/repositories/:repository_id/tags/:tag_id",component:()=>n.e(330).then(n.bind(n,7330))},{path:"/repositories/:repository_id/worktrees",component:()=>n.e(953).then(n.bind(n,2953))},{path:"/repositories/:repository_id/worktrees/:worktree_id",component:()=>n.e(953).then(n.bind(n,2953))},{path:"/remotes",component:()=>n.e(78).then(n.bind(n,8078))},{path:"/executables",component:()=>n.e(16).then(n.bind(n,5016))},{path:"/projects",component:()=>n.e(549).then(n.bind(n,1549))},{path:"/init/setup-or-import",component:()=>n.e(479).then(n.bind(n,5479))},{path:"/import-local-repo",component:()=>n.e(521).then(n.bind(n,9521))},{path:"/import-local-repository",component:()=>n.e(924).then(n.bind(n,2924))},{path:"/import-local-repositories",component:()=>n.e(28).then(n.bind(n,1028))},{path:"/settings",component:()=>n.e(307).then(n.bind(n,9307))},{path:"/settings/backups",component:()=>n.e(609).then(n.bind(n,609))},{path:"/settings/dev",component:()=>n.e(236).then(n.bind(n,5324))},{path:"/settings/projects",component:()=>n.e(363).then(n.bind(n,8363))},{path:"/settings/plug-ins",component:()=>n.e(17).then(n.bind(n,6017))},{path:"/settings/repositories",component:()=>n.e(898).then(n.bind(n,3898))},{path:"/settings/remotes",component:()=>n.e(166).then(n.bind(n,5166))},{path:"/settings/executables",component:()=>n.e(455).then(n.bind(n,3455))},{path:"/settings/intents",component:()=>n.e(282).then(n.bind(n,9282))},{path:"/settings/intent-templates",component:()=>Promise.all([n.e(88),n.e(345)]).then(n.bind(n,3196))},{path:"/settings/images",component:()=>n.e(970).then(n.bind(n,1970))},{path:"/settings/media",component:()=>n.e(365).then(n.bind(n,5365))},{path:"/settings/content-types",component:()=>Promise.all([n.e(88),n.e(229)]).then(n.bind(n,5230))},{path:"/settings/json-buffer",component:()=>n.e(990).then(n.bind(n,7990))},{path:"/setup",component:()=>n.e(433).then(n.bind(n,3433))},{path:"/about",name:"About",component:()=>n.e(443).then(n.bind(n,3108))}];function B(e){for(var t in e){let n=e[t],i=n.name;null==i&&(n.name=n.path)}}B(N);const L=(0,z.p7)({history:(0,z.PO)("/"),routes:N});var Z=L,R=n(65);const H={root:!0},K={items:[]},Y={list(e){return e.items}},J={handle_vo(e,t){let n=t.backups;null!=n&&(e.items=n)}},q={fetch(e){let t="GET",n="backups";return e.dispatch("rest/execute",{method:t,type:n},H).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))}};var Q={name:"module_backup",namespaced:!0,state:K,mutations:J,actions:q,getters:Y};const X={root:!0};function ee(e){return null==e&&(e={}),e}const te={current:{},ignore:{},latest:{},has_new_version:!1,has_ignored:!1},ne={current(e){return e.current},ignore(e){return e.ignore},latest(e){return e.latest},has_ignored(e){return e.has_ignored},has_new_version(e){return e.has_new_version}},ie={handle_vo(e,t){t=ee(t);let n=ee(t.checkupdate);e.current=ee(n.current),e.latest=ee(n.latest),e.ignore=ee(n.ignore),e.has_ignored=n.has_ignored,e.has_new_version=n.has_new_version}},re={check(e,t){let n="fetch",i="POST",r="about/checkupdate",a=t;return e.dispatch("rest/execute",{method:i,type:r,data:a,action:n},X).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))},ignore(e,t){let n="POST",i="about/ignore",r=t;return e.dispatch("rest/execute",{method:n,type:i,data:r},X).then((t=>{let n=t.data;e.commit("handle_vo",n)}))}};var ae={name:"module_check_update",namespaced:!0,state:te,mutations:ie,actions:re,getters:ne};const oe={root:!0},le={},se={},ue={},de={copy(e,t){navigator.clipboard.writeText(t).then((n=>"test:error"==t?Promise.reject("text:err"):(e.dispatch("display_copy_result",!0),Promise.resolve(n)))).catch((t=>(e.dispatch("display_copy_result",!1),Promise.reject(t))))},display_copy_result(e,t){let n={level:"info",type:"success",action:"insert",message:"复制成功",display:!0,source:"module_clipboard",duration:3e3};t||(n.message="复制失败",n.type="error",n.level="error"),e.commit("log/push",n,oe)}};var ce={name:"module_clipboard",namespaced:!0,state:le,mutations:ue,actions:de,getters:se};const pe={root:!0},me=1,he=2,fe=3,ge={"":he,debug:me,dev:me,"dev-windows":me,"dev-linux":me,preview:he,release:fe},_e={profiles:[me,he,fe],active:he},ve={debug(e){return e.active<=me},preview(e){return e.active<=he},release(e){return e.active<=fe}},ye={handle_vo(e,t){let n=t.profile,i=ge[n];null==i&&(i=he),e.active=i}},we={fetch(e){let t="GET",n="about",i="debug-mode";return e.dispatch("rest/execute",{method:t,type:n,id:i},pe).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))}};var be={name:"module_develop",namespaced:!0,state:_e,mutations:ye,actions:we,getters:ve};function ke(){this.pkname="undef",this.srclist=[],this.dstlist=[]}function xe(e,t){this.state=e,this.rw=t}function Ce(e,t){this.state=e,this.rw=t}function We(e){this.listname=e.listname,this.pk=e.pk,this.filterObject=null,this.filterText=""}ke.prototype={pk(e){return null!=e&&(this.pkname=e),this},src(e){return null!=e&&(this.srclist=e),this},dst(e){return null!=e&&(this.dstlist=e),this},makeSourceTable(e){let t={},n=e;for(var i in n){let e=n[i],r=this.getItemKey(e);t[r]=e}return t},getItemKey(e){let t=this.pkname;if(null==e||null==t)return"";let n=e[t];return null==n?"":n},updateItemValues(e,t){if(null!=e&&null!=t)for(var n in t){var i=t[n];null!=i&&(e[n]=i)}},update(){let e=this.srclist,t=this.dstlist,n=this.makeSourceTable(e);for(var i in t){let e=t[i],r=this.getItemKey(e),a=n[r];null!=a&&(this.updateItemValues(e,a),n[r]=null)}for(i in e){let r=e[i],a=this.getItemKey(r),o=n[a];null!=r&&null!=o&&t.push(r)}},remove(e){let t=this.srclist,n=this.dstlist;for(var i in t){let r=t[i],a=this.getItemKey(r);e!=a&&n.push(r)}}},xe.prototype={build(){let e=this.state,t=this.rw.listAll(e),n=[],i=this.rw.filterObject,r=this.rw.filterText;if(null==r||""==r||null==i)n=t;else for(var a in i.prepare(r),t){let e=t[a];i.accept(e)&&n.push(e)}e.filterResults=n}},Ce.prototype={build(){let e=this.state,t=e.offset,n=e.limit,i=this.rw.listFilterResults(e),r=[],a=i.length,o=t+n;o>a&&(o=a);for(var l=t;l<o;l++){let e=i[l];r.push(e)}e.currentPageItems=r}},We.prototype={init(e){this.reset(e)},remove(e,t){if(null==e||null==t)return;let n=e.all,i=[],r=new ke;r.pk(this.pk).src(n).dst(i).remove(t),e.all=i,e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateOne(e,t){if(null==e||null==t)return;let n=[t],i=e.all,r=new ke;r.pk(this.pk).src(n).dst(i).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateList(e,t){if(null==e||null==t)return;let n=t,i=e.all,r=new ke;r.pk(this.pk).src(n).dst(i).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateVO(e,t){if(null==e||null==t)return;let n=this.listname,i=t[n],r=e.all,a=new ke;a.pk(this.pk).src(i).dst(r).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},setPage(e,t){let n=t.limit,i=t.offset,r=t.current,a=t.index;if(null!=n?e.limit=n:n=e.limit,null!=i&&(e.offset=i),null!=r){let t=r-1;e.offset=t*n}null!=a&&(e.offset=a*n),e.wantRebuildCurrentPageItems=!0},setFilter(e,t){let n=t.text,i=t.filter;null!=n&&(this.filterText=n,e.filterText=n),null!=i&&(this.filterObject=i),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},getFilterText(e){return e.filterText},listAll(e){return e.all},listFilterResults(e){if(e.wantRebuildFilterResults){e.wantRebuildFilterResults=!1;let t=new xe(e,this);t.build()}return e.filterResults},listCurrentPage(e){if(e.wantRebuildCurrentPageItems){e.wantRebuildCurrentPageItems=!1;let t=new Ce(e,this);t.build()}return e.currentPageItems},listCurrentPageIds(e){let t=this.listCurrentPage(e),n=[],i=this.pk;for(var r in t){let e=t[r],a=e[i];n.push(a)}return n},stringifyCurrentPageIds(e){let t=this.listCurrentPageIds(e),n="";for(var i in t){let e=t[i];n+=e+"."}return n},currentPageNumber(e){return this.currentPageIndex(e)+1},currentPageIndex(e){let t=e.offset,n=e.limit;return n>.5&&t>0?Math.floor(t/n):0},offset(e){return e.offset},limit(e){return e.limit},total(e){let t=e.filterResults;return null==t&&(t=[]),t.length},reset(e,t){null==t&&(t={list:!0,page:!0,filter:!0}),t.list&&(e.all=[],e.filterResults=[],e.currentPageItems=[]),t.page&&(e.limit=10,e.offset=0),t.filter&&(e.filterText=""),e.wantRebuildFilterResults=!0,e.wantRebuildCurrentPageItems=!0}};var Pe={name:"state",createStateRW(e){return new We(e)}};const Ie={root:!0};function Se(e){let t="";for(var n in e){let i=e[n].id;t+="."+i}return t}function Te(e){null==e&&(e=[]);const t=function(e){if(null==e)return 0;let t=e.open_with_priority;return null==t?0:t};e.sort(((e,n)=>{let i=t(e),r=t(n);return r-i}));let n=[];for(var i in e){let r=e[i],a=t(r);if(!(a>0))break;n.push(r)}return n}function De(){this.text=""}De.prototype={containString(e,t){if(null==e||null==t)return!1;e=this.normalizeText(e),t=this.normalizeText(t);let n=t.indexOf(e);return n>=0},normalizeText(e){return""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}};const Oe={executables:[],openWithList:[]},je=new De,Ve=Pe.createStateRW({pk:"id",listname:"executables"});Ve.init(Oe),Ve.setFilter(Oe,{filter:je}),Ve.setPage(Oe,{limit:10,offset:0});const Fe={openWithList(e){return e.openWithList},all(e){return Ve.listAll(e)},currentPageItems(e){return Ve.listCurrentPage(e)},currentPage(e){return Ve.currentPageNumber(e)},pageSize(e){return Ve.limit(e)},afterFilter(e){return Ve.listFilterResults(e)},total(e){return Ve.total(e)}},Ue={handle_remove_id(e,t){Ve.remove(e,t)},reset(e){Ve.reset(e)},update(e,t){let n=t.vo,i=t.size,r=t.index,a=t.filter;null!=n&&Ve.updateVO(e,n),null==i&&null==r||Ve.setPage(e,{limit:i,index:r}),null!=a&&Ve.setFilter(e,{text:a});let o=Ve.listAll(e),l=Te(o);e.openWithList=l}},ze={init(e){e.dispatch("fetch")},fetch(e){let t="GET",n="executables",i={method:t,type:n};return e.dispatch("rest/execute",i,Ie).then((t=>{let n=t.data;e.commit("reset",{vo:n}),e.commit("update",{vo:n})}))},insert(e,t){let n=t.item,i=t.options,r="POST",a="executables",o={executables:[n]},l={method:r,type:a,data:o,params:i};return e.dispatch("rest/execute",l,Ie).then((()=>{e.dispatch("fetch")}))},update(e,t){let n=t.item,i=t.options,r="PUT",a="executables",o={executables:[n]},l=n.id,s={method:r,type:a,id:l,data:o,params:i};return e.dispatch("rest/execute",s,Ie).then((()=>{e.dispatch("fetch")}))},prepareInsert(e,t){let n="POST",i="import-executables",r={executables:[t]},a={method:n,type:i,data:r};return e.dispatch("rest/execute",a,Ie)},remove(e,t){let n=t.id,i=t.items,r={};if(null!=n);else{if(null==i)return Promise.reject("no param:id|item|items");r.ids=Se(i)}let a="DELETE",o="executables",l={},s={method:a,type:o,id:n,data:l,params:r};return e.dispatch("rest/execute",s,Ie).then((t=>(null!=n?e.commit("handle_remove_id",n):null!=i&&e.dispatch("fetch"),Promise.resolve(t))))}};var Ae={name:"module_executable",namespaced:!0,state:Oe,mutations:Ue,actions:ze,getters:Fe},$e=n(5268);const Ge={name:"name",bank:"bank",path:"path",baseurl:"base",items:"items",self:"self"};function Ee(e,t){let n=e[t];null==n&&(n={}),this.name=t,this.state=e,this.data=n}function Me(){}function Ne(){return new Me}Ee.prototype={_getValueByName(e,t){let n=this.data[e];return null==n&&(n=t),n},_copy_fields(e,t,n){if(null!=e&&null!=t)for(var i in e){let r=t[i],a=e[i];null!=n&&n(i,r,a),t[i]=a}},Init(e){let t=this.data,n=e;const i=(e,t,n)=>{null==t&&console.warn("StateBank.Init a bad field, name:["+e+"] v1:["+t+"] v2:["+n+"]")};this._copy_fields(n,t,i)},GetSelf(){return this._getValueByName(Ge.self,{})},GetItems(){return this._getValueByName(Ge.items,[])},GetPathString(){return this._getValueByName(Ge.path,"")},GetBaseURL(){return this._getValueByName(Ge.baseurl,"")},GetPathElements(){let e=this.GetPathString(),t=$e.Z.ToElements(e);return $e.Z.NormalizeElements(t)},UpdateVO(e){let t=e.self.exists;if(!t)return;let n=e,i=this.data;this._copy_fields(n,i)}},Me.prototype={createBank(e){let t={};return t[Ge.name]=e,t[Ge.bank]=e,t[Ge.baseurl]="",t[Ge.path]="",t},InitWithBanks(e,t){for(var n in t){let i=t[n];e[i]=this.createBank(i)}},GetBank(e,t){return new Ee(e,t)}};var Be={name:"file_browser",CreateStateRW:Ne};const Le={root:!0},Ze=Be.CreateStateRW(),Re={items:[]};Ze.InitWithBanks(Re,["dialog_open","dialog_save","default"]);const He={GetSelf:e=>t=>Ze.GetBank(e,t).GetSelf(),GetItems:e=>t=>Ze.GetBank(e,t).GetItems(),GetPathString:e=>t=>Ze.GetBank(e,t).GetPathString(),GetPathElements:e=>t=>Ze.GetBank(e,t).GetPathElements()},Ke={init(e,t){let n=t.bank;Ze.GetBank(e,n).Init(t)},handle_vo(e,t){let n=t.bank,i=t.vo;Ze.GetBank(e,n).UpdateVO(i)}},Ye={fetch(e,t){let n=t.bank,i=t.path,r=t.base,a=t.href,o=e.state,l=Ze.GetBank(o,n);null==r&&(r=l.GetBaseURL()),null==i&&(i=l.GetPathString()),null!=a&&(i+="/"+a);let s="fetch",u="POST",d="file-query",c={path:i,base:r};return e.dispatch("rest/execute",{action:s,method:u,type:d,data:c},Le).then((t=>{let i=t.data;e.commit("handle_vo",{bank:n,vo:i})}))}};var Je={name:"module_file_browser",namespaced:!0,state:Re,mutations:Ke,actions:Ye,getters:He};const qe={root:!0},Qe={items:[]},Xe={list(e){return e.items}},et={handle_items(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},tt={fetch(e){let t="GET",n="intents",i=e.dispatch("rest/execute",{method:t,type:n},qe);return i.then((t=>{let n=t.data;e.commit("handle_example",n)})),i}};var nt={name:"module_image",namespaced:!0,state:Qe,mutations:et,actions:tt,getters:Xe};const it={root:!0},rt={items:[]},at={list(e){return e.items}},ot={handle_fetch_resp_vo(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)},handle_post_resp_vo(e,t){null!=t&&(e.ok=!0)}},lt={fetch(e){let t="GET",n="init";return e.dispatch("rest/execute",{method:t,type:n},it).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),e.commit("options/handle_fetch_resp_vo",n.Option,it),Promise.resolve(t)}))},post(e){let t="POST",n="init";return e.dispatch("rest/execute",{method:t,type:n},it).then((t=>{let n=t.data;return e.commit("handle_post_resp_vo",n),Promise.resolve(t)}))}};var st={name:"module_init",namespaced:!0,state:rt,mutations:ot,actions:lt,getters:at},ut=n(8822);const dt={root:!0};let ct=0;function pt(e){return!1}const mt={intents:[],revision:0,path:"",name:"",type:"",typetext:"",current:{}},ht={list(e){return e.intents},revision(e){return e.revision},current(e){return e.current},type(e){return e.type},typetext(e){return e.typetext},path(e){return e.path},name(e){return e.name}},ft={handle_intents(e,t){if(null==t)return;let n=t.intents;null!=n&&(e.intents=n)},setCurrent(e,t){if(null==t)return;let n=++ct,i=ut.Z.Wrap(t);t.revision=n,e.type=i.GetType(),e.typetext=i.GetTypeText(),e.path=i.GetPath(),e.name=i.GetName(),e.current=t,e.revision=n}},gt={fetch(e){let t="GET",n="intents",i=e.dispatch("rest/execute",{method:t,type:n},dt);return i.then((t=>{let n=t.data;e.commit("handle_intents",n)})),i},run(e,t){let n="POST",i="intents",r=t,a=e.dispatch("rest/execute",{method:n,type:i,data:r},dt);return a.then((t=>{let n=t.data;e.commit("handle_intents",n)})),a},start(e,t){let n=t.intents[0];return pt(n)?e.dispatch("run",t):(e.commit("setCurrent",n),Promise.resolve(t))}};var _t={name:"module_intent",namespaced:!0,state:mt,mutations:ft,actions:gt,getters:ht};const vt={root:!0};function yt(e){let t="";for(var n in e){let i=e[n].id;t+="."+i}return t}function wt(e){let t="-"+(new Date).getTime(),n="duplicate",i=(""+e).indexOf(n);return n=i<0?"-"+n:"",e+n+t}function bt(){}bt.prototype={prepare(e){bt.text=e},accept(e){let t=""+bt.text,n=""+this.makeSearchText(e),i=n.indexOf(t.trim().toLowerCase());return i>=0},makeSearchText(e){let t="",n=[e.name,e.group,e.title];for(var i in n){let e=n[i];null!=e&&(t+=e+"\n")}return t.toLowerCase()}};const kt={templates:[],macro_properties:[]},xt=new bt,Ct=Pe.createStateRW({pk:"id",listname:"intent_templates"});Ct.init(kt),Ct.setFilter(kt,{text:"",filter:xt}),Ct.setPage(kt,{limit:10,offset:0});const Wt={all(e){return Ct.listAll(e)},list(e){return Ct.listCurrentPage(e)},macro_properties(e){return e.macro_properties},current_page(e){return Ct.currentPageNumber(e)},page_size(e){return Ct.limit(e)},total(e){return Ct.total(e)},filter(e){return Ct.getFilterText(e)}},Pt={handle_fetch_resp_vo(e,t){Ct.updateVO(e,t)},handle_insert_resp_vo(e,t){Ct.updateVO(e,t)},handle_update_resp_vo(e,t){Ct.updateVO(e,t)},handle_remove_id(e,t){Ct.remove(e,t)},update_macro_properties_with_vo(e,t){let n=t.macro_properties,i=[];for(var r in n){let e=n[r],t={};t.id=r,t.name=r,t.label=r,t.description=e,i.push(t)}i.sort(((e,t)=>{let n=e.name+"",i=t.name+"";return n.localeCompare(i)})),e.macro_properties=i},update(e,t){let n=t.vo,i=t.size,r=t.index,a=t.filter;null!=n&&Ct.updateVO(e,n),null==i&&null==r||Ct.setPage(e,{limit:i,index:r}),null!=a&&Ct.setFilter(e,{text:a})},reset(e){Ct.reset(e)}},It={fetch(e){let t="GET",n="intent-templates";return e.dispatch("rest/execute",{method:t,type:n},vt).then((t=>{let n=t.data;return e.commit("reset"),e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))},insert(e,t){let n=t.item,i="POST",r="intent-templates",a={intent_templates:[n]};return e.dispatch("rest/execute",{method:i,type:r,data:a},vt).then((t=>{let n=t.data;return e.commit("handle_insert_resp_vo",n),Promise.resolve(t)}))},update(e,t){let n=t.item,i=n.id,r="PUT",a="intent-templates",o={intent_templates:[n]};if(null!=i&&!(i<1))return e.dispatch("rest/execute",{method:r,type:a,id:i,data:o},vt).then((t=>{let n=t.data;return e.commit("handle_update_resp_vo",n),Promise.resolve(t)}))},remove(e,t){let n=t.id,i=t.item,r=t.items,a={};if(null!=n);else if(null!=r)a.ids=yt(r);else{if(null==i)return Promise.reject("no param:id|item|items");n=i.id}let o="DELETE",l="intent-templates",s={method:o,type:l,id:n,params:a};return e.dispatch("rest/execute",s,vt).then((t=>(null!=n?e.commit("handle_remove_id",n):null!=r&&e.dispatch("fetch"),Promise.resolve(t))))},import_preset_templates(e){let t="POST",n="intent-templates/import-preset",i={};return e.dispatch("rest/execute",{method:t,type:n,data:i},vt).then((e=>Promise.resolve(e)))},fetch_macro_props(e){let t="GET",n="intent-templates",i="macro/properties";return e.dispatch("rest/execute",{method:t,type:n,id:i},vt).then((t=>{let n=t.data;return e.commit("update_macro_properties_with_vo",n),Promise.resolve(t)}))},duplicate(e,t){let n=JSON.stringify(t.item),i=JSON.parse(n);return i.method=wt(i.method),i.name=wt(i.name),e.dispatch("insert",{item:i})}};var St={name:"module_intent_template",namespaced:!0,state:kt,mutations:Pt,actions:It,getters:Wt};const Tt={root:!0},Dt={items:[]},Ot={list(e){return e.items}},jt={handle_items(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},Vt={fetch(e){let t="GET",n="intents",i=e.dispatch("rest/execute",{method:t,type:n},Tt);return i.then((t=>{let n=t.data;e.commit("handle_example",n)})),i}};var Ft={name:"module_example",namespaced:!0,state:Dt,mutations:jt,actions:Vt,getters:Ot};const Ut={root:!0},zt="jsonbuffer",At={vo:{contenttypes:[],intenttemplates:[],mediae:[],executables:[]}},$t=(JSON.stringify(At.vo),{vo(e){return e.vo}}),Gt={handle_fetch_resp_vo(e,t){null!=t&&(e.vo=t)}},Et={fetch(e){let t="GET",n=zt;return e.dispatch("rest/execute",{method:t,type:n},Ut).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))},reset(e){let t="POST",n=zt,i="reset",r={};return e.dispatch("rest/execute",{method:t,type:n,id:i,data:r},Ut).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))},put(e,t){let n="PUT",i=zt,r=t.vo;return null==r&&(r={}),e.dispatch("rest/execute",{method:n,type:i,data:r},Ut).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))}};var Mt={name:"module_json_buffer",namespaced:!0,state:At,mutations:Gt,actions:Et,getters:$t};const Nt={root:!0};function Bt(e,t){this.action=e,this.params=t,this.result=null,this.loading=!1}function Lt(){this.cache={}}Bt.prototype={loaded(){let e=this.result;return null!=e},cached(){let e=this.result;return Promise.resolve(e)},load(e){if(this.loading){let e={};return Promise.resolve(e)}this.loading=!0;let t=this.action,n=this.params,i=this;return e.dispatch(t,n,Nt).then((e=>(i.handle(e),Promise.resolve(e))))},handle(e){this.result=e}},Lt.prototype={get(e,t){let n=this.cache[e];return null==n&&(n=new Bt(e,t),this.cache[e]=n),n}};const Zt=new Lt,Rt={},Ht={},Kt={},Yt={load_executables(e){let t=Zt.get("executable/fetch",{});return t.loaded()?t.cached():t.load(e)},load_mediae(e){let t=Zt.get("media/fetch",{});return t.loaded()?t.cached():t.load(e)}};var Jt={name:"module_lazy",namespaced:!0,state:Rt,mutations:Kt,actions:Yt,getters:Ht};const qt="debug";function Qt(e){this.state=e}Qt.prototype={makeDefaultItem(){let e=this.now(),t=this.nextID();return{id:t,level:qt,type:"default",action:"",message:"",time:e,read:!1,display:!0,source:"",duration:0}},normalizeItem(e){null==e&&(e={}),e.id=null,e.time=null,e.read=!1;let t=this.makeDefaultItem();for(var n in t)null==e[n]&&(e[n]=t[n]);return e},nextID(){let e=this.state.revision+1;return this.state.revision=e,e},now(){let e=new Date;return e.getTime()},clean(){let e=this.state;e.logs=this.cleanList(e.logs,(e=>!e.read)),e.todo=this.cleanList(e.todo,(e=>!e.read))},cleanList(e,t){let n=[];if(null==e)return n;for(var i in e){let r=e[i];t(r)&&n.push(r)}return n}};const Xt={logs:[],todo:[],revision:0},en={push(e,t){let n=new Qt(e);t=n.normalizeItem(t),e.logs.push(t),e.todo.push(t)},clean(e){let t=new Qt(e);t.clean()}},tn={},nn={logs(e){return e.logs},todo(e){return e.todo},revision(e){return e.revision}};var rn={name:"module_log",namespaced:!0,state:Xt,mutations:en,actions:tn,getters:nn};const an={root:!0};function on(e){if(null==e)return!1;let t=e.all;return null!=t&&(1==t||1==t)}function ln(e){let t="";for(var n in e){let i=e[n].id;t+="."+i}return t}function sn(){}sn.prototype={};const un={},dn=new sn,cn=Pe.createStateRW({pk:"id",listname:"mediae"});cn.init(un),cn.setFilter(un,{text:"",filter:dn}),cn.setPage(un,{limit:10,offset:0});const pn={list(e){return cn.listCurrentPage(e)},total(e){return cn.total(e)}},mn={handle_vo(e,t){cn.updateVO(e,t)},reset(e,t){cn.reset(e,t)},remove_id(e,t){cn.remove(e,t)},update(e,t){if(null==t)return;let n=t.vo,i=t.size,r=t.index,a=t.filter;null==i&&null==r||cn.setPage(e,{limit:i,index:r}),null!=a&&cn.setFilter(e,{text:a}),null!=n&&cn.updateVO(e,n)}},hn={fetch(e,t){let n=on(t),i="GET",r="media";return e.dispatch("rest/execute",{method:i,type:r,params:t},an).then((t=>{let i=t.data;n&&e.commit("reset",{list:!0}),e.commit("handle_vo",i)}))},insert(e,t){let n=t.item,i="POST",r="media",a={mediae:[n]};return null==n?Promise.reject("no media item"):e.dispatch("rest/execute",{method:i,type:r,data:a},an).then((t=>{let n=t.data;e.commit("handle_vo",n)}))},import_presets(e){let t="POST",n="media",i="import-presets",r={};return e.dispatch("rest/execute",{method:t,type:n,id:i,data:r},an).then((e=>Promise.resolve(e)))},remove(e,t){let n=t.id,i=t.item,r=t.items,a={};if(null!=n);else if(null!=i)n=i.id;else{if(null==r)return Promise.reject("no param:id|item|items");a.ids=ln(r)}let o="DELETE",l="media",s={method:o,type:l,id:n,params:a};return e.dispatch("rest/execute",s,an).then((t=>(null!=n?e.commit("remove_id",n):null!=r&&e.dispatch("fetch",{all:!0}),Promise.resolve(t))))}};var fn={name:"module_media",namespaced:!0,state:un,mutations:mn,actions:hn,getters:pn};const gn={root:!0},_n="options";function vn(e,t){if(null==e||null==t)return!1;let n=e[t];return 1==n||1==n}const yn={options:{}},wn={debug(e){return vn(e.options,"wpm.options.debug")}},bn={handle_fetch_resp_vo(e,t){e.options=t.options}},kn={fetch(e){let t="GET",n=_n;return e.dispatch("rest/execute",{method:t,type:n},gn).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))}};var xn={name:"module_options",namespaced:!0,state:yn,mutations:bn,actions:kn,getters:wn};const Cn={root:!0};function Wn(){this.text=""}function Pn(e,t){null==t&&(t={}),this.context=e,this.ids=t.ids}function In(e){let t=e.state,n=Dn.listCurrentPage(t),i=[];for(var r in n){let e=n[r].id;i.push(e)}return i}Wn.prototype={containString(e,t){if(null==e||null==t)return!1;e=this.normalizeText(e),t=this.normalizeText(t);let n=t.indexOf(e);return n>=0},normalizeText(e){return""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}},Pn.prototype={prepareFetchByIds(e){let t={};return t.ids=this.makeIDs(e),t},makeIDs(e){if(null==e)return null;let t=0,n="";for(var i in e){let r=e[i];n+=r+".",t++}return t<1?null:n}};const Sn={projects:[]},Tn=new Wn,Dn=Pe.createStateRW({pk:"id",listname:"projects"});Dn.init(Sn),Dn.setFilter(Sn,{text:"",filter:Tn}),Dn.setPage(Sn,{limit:10,offset:0});const On={listAll(e){return Dn.listAll(e)},listAfterFilter(e){return Dn.listFilterResults(e)},listCurrentPage(e){return Dn.listCurrentPage(e)},filterText(e){return Dn.getFilterText(e)},currentPage(e){return Dn.currentPageNumber(e)},pageSize(e){return Dn.limit(e)},total(e){return Dn.total(e)},listCurrentPageIds(e){return Dn.listCurrentPageIds(e)},stringifyCurrentPageIds(e){return Dn.stringifyCurrentPageIds(e)}},jn={handle_fetch_all(e,t){Dn.reset(e),Dn.updateVO(e,t)},handle_fetch_by_ids(e,t){Dn.updateVO(e,t)},update_items(e,t){Dn.updateVO(e,t)},remove_item(e,t){Dn.remove(e,t.id)},setFilter(e,t){Dn.setFilter(e,t)},update(e,t){let n=t.vo,i=t.size,r=t.index,a=t.filter;null!=n&&Dn.updateVO(e,n),null==i&&null==r||Dn.setPage(e,{limit:i,index:r}),null!=a&&Dn.setFilter(e,{text:a})},reset(e){Dn.reset(e)}},Vn={fetch(e,t){return e.dispatch("fetchAll",t)},fetchAll(e){let t="GET",n="projects",i={all:1},r={method:t,type:n,params:i};return e.dispatch("rest/execute",r,Cn).then((t=>{let n=t.data;return e.commit("reset"),e.commit("update",{vo:n}),e.dispatch("fetchByIds",{}),Promise.resolve(t)}))},fetchByIds(e,{ids:t}){null==t&&(t=In(e));let n=new Pn(e),i=n.prepareFetchByIds(t);i["with-file-state"]=1;let r="GET",a="projects",o={method:r,type:a,params:i};return e.dispatch("rest/execute",o,Cn).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},insert(e,t){let n=t.item,i="POST",r="projects",a={projects:[n]},o={method:i,type:r,data:a};return e.dispatch("rest/execute",o,Cn).then((t=>{let n=t.data;return e.commit("update_items",n),Promise.resolve(t)}))},update(e,t){let n=t.item,i="PUT",r="projects",a=n.id,o={projects:[n]},l={method:i,type:r,id:a,data:o};return e.dispatch("rest/execute",l,Cn).then((t=>{let n=t.data;return e.commit("update_items",n),Promise.resolve(t)}))},remove(e,t){let n="DELETE",i="projects",r=t.id,a={method:n,type:i,id:r};return e.dispatch("rest/execute",a,Cn).then((n=>(e.commit("remove_item",t),Promise.resolve(n))))}};var Fn={name:"module_project",namespaced:!0,state:Sn,mutations:jn,actions:Vn,getters:On};const Un={root:!0},zn="software-sets";function An(){}function $n(){}An.prototype={},$n.prototype={compare(e,t){let n=""+e.name,i=""+t.name;return n.localeCompare(i)}};const Gn={items:[]},En=new An,Mn=Pe.createStateRW({pk:"id",listname:"sets"});Mn.init(Gn),Mn.setFilter(Gn,{filter:En}),Mn.setPage(Gn,{limit:10,offset:0});const Nn={list(e){return Mn.listCurrentPage(e)},all(e){return Mn.listAll(e)},total(e){return Mn.total(e)},current_page(e){return Mn.currentPageNumber(e)},page_size(e){return Mn.limit(e)}},Bn={reset(e){Mn.reset(e,null)},handle_fetch_resp_vo(e,t){let n=t.sets,i=new $n;n.sort(((e,t)=>i.compare(e,t))),t.sets=n,Mn.updateVO(e,t)},update(e,t){let n=t.vo,i=t.size,r=t.index,a=t.filter;null!=n&&Mn.updateVO(e,n),null==i&&null==r||Mn.setPage(e,{limit:i,index:r}),null!=a&&Mn.setFilter(e,{text:a})}},Ln={fetch(e){let t="GET",n=zn;return e.dispatch("rest/execute",{method:t,type:n},Un).then((t=>{let n=t.data;e.commit("reset"),e.commit("handle_fetch_resp_vo",n)}))},fetch_one(e,t){let n=t.id,i=t.item;if(null==n){if(null==i)return;n=i.id}let r="GET",a=zn;return e.dispatch("rest/execute",{method:r,type:a,id:n},Un).then((t=>{let n=t.data;e.commit("handle_fetch_resp_vo",n)}))},install(e,{item:t}){let n="POST",i=zn,r="install",a={sets:[t]};return e.dispatch("rest/execute",{method:n,type:i,id:r,data:a},Un).then((n=>(e.dispatch("fetch_one",{item:t}),Promise.resolve(n))))},reinstall(e,{item:t}){let n="POST",i=zn,r="re-install",a={sets:[t]};return e.dispatch("rest/execute",{method:n,type:i,id:r,data:a},Un).then((n=>(e.dispatch("fetch_one",{item:t}),Promise.resolve(n))))},uninstall(e,{item:t}){let n="POST",i=zn,r="uninstall",a={sets:[t]};return e.dispatch("rest/execute",{method:n,type:i,id:r,data:a},Un).then((n=>(e.dispatch("fetch_one",{item:t}),Promise.resolve(n))))},upgrade(e,{item:t}){let n="POST",i=zn,r="upgrade",a={sets:[t]};return e.dispatch("rest/execute",{method:n,type:i,id:r,data:a},Un).then((n=>(e.dispatch("fetch_one",{item:t}),Promise.resolve(n))))}};var Zn={name:"module_plugin_set",namespaced:!0,state:Gn,mutations:Bn,actions:Ln,getters:Nn};const Rn={root:!0},Hn="packages",Kn={items:[]},Yn={list(e){return e.items}},Jn={handle_fetch_resp_vo(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},qn={fetch(e){let t="GET",n=Hn;return e.dispatch("rest/execute",{method:t,type:n},Rn).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))},update_sources(e){let t="POST",n=Hn,i="update",r={};return e.dispatch("rest/execute",{method:t,type:n,id:i,data:r},Rn).then((t=>{let n=t.data;return e.commit("handle_update_resp_vo",n),e.dispatch("refresh_pack_set_list"),Promise.resolve(t)}))},refresh_pack_set_list(e){return e.dispatch("soft_set/fetch",{},Rn)}};var Qn={name:"module_plugin_pack",namespaced:!0,state:Kn,mutations:Jn,actions:qn,getters:Yn},Xn=n(9327);const ei={root:!0};function ti(){}function ni(e,t){let n=[],i=Xn.Z.Get(e,"content_types",[]);for(var r in i){let e=i[r];t(e)&&n.push(e)}return n}function ii(e){let t="";for(var n in e){let i=e[n].id;t+="."+i}return t}ti.prototype={};const ri={file_type_list:[],project_type_list:[]},ai=new ti,oi=Pe.createStateRW({pk:"id",listname:"content_types"});oi.init(ri),oi.setFilter(ri,{text:"",filter:ai}),oi.setPage(ri,{limit:10,offset:0});const li={list(e){return e.items},file_type_list(e){return e.file_type_list},project_type_list(e){return e.project_type_list},all(e){return oi.listAll(e)}},si={handle_vo(e,t){oi.reset(e),oi.updateVO(e,t),e.file_type_list=ni(t,(e=>0==e.as_project)),e.project_type_list=ni(t,(e=>1==e.as_project))},remove_item(e,t){oi.remove(e,t.id)}},ui={fetch(e){let t="GET",n="content-types";return e.dispatch("rest/execute",{method:t,type:n},ei).then((t=>{let n=t.data;e.commit("handle_vo",n)}))},insert(e,{item:t}){let n="POST",i="content-types",r={content_types:[t]};return e.dispatch("rest/execute",{method:n,type:i,data:r},ei).then((()=>{e.dispatch("fetch")}))},update(e,{item:t}){let n="PUT",i="content-types",r=t.id,a={content_types:[t]};return e.dispatch("rest/execute",{method:n,type:i,id:r,data:a},ei).then((()=>{e.dispatch("fetch")}))},remove(e,t){let n=t.id,i=t.item,r=t.items,a={};if(null!=n);else if(null!=i)n=i.id;else{if(null==r)return Promise.reject("no param:id|item|items");a.ids=ii(r)}let o="DELETE",l="content-types",s={method:o,type:l,id:n,params:a};return e.dispatch("rest/execute",s,ei).then((t=>(null!=n?e.commit("remove_item",{id:n}):null!=r&&e.dispatch("fetch"),Promise.resolve(t))))}};var di={name:"module_project_type",namespaced:!0,state:ri,mutations:si,actions:ui,getters:li},ci=n(4161);const pi={root:!0};function mi(){}function hi(e){this.context=e,this.workCount=0,this.method="",this.action="fetch"}function fi(e){this.context=e,this.action=""}ci.Z.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),ci.Z.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),hi.prototype={updateWorkCount(e){let t=this.workCount,n=t+e;(0==t&&1==n||1==t&&0==n)&&this.context.commit("updateWorking",e),this.workCount=n},forAxios(){let e={};return this.forAxiosField(e,"method"),this.forAxiosField(e,"params"),this.forAxiosField(e,"data"),this.forAxiosField(e,"url"),this.method=e.method,this.updateWorkCount(1),e},forAxiosField(e,t){let n=this[t];null!=n&&(e[t]=n)},resolve(){this.updateWorkCount(-1);let e=this.isGetMethod(),t={message:"操作成功"};t.display=!e,t.action=this.action,t.level="info",t.type="success",t.duration=3e3,t.source="axios",this.context.commit("log/push",t,pi)},reject(e){mi(e),this.updateWorkCount(-1);let t=e.response.data,n=t.error;null==n&&(n=e.message);let i={};i.message=n,i.display=!0,i.action=this.action,i.level="error",i.type="error",i.duration=0,i.source="axios",this.context.commit("log/push",i,pi)},isGetMethod(){let e=this.action,t=this.method;return null==e&&(e=""),null!=t&&""!=t||(t="GET"),t=t.trim().toUpperCase(),e=e.trim().toUpperCase(),"GET"==t||"FETCH"==e}},fi.prototype={init(e){this.action=e.action,this.method=e.method,this.url=e.url,this.params=e.params,this.data=e.data,this.type=e.type,this.id=e.id},create(){let e=new hi(this.context);return e.action=this.makeAction(),e.method=this.makeMethod(),e.url=this.makeURL(),null!=this.params&&(e.params=this.params),null!=this.data&&(e.data=this.data),e},makeAction(){let e=this.action;if(null==e||""==e){let t=this.makeMethod();const n={GET:"fetch",POST:"insert",PUT:"update",DELETE:"remove"};e=n[t]}return null!=e&&""!=e||(e="fetch"),e.toLowerCase()},makeMethod(){let e=this.method;return null==e&&(e="GET"),e.toUpperCase()},makeURL(){let e=this.url,t=this.type,n=this.id;return null==e&&(e=this.getBaseRestURL()+t,null!=n&&(e+="/"+n)),e},getBaseRestURL(){return"/api/v1/"}};const gi={working:!1,workCount:0},_i={working(e){return e.working}},vi={updateWorking(e,t){let n=e.workCount;t<0?n--:t>0&&n++,e.working=n>0,e.workCount=n}},yi={execute(e,t){let n=new fi(e);n.init(t);let i=n.create();return(0,ci.Z)(i.forAxios()).then((e=>(i.resolve(e),Promise.resolve(e)))).catch((e=>(i.reject(e),Promise.reject(e))))}};var wi={name:"module_rest",namespaced:!0,state:gi,mutations:vi,actions:yi,getters:_i};const bi={root:!0},ki={repositories:[]},xi={list(e){return e.repositories}},Ci={handle_repositories(e,t){if(null==t)return;let n=t.repositories;null!=n&&(e.repositories=n)}},Wi={fetch(e){let t="GET",n="repositories",i=e.dispatch("rest/execute",{method:t,type:n},bi);return i.then((t=>{let n=t.data;e.commit("handle_repositories",n)})),i}};var Pi={name:"module_repository",namespaced:!0,state:ki,mutations:Ci,actions:Wi,getters:xi};const Ii={root:!0};function Si(){}const Ti={want:{},have:{}},Di={info(e){return e.have}},Oi={handle_vo(e,t){if(null==t)return;let n=t.local_repositories;if(null==n)return;let i=n[0];null!=i&&(e.have=i)}},ji={fetch(e,t){Si(t),null==t&&(t={});let n=t.id,i=e.state;null==n&&(n=i.want.id);let r="GET",a="local-repositories";return i.want.id=n,e.dispatch("rest/execute",{method:r,type:a,id:n},Ii).then((t=>{let n=t.data;e.commit("handle_vo",n)}))}};var Vi={name:"module_current_repository",namespaced:!0,state:Ti,mutations:Oi,actions:ji,getters:Di};const Fi={root:!0};function Ui(){}const zi={repositories:[]},Ai=Pe.createStateRW({listname:"local_repositories",pk:"path"});Ai.init(zi),Ai.setPage(zi,{limit:999,offset:0});const $i={list(e){return Ai.listAll(e)}},Gi={handle_search_result(e,t){Ai.updateVO(e,t)},handle_result_repositories(e,t){Ai.updateVO(e,t)},reset(e){Ai.reset(e)}},Ei={search(e,t){let n=t.path,i="POST",r="import-repositories",a={action:"find",local_repositories:[{path:n}]};return e.commit("reset"),e.dispatch("rest/execute",{method:i,type:r,data:a},Fi).then((t=>{let n=t.data;e.commit("handle_search_result",n)}))},locate(e,t){let n=t.path,i="POST",r="import-repositories",a={action:"locate",local_repositories:[{path:n}]};return e.commit("reset"),e.dispatch("rest/execute",{method:i,type:r,data:a},Fi).then((t=>{let n=t.data;e.commit("handle_search_result",n)}))},save(e,{items:t}){Ui(t);let n="POST",i="import-repositories",r={action:"save",local_repositories:t},a=e.dispatch("rest/execute",{method:n,type:i,data:r},Fi);return a.then((t=>{let n=t.data;e.commit("handle_result_repositories",n)})),a}};var Mi={name:"module_import_local_repository",namespaced:!0,state:zi,mutations:Gi,actions:Ei,getters:$i};const Ni={root:!0},Bi={all:[],pageSize:16,pageIndex:0,currentPageItems:[],repositories:[]},Li={all(e){return e.all},list(e){return e.repositories}},Zi={handle_repositories(e,t){if(null==t)return;let n=t.repositories;null!=n&&(e.repositories=n)}},Ri={fetch(e){let t="GET",n="remote-repositories",i=e.dispatch("rest/execute",{method:t,type:n},Ni);return i.then((t=>{let n=t.data;e.commit("handle_repositories",n)})),i}};var Hi={name:"module_remote_repository",namespaced:!0,state:Bi,mutations:Zi,actions:Ri,getters:Li};const Ki={root:!0};function Yi(){}const Ji={all:[]},qi={all(e){return e.all}},Qi={update(e,t){Yi(e,t)}},Xi={fetch(e,t){Yi(e,t,Ki)},update(e,t){Yi(e,t)},remove(e,t){Yi(e,t)}};var er={name:"module_repository_detail",namespaced:!0,state:Ji,mutations:Qi,actions:Xi,getters:qi};const tr={root:!0};function nr(e){null!=e&&e.sort(((e,t)=>{let n=""+e.name,i=""+t.name;return n.localeCompare(i)}))}function ir(){this.text=""}function rr(e,t){null==t&&(t={}),this.context=e,this.ids=t.ids}function ar(e){let t=e.state,n=sr.listCurrentPage(t),i=[];for(var r in n){let e=n[r].id;i.push(e)}return i}ir.prototype={containString(e,t){if(null==e||null==t)return!1;t=this.normalizeText(t),e=this.normalizeText(e);let n=t.indexOf(e);return n>=0},normalizeText(e){return null==e||""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}},rr.prototype={prepareFetchByIds(e){let t={};return t.ids=this.makeIDs(e),t},makeIDs(e){if(null==e)return null;let t=0,n="";for(var i in e){let r=e[i];n+=r+".",t++}return t<1?null:n}};const or={},lr=new ir,sr=Pe.createStateRW({pk:"id",listname:"local_repositories"});sr.init(or),sr.setFilter(or,{text:"",filter:lr}),sr.setPage(or,{limit:10,offset:0});const ur={all(e){return sr.listAll(e)},currentPageItems(e){return sr.listCurrentPage(e)},currentPage(e){return sr.currentPageNumber(e)},pageSize(e){return sr.limit(e)},total(e){return sr.total(e)}},dr={update(e,t){let n=t.size,i=t.index,r=t.filter,a=t.vo;null==n&&null==i||sr.setPage(e,{limit:n,index:i}),null!=r&&sr.setFilter(e,{text:r}),null!=a&&(nr(a.local_repositories),sr.updateVO(e,a))},reset(e){sr.reset(e)}},cr={fetch(e){return e.dispatch("fetchAll")},fetchAll(e){let t="GET",n="local-repositories",i={all:1},r={method:t,type:n,params:i};return e.dispatch("rest/execute",r,tr).then((t=>{let n=t.data;return e.commit("reset"),e.commit("update",{vo:n}),e.dispatch("fetchByIds",{}),Promise.resolve(t)}))},fetchByIds(e,{ids:t}){null==t&&(t=ar(e));let n=new rr(e),i=n.prepareFetchByIds(t);i["with-file-state"]=1,i["with-projects"]=1;let r="GET",a="local-repositories",o={method:r,type:a,params:i};return e.dispatch("rest/execute",o,tr).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},fetchById(e,{id:t}){if(null==t)return Promise.reject("no param: id");let n={"with-file-state":1,"with-submodules":1,"with-worktrees":1,"with-projects":1},i="GET",r="local-repositories",a={method:i,type:r,id:t,params:n};return e.dispatch("rest/execute",a,tr).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},update(e,t){let n="PUT",i="local-repositories",r=t.id,a={local_repositories:[t]},o={method:n,type:i,id:r,data:a};return e.dispatch("rest/execute",o,tr).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))},remove(e,t){let n="DELETE",i="local-repositories",r=t.id,a={method:n,type:i,id:r};return e.dispatch("rest/execute",a,tr).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))}};var pr={name:"module_local_repository",namespaced:!0,state:or,mutations:dr,actions:cr,getters:ur};const mr={root:!0};function hr(e,t,n){let i=0;for(i in e){let n=e[i],r=n.id;t[r]=n}for(i in n){let e=n[i],r=e.id,a=t[r];null!=a&&null!=e&&(e.state=a.state,e.error=a.error)}}const fr={items:[]},gr={items(e){return e.items}},_r={handle_fetch_vo(e,t){e.items=t.setup_items},handle_apply_vo(e,t){let n=t.setup_items,i=e.items,r={};hr(n,r,i)}},vr={fetch(e){let t="GET",n="setup";return e.dispatch("rest/execute",{method:t,type:n},mr).then((t=>{let n=t.data;return e.commit("handle_fetch_vo",n),Promise.resolve(t)}))},apply(e,t){let n="POST",i="setup",r=t.data;return e.dispatch("rest/execute",{method:n,type:i,data:r},mr).then((t=>{let n=t.data;return e.commit("handle_apply_vo",n),Promise.resolve(t)}))},skipall(e){let t="POST",n="setup/skip-all",i={};return e.dispatch("rest/execute",{method:t,type:n,data:i},mr).then((e=>Promise.resolve(e)))}};var yr={name:"module_setup",namespaced:!0,state:fr,mutations:_r,actions:vr,getters:gr};function wr(e,t,n){this.storage=e,this.name=t,this.defaultValue=n}wr.prototype={get(){let e=this.storage[this.name];return null==e&&(e=this.defaultValue),e},set(e){if(null!=e)return this.storage[this.name]=e,e}};let br=window.localStorage,kr=window.sessionStorage;const xr=new wr(kr,"jwt",""),Cr=new wr(kr,"desktop_session_id",""),Wr=new wr(br,"example",0),Pr={},Ir={jwt(){return xr.get()},dsid(){return Cr.get()}},Sr={example(e,t){e.example=Wr.set(t)},jwt(e,t){e.jwt=xr.set(t)},dsid(e,t){e.sgid=Cr.set(t)}},Tr={};var Dr={name:"module_web_storage",namespaced:!0,state:Pr,mutations:Sr,actions:Tr,getters:Ir};const Or={root:!0},jr="statistics",Vr={backups:0,content_types:0,executables:0,intent_templates:0,mediae:0,plug_ins:0,projects:0,repositories:0},Fr={backups(e){return e.backups},content_types(e){return e.content_types},executables(e){return e.executables},intent_templates(e){return e.intent_templates},mediae(e){return e.mediae},plug_ins(e){return e.plug_ins},projects(e){return e.projects},repositories(e){return e.repositories}},Ur={handle_fetch_resp_vo(e,t){let n=t.statistics,i=e;for(var r in n){let e=n[r];i[r]=e}}},zr={fetch(e){let t="GET",n=jr;return e.dispatch("rest/execute",{method:t,type:n},Or).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))}};var Ar={name:"module_statistic",namespaced:!0,state:Vr,mutations:Ur,actions:zr,getters:Fr};function $r(e){this.context=e,this.count=0}$r.started=!1,$r.prototype={hasStarted(){return $r.started},start(){this.hasStarted()||($r.started=!0,this.setupForNextEvent())},setupForNextEvent(){setTimeout((()=>{this.onTimer()}),1e3)},onTimer(){this.count++;let e=this.count;this.context.commit("update1hz",e),this.setupForNextEvent()}};const Gr={count1hz:0},Er={timer1hz(e){return e.count1hz}},Mr={update1hz(e,t){null!=t&&(e.count1hz=t)}},Nr={init(e){let t=new $r(e);t.hasStarted()||t.start()}};var Br={name:"module_timer",namespaced:!0,state:Gr,mutations:Mr,actions:Nr,getters:Er},Lr=(0,R.MT)({state:{},mutations:{},actions:{},modules:{backup:Q,checkupdate:ae,clipboard:ce,dev:be,executable:Ae,files:Je,current_repository:Vi,import_repository:Mi,init:st,intent:_t,intent_template:St,image:nt,jsonbuffer:Mt,jwt:Ft,lazy:Jt,log:rn,media:fn,options:xn,project:Fn,soft_pack:Qn,soft_set:Zn,content_type:di,rest:wi,repository:Pi,local_repository:pr,remote_repository:Hi,repository_detail:er,statistic:Ar,setup:yr,storage:Dr,timer:Br}}),Zr=n(4870),Rr=n(2748);const Hr={name:"AdminNavMenu",computed:{theDevDebug(){return this.$store.getters["options/debug"]},isCollapse(){return!1},currentActive(){let e=this.$route.path;return e}},methods:{handleOpen(){},handleClose(){}}};var Kr=Object.assign(Hr,{setup(e){return(e,t)=>{const n=(0,o.up)("el-menu-item"),r=(0,o.up)("el-menu");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{"default-active":e.currentActive,class:"el-menu-vertical-demo",collapse:e.isCollapse,router:"",onOpen:e.handleOpen,onClose:e.handleClose},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{index:"/settings"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 设置 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/repositories"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 本地仓库 ")])),_:1}),(0,o.wy)((0,o.Wm)(n,{index:"/settings/remotes"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 远程仓库 (TODO) (debug) ")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,o.Wm)(n,{index:"/settings/projects"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 工程项目 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/content-types"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 内容类型 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/executables"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 应用程序 ")])),_:1}),(0,o.wy)((0,o.Wm)(n,{index:"/settings/images"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 图像 (TODO) (debug) ")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,o.Wm)(n,{index:"/settings/media"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 媒体文件 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/intent-templates"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 命令模板 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/plug-ins"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 插件 ")])),_:1}),(0,o.Wm)(n,{index:"/settings/backups"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 数据导入/导出 ")])),_:1}),(0,o.wy)((0,o.Wm)(n,{index:"/settings/json-buffer"},{title:(0,o.w5)((()=>[(0,o.Uk)(" JSON 缓冲区 (debug) ")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,o.Wm)(n,{index:"/about"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 关于")])),_:1}),(0,o.wy)((0,o.Wm)(n,{index:"/settings/dev"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 开发者模式 (debug) ")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,o.wy)((0,o.Wm)(n,{index:"/"},{title:(0,o.w5)((()=>[(0,o.Uk)(" 退出设置 (debug) ")])),_:1},512),[[i.F8,e.theDevDebug]])])),_:1},8,["default-active","collapse","onOpen","onClose"])])}}});const Yr=Kr;var Jr=Yr;const qr={class:"common-layout"},Qr={class:"admin-frame-aside-head"},Xr={name:"AdminFrame",components:{AdminNavMenu:Jr},data(){const e={a:1,home:!0,nav:!0};return{config:e}},methods:{handleClickBack(){this.$router.push("/")}}};var ea=Object.assign(Xr,{setup(e){return(e,t)=>{const n=(0,o.up)("el-icon"),r=(0,o.up)("el-button"),a=(0,o.up)("el-aside"),l=(0,o.up)("el-main"),s=(0,o.up)("el-container");return(0,o.wg)(),(0,o.iD)("div",qr,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"admin-frame-aside-box",width:"200px"},{default:(0,o.w5)((()=>[(0,o._)("div",Qr,[(0,o.Wm)(r,{class:"btn-back",type:"default",onClick:e.handleClickBack},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,Zr.SU)(Rr.nt8))])),_:1}),(0,o.Uk)(" 返回 ")])),_:1},8,["onClick"])]),(0,o._)("div",null,[(0,o.wy)((0,o.Wm)(Jr,null,null,512),[[i.F8,!0]])])])),_:1}),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3})])),_:3})])}}});const ta=(0,f.Z)(ea,[["__scopeId","data-v-09eb04ca"]]);var na=ta;const ia={class:"top-bar"};function ra(e,t,n,i,r,a){const l=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",ia,[(0,o.Wm)(l,{type:"primary",link:"",onClick:a.handleGoHome},{default:(0,o.w5)((()=>[(0,o.Uk)(" 回首页")])),_:1},8,["onClick"])]),(0,o.WI)(e.$slots,"default",{},void 0,!0)])}var aa={name:"SimpleFrame",methods:{handleGoHome(){this.$router.push("/")}}};const oa=(0,f.Z)(aa,[["render",ra],["__scopeId","data-v-55b39458"]]);var la=oa;function sa(e,t,n,r,a,l){const s=(0,o.up)("MyHeader"),u=(0,o.up)("MySearchBox"),d=(0,o.up)("MyPager"),c=(0,o.up)("MyFooter"),p=(0,o.up)("MyDebug");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s,{config:l.theConfig,onAction:l.handleAction},null,8,["config","onAction"]),(0,o.wy)((0,o.Wm)(u,{config:l.theConfig,onAction:l.handleAction},null,8,["config","onAction"]),[[i.F8,l.theDisplaySearch]]),(0,o.WI)(e.$slots,"default"),(0,o.wy)((0,o.Wm)(d,null,null,512),[[i.F8,l.theDisplayPager]]),(0,o.Wm)(c),(0,o.wy)((0,o.Wm)(p,null,null,512),[[i.F8,l.theDisplayDebug]])])}const ua={title:"Session Group Status"};function da(e,t,n,i,r,a){const l=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",ua,[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" S ")])),_:1})])}var ca={name:"session-group-status",methods:{checkQuery(){let e=this.$route.query["dsid"];null!=e&&(console.log("find desktop-session-id:"+e),this.$store.commit("storage/dsid",e))}},mounted(){this.checkQuery()}};const pa=(0,f.Z)(ca,[["render",da]]);var ma=pa;const ha=e=>((0,o.dD)("data-v-0bc96ad9"),e=e(),(0,o.Cn)(),e),fa={class:"header-bar"},ga={class:"nav-items"},_a=ha((()=>(0,o._)("div",{class:"spring-gap"},null,-1))),va={name:"home-frame-header",components:{MySessionGroupStatus:ma},props:{config:Object},computed:{theConfig(){let e=this.config;return null==e&&(e={}),e},theDisplayHome(){return!!this.theConfig.home},theDisplayNav(){return!!this.theConfig.nav},theDevDebug(){return this.$store.getters["dev/debug"]}},methods:{open(e){this.$router.push(e)},fireAction(e){let t={name:e};this.$emit("action",t)}}};var ya=Object.assign(va,{setup(e){return(e,t)=>{const n=(0,o.up)("el-icon"),r=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",fa,[(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(r,{link:"",onClick:t[0]||(t[0]=t=>e.open("/")),title:"首页"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,Zr.SU)(Rr.Ozs))])),_:1})])),_:1})],512),[[i.F8,e.theDisplayHome]]),(0,o.wy)((0,o._)("div",ga,[(0,o.Wm)(r,{link:"",onClick:t[1]||(t[1]=t=>e.open("/repositories"))},{default:(0,o.w5)((()=>[(0,o.Uk)("仓库")])),_:1}),(0,o.wy)((0,o.Wm)(r,{link:"",onClick:t[2]||(t[2]=t=>e.open("/remotes"))},{default:(0,o.w5)((()=>[(0,o.Uk)("远程仓库")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,o.Wm)(r,{link:"",onClick:t[3]||(t[3]=t=>e.open("/executables"))},{default:(0,o.w5)((()=>[(0,o.Uk)("应用")])),_:1}),(0,o.Wm)(r,{link:"",onClick:t[4]||(t[4]=t=>e.open("/projects"))},{default:(0,o.w5)((()=>[(0,o.Uk)("项目")])),_:1})],512),[[i.F8,e.theDisplayNav]]),_a,(0,o.wy)((0,o.Wm)(ma,null,null,512),[[i.F8,!1]]),(0,o.Wm)(r,{link:"",title:"刷新",onClick:t[5]||(t[5]=t=>e.fireAction("refresh"))},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,Zr.SU)(Rr.hYj))])),_:1})])),_:1}),(0,o.Wm)(r,{link:"",title:"添加",onClick:t[6]||(t[6]=t=>e.fireAction("add"))},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,Zr.SU)(Rr.v37))])),_:1})])),_:1}),(0,o.Wm)(r,{link:"",onClick:t[7]||(t[7]=t=>e.open("/settings")),title:"设置"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,Zr.SU)(Rr.pEs))])),_:1})])),_:1})])}}});const wa=(0,f.Z)(ya,[["__scopeId","data-v-0bc96ad9"]]);var ba=wa,ka=n(1195);const xa={class:"pager-container"};function Ca(e,t,n,i,r,a){const l=(0,o.up)("el-pagination");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",xa,[(0,o.Wm)(l,{layout:"prev, pager, next",total:50})])])}var Wa={name:"home-frame-pager"};const Pa=(0,f.Z)(Wa,[["render",Ca],["__scopeId","data-v-d199875e"]]);var Ia=Pa;function Sa(e,t,n,i,r,a){return(0,o.wg)(),(0,o.iD)("div")}var Ta={name:"home-frame-footer"};const Da=(0,f.Z)(Ta,[["render",Sa],["__scopeId","data-v-575e9f32"]]);var Oa=Da,ja=n(7139);const Va={class:"debug"};function Fa(e,t,n,i,r,a){const l=(0,o.up)("MyTimer");return(0,o.wg)(),(0,o.iD)("div",Va,[(0,o._)("div",null,"timer(1hz) : "+(0,ja.zw)(r.t1),1),(0,o._)("div",null,"timer(5hz) : "+(0,ja.zw)(r.t5),1),(0,o.Wm)(l,{enabled:!0,interval:1e3,onTimer:a.handleTimer1hz},null,8,["onTimer"]),(0,o.Wm)(l,{enabled:!0,interval:5e3,onTimer:a.handleTimer5hz},null,8,["onTimer"])])}function Ua(e,t,n,i,r,a){return(0,o.wg)(),(0,o.iD)("div")}var za={name:"timer",computed:{t1hz(){return this.$store.getters["timer/timer1hz"]}},data(){return{current:0,count:0}},methods:{fireOnTimer(){this.$emit("timer")},handle1hz(e){if(!this.enabled)return;let t=this.current,n=1e3*(e-t);this.count+=n,this.current=e;let i=this.interval,r=5;for(;i<this.count;r--){if(r<0){this.count=0;break}this.count-=i,this.fireOnTimer()}}},props:{enabled:Boolean,interval:Number},watch:{t1hz(e){this.handle1hz(e)}}};const Aa=(0,f.Z)(za,[["render",Ua]]);var $a=Aa,Ga={name:"debug",components:{MyTimer:$a},data(){return{t1:0,t5:0}},methods:{handleTimer1hz(){this.t1++},handleTimer5hz(){this.t5++}}};const Ea=(0,f.Z)(Ga,[["render",Fa],["__scopeId","data-v-9852a020"]]);var Ma=Ea,Na={name:"home-frame",components:{MyHeader:ba,MySearchBox:ka.Z,MyPager:Ia,MyFooter:Oa,MyDebug:Ma},props:{config:Object},computed:{theConfig(){let e=this.config;return null==e&&(e={pager:!0,home:!0,nav:!0,search:!0,searchCategory:"全部"}),e},theDisplayPager(){return!!this.theConfig.pager},theDisplaySearch(){return!!this.theConfig.search},theDisplayDebug(){return!!this.theConfig.debug}},methods:{handleAction(e){this.$emit("action",e)}}};const Ba=(0,f.Z)(Na,[["render",sa]]);var La=Ba;const Za={class:"repo-frame-client"},Ra={class:"repo-name"},Ha={class:"repo-description"},Ka={class:"repo-path"};function Ya(e,t,n,i,r,a){const l=(0,o.up)("el-tab-pane"),s=(0,o.up)("el-tabs"),u=(0,o.up)("HomeFrame");return(0,o.wg)(),(0,o.j4)(u,{config:r.config},{default:(0,o.w5)((()=>[(0,o._)("div",Za,[(0,o._)("h1",Ra,(0,ja.zw)(a.repository_name),1),(0,o._)("div",Ha,(0,ja.zw)(a.repository_description),1),(0,o._)("div",Ka,"@ "+(0,ja.zw)(a.repository_path),1),(0,o.Wm)(s,{modelValue:a.activeName,class:"demo-tabs",onTabChange:a.handleChange},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{label:"概览",name:"overview"}),(0,o.Wm)(l,{label:"分支",name:"branches"}),(0,o.Wm)(l,{label:"提交",name:"commits"}),(0,o.Wm)(l,{label:"标签",name:"tags"}),(0,o.Wm)(l,{label:"远程",name:"remotes"}),(0,o.Wm)(l,{label:"工作树",name:"worktrees"}),(0,o.Wm)(l,{label:"项目",name:"projects"})])),_:1},8,["modelValue","onTabChange"]),(0,o.WI)(e.$slots,"default",{},void 0,!0)])])),_:3},8,["config"])}var Ja=n(6007);const qa=Ja.Z.NewRouteJS();function Qa(){return{pager:!1,home:!0,nav:!0,search:!1,searchCategory:""}}var Xa={name:"local-repository-frame",computed:{repositoryid(){return qa.GetRepositoryID(this)},repository_info(){return this.$store.getters["current_repository/info"]},repository_name(){return this.repository_info.name},repository_path(){return this.repository_info.path},repository_description(){return this.repository_info.description},activeName(){return this.computeCurrentActiveName()}},data(){let e=Qa();return{config:e}},methods:{computeCurrentActiveName(){let e=this.$route.path,t=e.split("/"),n=t[3];return null==n||""==n||"overview"==n?"overview":n},fetch(){let e=this.repositoryid;this.$store.dispatch("current_repository/fetch",{id:e})},handleChange(e){let t="";"overview"!=e&&(t="/"+e);let n=this.repositoryid,i="/repositories/"+n+t;this.$router.push(i)}},mounted(){this.fetch()}};const eo=(0,f.Z)(Xa,[["render",Ya],["__scopeId","data-v-47119903"]]);var to=eo;const no=(0,i.ri)(U);no.component("AdminFrame",na),no.component("SimpleFrame",la),no.component("HomeFrame",La),no.component("RepositoryFrame",to),no.use(Lr).use(Z),no.use(r.Z,{locale:a.Z}),no.mount("#app")},2314:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(3396),r=n(7139),a=n(9242);const o={class:"dialog-toolbar"};function l(e,t,n,l,s,u){const d=(0,i.up)("el-form-item"),c=(0,i.up)("el-form"),p=(0,i.up)("el-button"),m=(0,i.up)("el-dialog");return(0,i.wg)(),(0,i.j4)(m,{title:"发现新版本"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{"label-width":"48%"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{label:"版本"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(u.latest.version),1)])),_:1}),(0,i.Wm)(d,{label:"文件"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(u.latest.full_name),1)])),_:1}),(0,i.Wm)(d,{label:"大小"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(u.latest.size),1)])),_:1}),(0,i.Wm)(d,{label:"发布日期"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(u.latest.release_at),1)])),_:1})])),_:1}),(0,i._)("div",o,[(0,i.Wm)(p,{type:"primary",onClick:u.openWebPage},{default:(0,i.w5)((()=>[(0,i.Uk)(" 去下载 ")])),_:1},8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{onClick:u.ignoreThisVersion},{default:(0,i.w5)((()=>[(0,i.Uk)(" 忽略此版本 ")])),_:1},8,["onClick"]),[[a.F8,u.displayIgnoreButton]])])])),_:1})}var s={name:"check-update-dialog.vue",computed:{latest(){return this.$store.getters["checkupdate/latest"]},ignore(){return this.$store.getters["checkupdate/ignore"]},displayIgnoreButton(){let e=this.$store.getters["checkupdate/has_ignored"];return!e}},methods:{openWebPage(){let e=this.latest.web_page_url;window.open(e,"_blank")},ignoreThisVersion(){let e=this.latest,t={checkupdate:{ignore:e}};this.$store.dispatch("checkupdate/ignore",t).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)}}},u=n(89);const d=(0,u.Z)(s,[["render",l],["__scopeId","data-v-2378e519"]]);var c=d},4383:function(e,t,n){n.d(t,{Z:function(){return V}});var i=n(3396);function r(e,t,n,r,a,o){const l=(0,i.up)("MyDialogCommon");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{bank:"dialog_open",modelValue:n.modelValue,fullscreen:n.fullscreen,multipleSelection:n.multipleSelection,"onUpdate:modelValue":o.updateModelValue,onOpenFile:o.handleOpenFile},null,8,["modelValue","fullscreen","multipleSelection","onUpdate:modelValue","onOpenFile"])])}var a=n(4870),o=n(7139),l=n(2748),s=(n(7658),n(9242));const u={class:"mode-elements"},d={class:"mode-input"},c={name:"filebrowser-path-bar",computed:{items(){return this.makeItems(this.elements)},elements(){return this.$store.getters["files/GetPathElements"](this.bank)}},data(){return{mode:{current:2,edit:1,elements:2},pathText:""}},methods:{handleClickEdit(){let e=this.bank,t=this.$store.getters["files/GetPathString"](e);null==t&&(t=""),this.pathText=t,this.mode.current=this.mode.edit},handleClickGo(){this.mode.current=this.mode.elements,this.navTo(this.pathText)},handleClickCancel(){this.mode.current=this.mode.elements},handleClickPathItem(e){let t=e.path;this.navTo(t)},handleClickPathRoot(){this.navTo("/")},makeItems(e){let t=[],n="";for(var i in e){let r=e[i],a=this.makeItem(r,n);t.push(a),n=a.path}return t},makeItem(e,t){let n={};return n.path=t+"/"+e,n.name=e,n},navTo(e){let t=this.bank;this.$store.dispatch("files/fetch",{bank:t,path:e})}},props:{bank:String}};var p=Object.assign(c,{setup(e){return(e,t)=>{const n=(0,i.up)("el-button"),r=(0,i.up)("el-breadcrumb-item"),c=(0,i.up)("el-breadcrumb"),p=(0,i.up)("el-icon"),m=(0,i.up)("el-input");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("div",u,[(0,i.Wm)(c,{class:"mode-elements-bread","separator-icon":(0,a.SU)(l.olP)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"path-element",link:"",type:"primary",onClick:e.handleClickPathRoot},{default:(0,i.w5)((()=>[(0,i.Uk)(" 根 ")])),_:1},8,["onClick"])])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.items,(t=>((0,i.wg)(),(0,i.j4)(r,{key:t.id},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"path-element",link:"",type:"primary",title:t.path,onClick:n=>e.handleClickPathItem(t)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t.name),1)])),_:2},1032,["title","onClick"])])),_:2},1024)))),128))])),_:1},8,["separator-icon"]),(0,i.Wm)(n,{link:"",onClick:e.handleClickEdit,title:"编辑路径"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.I8b))])),_:1})])),_:1},8,["onClick"])],512),[[s.F8,e.mode.current==e.mode.elements]]),(0,i.wy)((0,i._)("div",d,[(0,i.Wm)(m,{modelValue:e.pathText,"onUpdate:modelValue":t[0]||(t[0]=t=>e.pathText=t),placeholder:"请输入要查询的路径"},{prepend:(0,i.w5)((()=>[(0,i.Wm)(n,{onClick:e.handleClickCancel,title:"取消"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.q6s))])),_:1})])),_:1},8,["onClick"])])),append:(0,i.w5)((()=>[(0,i.Wm)(n,{onClick:e.handleClickGo,title:"查询"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.O6d))])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])],512),[[s.F8,e.mode.current==e.mode.edit]])])}}}),m=n(89);const h=(0,m.Z)(p,[["__scopeId","data-v-54b69720"]]);var f=h;function g(e,t,n,r,a,l){const s=(0,i.up)("el-table-column"),u=(0,i.up)("el-button"),d=(0,i.up)("el-table");return(0,i.wg)(),(0,i.iD)("div",{style:(0,o.j5)(l.myRootStyle)},[(0,i.Wm)(d,{data:l.items,ref:"theTable","highlight-current-row":"","max-height":l.myTableMaxHeight,onSelectionChange:l.handleSelectionChange,onCurrentChange:l.handleCurrentChange},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{type:l.tableColumnType},null,8,["type"]),(0,i.Wm)(s,{prop:"name",label:"名称",sortable:""},{default:(0,i.w5)((e=>[(0,i.Wm)(u,{link:"",type:"primary",title:e.row.name,onClick:t=>l.handleClickItemName(e.row)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.row.name),1)])),_:2},1032,["title","onClick"])])),_:1}),(0,i.Wm)(s,{prop:"content_type",label:"类型",sortable:""}),(0,i.Wm)(s,{prop:"updated_at",label:"修改时间",formatter:l.formatTimestamp,sortable:""},null,8,["formatter"]),(0,i.Wm)(s,{prop:"size",label:"大小",formatter:l.formatByteSize,sortable:""},null,8,["formatter"])])),_:1},8,["data","max-height","onSelectionChange","onCurrentChange"])],4)}var _=n(9466),v=n(2875);function y(){}var w={name:"filebrowser-view-detail-table",computed:{items(){let e=this.$store.getters["files/GetItems"](this.bank);return this.displayAllItems||(e=this.filterHiddenItems(e)),e},tableColumnType(){return this.multipleSelection?"selection":"index"},myTableMaxHeight(){const e=1024;let t=this.wantHeight-320;return t>e&&(t=e),t+"px"},myRootStyle(){let e=this.myTableMaxHeight;return{minHeight:e}}},data(){return{selection1:{},selectionN:[]}},methods:{handleClickItemName(e){e.is_dir&&this.openDir(e)},openDir(e){let t=this.bank,n=e.name;this.$store.dispatch("files/fetch",{bank:t,href:n})},getFieldByName(e,t){return null==e||null==t?"":t[e]},handleCurrentChange(e){null!=e&&(this.selection1=e),this.fireSelectionChange()},handleSelectionChange(){let e=this.$refs.theTable.getSelectionRows();null!=e&&(this.selectionN=e),this.fireSelectionChange()},fireSelectionChange(){let e=this.selectionN,t=this.selection1,n=[];if(null!=e)for(var i in e)n.push(e[i]);0==n.length&&null!=t&&null!=t.name&&n.push(t),this.$emit("selection-change",n)},filterHiddenItems(e){let t=[];for(var n in e){let i=e[n],r=""+i.name,a=r.indexOf(".");0!=a&&t.push(i)}return t},formatByteSize(e,t,n,i){return y(e,t,i),v.Z.StringifySize(n)},formatTimestamp(e,t,n,i){return y(e,t,i),_.Z.StringifyTimestamp(n)}},props:{bank:String,multipleSelection:Boolean,displayAllItems:Boolean,wantHeight:Number},watch:{}};const b=(0,m.Z)(w,[["render",g]]);var k=b,x=n(2655);const C=e=>((0,i.dD)("data-v-5edb3b1f"),e=e(),(0,i.Cn)(),e),W={class:"toolbar toolbar-top"},P=C((()=>(0,i._)("div",{class:"toolbar toolbar-bottom"},null,-1))),I={name:"filebrowser-dialog-common",components:{MyPathBar:f,MyDetailView:k},computed:{dialogTitle(){let e=this.title;if(null!=e&&""!=e)return e;let t=this.actionText,n=this.wantText;return t+n},actionText(){let e=this.action;return"save"==e?"保存":"打开"},wantText(){let e=this.want;return"folder"==e||"directory"==e?"文件夹":"文件"}},data(){return{filename:"",selectedItems:[],displayAllItems:!1,maxDialogHeight:100}},methods:{refresh(){let e=this.bank;this.$store.dispatch("files/fetch",{bank:e})},updateModelValue(e){this.$emit("update:modelValue",e)},handleClickRefresh(){this.refresh()},handleClickGoUp(){let e=this.bank,t="..";this.$store.dispatch("files/fetch",{bank:e,href:t})},handleClickMakeDir(){let e="新建文件夹",t="请输入文件夹名称";x.T.prompt(t,e,{confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{console.warn("todo: mkdir")})).catch((()=>{}))},handleClickCancel(){this.updateModelValue(!1)},handleClickOK(){this.updateModelValue(!1);let e=this.selectedItems;"save"==this.action?this.$emit("save-file",e):this.$emit("open-file",e)},handleSelectionChange(e){if(null==e)return;if(1==e.length)return this.filename=e[0].name,void(this.selectedItems=e);let t="",n="";for(var i in e){let r=e[i];n+=t+"'"+r.name+"'",t=", "}this.selectedItems=e,this.filename=n},init(){let e="~",t="file:///",n=this.bank;this.$store.commit("files/init",{bank:n,path:e,base:t})},handleDialogOpen(){this.maxDialogHeight=window.innerHeight}},mounted(){this.init()},props:{modelValue:Boolean,bank:String,title:String,want:String,action:String,multipleSelection:Boolean,fullscreen:Boolean},watch:{modelValue(e,t){1==e&&0==t&&this.refresh()}}};var S=Object.assign(I,{setup(e){return(t,n)=>{const r=(0,i.up)("el-icon"),s=(0,i.up)("el-button"),u=(0,i.up)("el-checkbox"),d=(0,i.up)("el-input"),c=(0,i.up)("el-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{class:"my-dialog",modelValue:e.modelValue,"onUpdate:modelValue":t.updateModelValue,fullscreen:e.fullscreen,title:t.dialogTitle,onOpen:t.handleDialogOpen,"align-center":"",width:"960px"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{bank:e.bank},null,8,["bank"]),(0,i.Wm)(k,{class:"my-detail-view",bank:e.bank,"want-height":t.maxDialogHeight-100,"display-all-items":t.displayAllItems,onSelectionChange:t.handleSelectionChange},null,8,["bank","want-height","display-all-items","onSelectionChange"]),(0,i._)("div",W,[(0,i.Wm)(s,{onClick:t.handleClickGoUp,title:"向上"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.tYz))])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(s,{onClick:t.handleClickMakeDir,title:"新建文件夹"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.FDh))])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(s,{onClick:t.handleClickRefresh,title:"刷新"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(l.hYj))])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(u,{class:"btn-hide-or-show-hidden-objects",modelValue:t.displayAllItems,"onUpdate:modelValue":n[0]||(n[0]=e=>t.displayAllItems=e)},{default:(0,i.w5)((()=>[(0,i.Uk)(" 显示隐藏对象 ")])),_:1},8,["modelValue"]),(0,i.Wm)(d,{class:"input-file-name",modelValue:t.filename,"onUpdate:modelValue":n[1]||(n[1]=e=>t.filename=e),placeholder:"文件(或目录)名"},null,8,["modelValue"]),(0,i.Wm)(s,{type:"default",onClick:t.handleClickCancel},{default:(0,i.w5)((()=>[(0,i.Uk)("取消")])),_:1},8,["onClick"]),(0,i.Wm)(s,{type:"success",onClick:t.handleClickOK},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t.actionText),1)])),_:1},8,["onClick"])]),P])),_:1},8,["modelValue","onUpdate:modelValue","fullscreen","title","onOpen"])])}}});const T=(0,m.Z)(S,[["__scopeId","data-v-5edb3b1f"]]);var D=T,O={name:"filebrowser-dialog-open",components:{MyDialogCommon:D},methods:{updateModelValue(e){this.$emit("update:modelValue",e)},handleOpenFile(e){this.$emit("open-file",e)}},props:{modelValue:Boolean,multipleSelection:Boolean,fullscreen:Boolean}};const j=(0,m.Z)(O,[["render",r]]);var V=j},1195:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(3396),r=n(7139),a=n(4870),o=n(2748);const l={class:"s-box"},s={name:"home-frame-search-box",props:{config:Object},data(){return{searchtext:""}},computed:{theConfig(){let e=this.config;return null==e&&(e={}),e},theSearchCategory(){let e=this.theConfig.searchCategory;return null!=e&&""!=e||(e="全部"),e}},methods:{fireApplyFilterAction(e){let t={name:"applyFilter",value:e};this.$emit("action",t)},applyFilter(e){this.searchtext=e,this.fireApplyFilterAction(e)}},watch:{}};var u=Object.assign(s,{setup(e){return(e,t)=>{const n=(0,i.up)("el-icon"),s=(0,i.up)("el-button"),u=(0,i.up)("el-input");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",l,[(0,i.Wm)(u,{modelValue:e.searchtext,onInput:e.applyFilter,clearable:"",placeholder:"在此输入要查找的关键字"},{prepend:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.theSearchCategory),1)])),append:(0,i.w5)((()=>[(0,i.Wm)(s,{title:"查找"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(o.olm))])),_:1})])),_:1})])),_:1},8,["modelValue","onInput"])])])}}}),d=n(89);const c=(0,d.Z)(u,[["__scopeId","data-v-29bfbce9"]]);var p=c},1235:function(e,t,n){n.d(t,{Z:function(){return Xe}});var i=n(3396);const r={class:"pager-box"};function a(e,t,n,a,o,l){const s=(0,i.up)("el-pagination"),u=(0,i.up)("MyRepoList"),d=(0,i.up)("MyOpenItemDialog"),c=(0,i.up)("FastImportDialog"),p=(0,i.up)("OpenWithDrawer"),m=(0,i.up)("HomeFrame");return(0,i.wg)(),(0,i.j4)(m,{config:l.theFrameConfig,onAction:l.handleAction},{default:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i.Wm)(s,{"current-page":o.currentPage,"onUpdate:currentPage":t[0]||(t[0]=e=>o.currentPage=e),"page-size":o.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>o.pageSize=e),"page-sizes":[5,10,20,50,100,200,500],background:o.background,layout:"total, sizes, prev, pager, next",total:l.theCountItemsTotal,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])]),(0,i.Wm)(u,{data:l.theItems,expandedItemId:o.expandedItemId,onAction:l.handleAction},null,8,["data","expandedItemId","onAction"]),(0,i.Wm)(d,{modelValue:o.displayOpenItemDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>o.displayOpenItemDialog=e),data:o.dataForOpenItemDialog},null,8,["modelValue","data"]),(0,i.Wm)(c,{modelValue:o.displayFastImportDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>o.displayFastImportDialog=e)},null,8,["modelValue"]),(0,i.Wm)(p,{modelValue:o.displayOpenWithDrawer,"onUpdate:modelValue":t[4]||(t[4]=e=>o.displayOpenWithDrawer=e)},null,8,["modelValue"])])),_:1},8,["config","onAction"])}var o=n(7139);const l={class:"items-box"};function s(e,t,n,r,a,s){const u=(0,i.up)("MyItem");return(0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.data,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"list-item",style:(0,o.j5)(s.getListItemStyle(e)),key:e.id},[(0,i.Wm)(u,{class:"list-item-inner",data:e,onAction:s.handleAction,expanded:e.id==n.expandedItemId},null,8,["data","onAction","expanded"])],4)))),128))])}var u=n(9242);const d={class:"item"},c={class:"gap"};function p(e,t,n,r,a,o){const l=(0,i.up)("MyOverview"),s=(0,i.up)("MyDetail");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(l,{data:n.data,onAction:o.handleAction,expanded:n.expanded},null,8,["data","onAction","expanded"]),(0,i.wy)((0,i._)("div",c,null,512),[[u.F8,n.expanded]]),(0,i.wy)((0,i.Wm)(s,{data:n.data,onAction:o.handleAction},null,8,["data","onAction"]),[[u.F8,n.expanded]])])}n(7658);const m=e=>((0,i.dD)("data-v-425725af"),e=e(),(0,i.Cn)(),e),h=m((()=>(0,i._)("h3",{class:"sub-list-title"},"仓库路径：",-1))),f={class:"text-path"},g={class:"sub-list-title"},_={class:"projects sub-list"},v=["title","onClick"],y={class:"sub-list-item-inner"},w={class:"sub-list-title"},b={class:"worktrees sub-list"},k=["title","onClick"],x={class:"sub-list-item-inner"},C={class:"sub-list-title"},W={class:"submodules sub-list"},P=["title","onClick"],I={class:"sub-list-item-inner"};function S(e,t,n,r,a,l){return(0,i.wg)(),(0,i.iD)("div",null,[h,(0,i._)("div",f,(0,o.zw)(l.thePath),1),(0,i.wy)((0,i._)("h3",g,"项目：",512),[[u.F8,l.projects.length>0]]),(0,i._)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.projects,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"projects-item sub-list-item",key:e.name,title:e.path,onClick:t=>l.handleClickProjectItem(e)},[(0,i._)("div",{class:"sub-list-item-outer",style:(0,o.j5)(l.computeItemOuterStyle(e))},[(0,i._)("div",y,(0,o.zw)(e.name),1)],4)],8,v)))),128))]),(0,i.wy)((0,i._)("h3",w,"工作树：",512),[[u.F8,l.worktrees.length>0]]),(0,i._)("div",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.worktrees,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"worktrees-item sub-list-item",key:e.name,title:e.path,onClick:t=>l.handleClickWorktreeItem(e)},[(0,i._)("div",{class:"sub-list-item-outer",style:(0,o.j5)(l.computeItemOuterStyle(e))},[(0,i._)("div",x,(0,o.zw)(l.formatWorktreeName(e)),1)],4)],8,k)))),128))]),(0,i.wy)((0,i._)("h3",C,"子模块：",512),[[u.F8,l.submodules.length>0]]),(0,i._)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.submodules,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"submodules-item sub-list-item",key:e.name,title:e.path,onClick:t=>l.handleClickSubmoduleItem(e)},[(0,i._)("div",{class:"sub-list-item-outer",style:(0,o.j5)(l.computeItemOuterStyle(e))},[(0,i._)("div",I,(0,o.zw)(e.name),1)],4)],8,P)))),128))])])}var T=n(9327),D={name:"home-local-repository-detail",computed:{theIcon(){return this.GetByPath("icon","/bad/icon/path")},theTitle(){return this.GetByPath("name","")},theDescription(){return this.GetByPath("description","")},thePath(){return this.GetByPath("path","")},projects(){return this.GetByPath("projects",[])},submodules(){return this.GetByPath("submodules",[])},worktrees(){return this.GetByPath("worktrees",[])}},data(){return{currentPath:""}},methods:{GetByPath(e,t){return T.Z.Get(this.data,e,t)},formatWorktreeName(e){let t=e.name;return""==t&&(t="[默认]"),t},handleClickProjectItem(e){let t={project:e},n="intent",i={name:n,intent:t};this.setCurrentPath(e.path),this.$emit("action",i)},handleClickSubmoduleItem(e){let t={submodule:e},n="intent",i={name:n,intent:t};this.setCurrentPath(e.path),this.$emit("action",i)},handleClickWorktreeItem(e){let t={worktree:e},n="intent",i={name:n,intent:t};this.setCurrentPath(e.path),this.$emit("action",i)},computeItemOuterStyle(e){let t=e.path,n=this.currentPath,i={};return t==n&&(i.borderColor="#606060"),i},setCurrentPath(e){this.currentPath=e}},props:{data:Object}},O=n(89);const j=(0,O.Z)(D,[["render",S],["__scopeId","data-v-425725af"]]);var V=j,F=n(4870),U=n(2748);const z={class:"open-with-list"},A=["title","onClick"],$=["src"],G={name:"home-local-repository-open-with-list",computed:{apps(){return this.$store.getters["executable/openWithList"]}},data(){return{}},methods:{handleClickItem(e){let t=e,n=this.getSimpleRepository(),i={executable:t,repository:n},r={intents:[i]};this.$store.dispatch("intent/run",r)},handleClickItemMore(){},getSimpleRepository(){let e=JSON.stringify(this.repository),t=JSON.parse(e);return t.projects=[],t.submodules=[],t.worktrees=[],t}},props:{repository:Object}};var E=Object.assign(G,{setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("div",z,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.apps,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"open-with-item",key:t.id,title:t.title,onClick:n=>e.handleClickItem(t)},[(0,i._)("img",{class:"icon",src:t.icon},null,8,$)],8,A)))),128))]))}});const M=(0,O.Z)(E,[["__scopeId","data-v-9765cc5c"]]);var N=M;const B=e=>((0,i.dD)("data-v-5debd493"),e=e(),(0,i.Cn)(),e),L={class:"overview"},Z={class:"overview-left"},R=["title"],H={class:"description"},K={class:"toolbar-for-overview"},Y=B((()=>(0,i._)("div",{class:"overview-mid"},null,-1))),J={class:"overview-right"},q={name:"home-local-repository-item",components:{MyExeList:N},computed:{theIcon(){return"/image/icon_empty.png"},theTitle(){return this.getDataWithoutNull().name},thePath(){return this.getDataWithoutNull().path},theDescription(){return this.getDataWithoutNull().description}},methods:{getDataWithoutNull(){let e=this.data;return null==e&&(e={}),e},handleClickItemFold(){let e="fold-item",t=this.data;this.$emit("action",{name:e,item:t})},handleClickItemExpand(){let e="expand-item",t=this.data;this.$emit("action",{name:e,item:t})},handleAction(e){this.$emit("action",e)}},props:{data:Object,expanded:Boolean}};var Q=Object.assign(q,{setup(e){return(t,n)=>{const r=(0,i.up)("el-icon"),a=(0,i.up)("el-button");return(0,i.wg)(),(0,i.iD)("div",L,[(0,i._)("div",Z,[(0,i._)("div",{class:"title",title:t.thePath},(0,o.zw)(t.theTitle),9,R),(0,i._)("div",H,(0,o.zw)(t.theDescription),1),(0,i._)("div",K,[(0,i.wy)((0,i.Wm)(a,{class:"btn-expand-fold",onClick:t.handleClickItemExpand,title:"展开",circle:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(U.v37))])),_:1})])),_:1},8,["onClick"]),[[u.F8,!e.expanded]]),(0,i.wy)((0,i.Wm)(a,{class:"btn-expand-fold",onClick:t.handleClickItemFold,title:"收起",circle:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(U.WF_))])),_:1})])),_:1},8,["onClick"]),[[u.F8,e.expanded]]),(0,i.wy)((0,i.Wm)(a,{circle:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("3")])),_:1},512),[[u.F8,!1]]),(0,i.wy)((0,i.Wm)(a,{circle:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("4")])),_:1},512),[[u.F8,!1]]),(0,i.wy)((0,i.Wm)(a,{circle:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("5")])),_:1},512),[[u.F8,!1]])])]),Y,(0,i._)("div",J,[(0,i.Wm)(N,{repository:e.data,onAction:t.handleAction},null,8,["repository","onAction"])])])}}});const X=(0,O.Z)(Q,[["__scopeId","data-v-5debd493"]]);var ee=X,te={name:"home-local-repository-item",components:{MyDetail:V,MyOverview:ee},computed:{apps(){return this.$store.getters["executable/openWithList"]}},methods:{handlePopoverShow(){let e=this.data.id;console.warn("todo: load-local-repo-detail:"+e)},handleClickItemName(){let e=this.data.id;this.$router.push("/repositories/"+e)},handleClickItemPath(){this.openWithDefaultExe()},handleAction(e){let t=e.name;"open-with"==t?this.openWith(e):"open-item-more"==t&&this.openItemMore(e),this.$emit("action",e)},openItemMore(e){e.item=this.data,this.$emit("action",e)},openWithDefaultExe(){let e=this.apps,t={};for(var n in e){let i=e[n];if(null!=i){t.executable=i,this.openWith(t);break}}},openWith(e){e.repository=this.data;let t={executable:e.executable,repository:e.repository},n={intents:[t]};this.$store.dispatch("intent/run",n)}},props:{data:Object,expanded:Boolean}};const ne=(0,O.Z)(te,[["render",p],["__scopeId","data-v-437a6a4e"]]);var ie=ne,re={name:"home-local-repository-repos",components:{MyItem:ie},methods:{handleAction(e){this.$emit("action",e)},getListItemStyle(e){let t=e.id==this.expandedItemId;return t?{"background-color":"rgb(245,245,245)"}:{}},handleClickOpenItemWith(e){let t="open-item-with",n={name:t,item:e};this.$emit("action",n)}},props:{data:Array,expandedItemId:Number}};const ae=(0,O.Z)(re,[["render",s],["__scopeId","data-v-2de528aa"]]);var oe=ae,le=n(6465),se=n(9969),ue=n(1955),de=n(3417),ce=n(5268);const pe={class:"dialog-2333"},me={class:"with-app-list"},he=["title","onClick"],fe=["src"],ge={name:"home-local-repository-open-item-dialog",components:{ElButton:le.mi,MyApps:N,ElRadioGroup:se.KD,ElForm:ue.ly,ElFormItem:ue.nH,ElInput:de.EZ},computed:{repo(){let e=this.data;return null==e&&(e={}),e},repoTitle(){return this.repo.name},repoLocation(){return this.repo.path},repoProjects(){let e=this.repo.projects;return null==e&&(e=[]),e},theWithAppList(){return this.$store.getters["executable/openWithList"]}},data(){return{fullpath:"",currentProject:"."}},methods:{close(){this.$emit("update:modelValue",!1)},computeFullPath(e){null==e&&(e=this.currentProject);let t=this.data.workspace_path,n=t+"/"+e;return ce.Z.NormalizePath(n)},handleClickApp(e){let t=this.fullpath;if(null==e||null==t)return;let n={executable:e,wd:t},i={intents:[n]};this.$store.dispatch("intent/run",i)}},props:{data:Object},watch:{currentProject(e){this.fullpath=this.computeFullPath(e)},repoLocation(){this.currentProject="."}}};var _e=Object.assign(ge,{setup(e){return(e,t)=>{const n=(0,i.up)("el-divider"),r=(0,i.up)("el-icon"),a=(0,i.up)("ElDialog");return(0,i.wg)(),(0,i.j4)(a,{title:"打开仓库内的项目"},{default:(0,i.w5)((()=>[(0,i._)("div",pe,[(0,i._)("h2",null," @"+(0,o.zw)(e.repo.name),1),(0,i._)("div",null,(0,o.zw)(e.repo.description),1),(0,i.Wm)(n),(0,i.Wm)((0,F.SU)(ue.ly),{"label-width":"180"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(ue.nH),{label:"仓库位置"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(de.EZ),{modelValue:e.repo.path,"onUpdate:modelValue":t[0]||(t[0]=t=>e.repo.path=t),readonly:""},null,8,["modelValue"])])),_:1}),(0,i.Wm)((0,F.SU)(ue.nH),{label:"选择将要打开的项目"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(se.KD),{class:"project-list",modelValue:e.currentProject,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentProject=t)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.repoProjects,(e=>((0,i.wg)(),(0,i.j4)((0,F.SU)(se.rh),{label:e.path,title:e.name},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.path),1)])),_:2},1032,["label","title"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)((0,F.SU)(ue.nH),{label:"完整路径"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(de.EZ),{modelValue:e.fullpath,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fullpath=t),readonly:""},null,8,["modelValue"])])),_:1}),(0,i.Wm)((0,F.SU)(ue.nH),{label:"打开方式"},{default:(0,i.w5)((()=>[(0,i._)("div",me,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.theWithAppList,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"with-app",key:t.id,title:t.title,onClick:n=>e.handleClickApp(t)},[(0,i._)("img",{class:"with-app-icon",src:t.icon},null,8,fe),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(U.GhU))])),_:1})],8,he)))),128))])])),_:1})])),_:1}),(0,i._)("div",null,[(0,i.Wm)((0,F.SU)(le.mi),{onClick:e.close},{default:(0,i.w5)((()=>[(0,i.Uk)("关闭")])),_:1},8,["onClick"])])])])),_:1})}}});const ve=(0,O.Z)(_e,[["__scopeId","data-v-38bce73e"]]);var ye=ve;function we(e,t,n,r,a,l){const s=(0,i.up)("el-form-item"),u=(0,i.up)("MyStateBox"),d=(0,i.up)("el-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h3",null,"项目: "+(0,o.zw)(l.item.name),1),(0,i.Wm)(d,{"label-width":"50px"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{label:"路径"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(l.item.path),1)])),_:1}),(0,i.Wm)(s,{label:"类型"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(l.item.type),1)])),_:1}),(0,i.Wm)(s,{label:"状态"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{modelValue:l.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>l.item.state=e),targetId:l.item.id,onClickImport:l.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}const be={class:"state-box"},ke={class:"state-box-text"},xe={class:"state-box-btn-parent"};function Ce(e,t,n,r,a,o){const l=(0,i.up)("FileState"),s=(0,i.up)("el-button");return(0,i.wg)(),(0,i.iD)("div",be,[(0,i._)("span",ke,[(0,i.Wm)(l,{code:n.modelValue},null,8,["code"])]),(0,i._)("span",xe,[(0,i.wy)((0,i.Wm)(s,{class:"state-box-btn",type:"success",onClick:o.handleClickImport},{default:(0,i.w5)((()=>[(0,i.Uk)(" 导入 ")])),_:1},8,["onClick"]),[[u.F8,0==n.targetId]])])])}var We=n(3312),Pe={name:"import-fast-state-box-with-import-button",components:{FileState:We.Z},methods:{handleClickImport(){this.$emit("click-import")}},props:{modelValue:String,targetId:Number}};const Ie=(0,O.Z)(Pe,[["render",Ce],["__scopeId","data-v-75b94dcf"]]);var Se=Ie,Te={name:"import-fast-info-of-project",components:{MyStateBox:Se},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository","project","worktree"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const De=(0,O.Z)(Te,[["render",we]]);var Oe=De;function je(e,t,n,r,a,l){const s=(0,i.up)("el-form-item"),u=(0,i.up)("MyStateBox"),d=(0,i.up)("el-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h3",null,"Git 仓库: "+(0,o.zw)(l.item.name),1),(0,i.Wm)(d,{"label-width":"50px"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{label:"路径"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(l.item.path),1)])),_:1}),(0,i.Wm)(s,{label:"状态"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{modelValue:l.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>l.item.state=e),targetId:l.item.id,onClickImport:l.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}var Ve={name:"import-fast-info-of-repository",components:{MyStateBox:Se},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const Fe=(0,O.Z)(Ve,[["render",je],["__scopeId","data-v-18e76692"]]);var Ue=Fe;function ze(e,t,n,r,a,l){const s=(0,i.up)("el-form-item"),u=(0,i.up)("MyStateBox"),d=(0,i.up)("el-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h3",null,"Git 工作区: "+(0,o.zw)(l.item.name),1),(0,i.Wm)(d,{"label-width":"50px"},{default:(0,i.w5)((()=>[(0,i.Wm)(s,{label:"路径"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(l.item.path),1)])),_:1}),(0,i.Wm)(s,{label:"状态"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{modelValue:l.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>l.item.state=e),targetId:l.item.id,onClickImport:l.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}var Ae={name:"import-fast-info-of-worktree",components:{MyStateBox:Se},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository","worktree"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const $e=(0,O.Z)(Ae,[["render",ze]]);var Ge=$e,Ee=n(4383);const Me=e=>((0,i.dD)("data-v-2c573d99"),e=e(),(0,i.Cn)(),e),Ne={class:"this-dialog"},Be={class:"my-path-bar"},Le={class:"item-info-box no-result-text"},Ze=Me((()=>(0,i._)("div",null,null,-1))),Re={name:"import-fast-dialog",components:{MyInfoProject:Oe,MyInfoRepository:Ue,MyInfoWorktree:Ge,OpenFileDialog:Ee.Z},computed:{displayNoResult(){let e=this.has_search_done,t=this.has_project,n=this.has_repository,i=this.has_worktree;return e&&!t&&!n&&!i}},data(){return{path:"",project:{},repository:{},worktree:{},has_project:!1,has_repository:!1,has_worktree:!1,has_search_done:!1,result_vo:{},displayOpenDialog:!1}},methods:{search(){let e=this.path,t="POST",n="repository-worktree-project/find",i={path:e};this.$store.dispatch("rest/execute",{method:t,type:n,data:i}).then((e=>{let t=e.data;this.handleSearchResults(t)}))},browse(){this.displayOpenDialog=!0},save(e){let t=this.result_vo.path,n="POST",i="repository-worktree-project/save",r={path:t},a=e.items,o=this.result_vo,l=r;for(var s in a){let e=a[s];l[e]=o[e]}this.$store.dispatch("rest/execute",{method:n,type:i,data:r}).then((()=>{this.search()}))},makeObjectWithoutNil(e){return null==e&&(e={}),e},handleAction(e){let t=e.name;"save"==t&&this.save(e)},handleSearchResults(e){this.project=this.makeObjectWithoutNil(e.project),this.repository=this.makeObjectWithoutNil(e.repository),this.worktree=this.makeObjectWithoutNil(e.worktree),this.has_project=null!=e.project,this.has_repository=null!=e.repository,this.has_worktree=null!=e.worktree,this.has_search_done=!0,this.result_vo=e},handleOpenPathChange(e){let t="";for(var n in e){let i=e[n];t=i.path}this.path=t}}};var He=Object.assign(Re,{setup(e){return(e,t)=>{const n=(0,i.up)("el-button"),r=(0,i.up)("el-input"),a=(0,i.up)("el-icon"),o=(0,i.up)("el-dialog");return(0,i.wg)(),(0,i.j4)(o,{title:"快速导入：仓库 | 工作树 | 项目","align-center":"",width:"800px"},{default:(0,i.w5)((()=>[(0,i._)("div",Ne,[(0,i._)("div",Be,[(0,i.Wm)(r,{modelValue:e.path,"onUpdate:modelValue":t[0]||(t[0]=t=>e.path=t),placeholder:"请输入要查找的文件或文件夹路径"},{prepend:(0,i.w5)((()=>[(0,i.Uk)(" 路径 ")])),append:(0,i.w5)((()=>[(0,i.Wm)(n,{onClick:e.browse},{default:(0,i.w5)((()=>[(0,i.Uk)(" 浏览... ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,i.Wm)(n,{style:{"margin-left":"10px"},onClick:e.search},{default:(0,i.w5)((()=>[(0,i.Wm)(a,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,F.SU)(U.olm))])),_:1}),(0,i.Uk)(" 查找 ")])),_:1},8,["onClick"])]),(0,i._)("div",null,[(0,i.wy)((0,i.Wm)(Ue,{class:"item-info-box",modelValue:e.repository,"onUpdate:modelValue":t[1]||(t[1]=t=>e.repository=t),onAction:e.handleAction},null,8,["modelValue","onAction"]),[[u.F8,e.has_repository]]),(0,i.wy)((0,i.Wm)(Ge,{class:"item-info-box",modelValue:e.worktree,"onUpdate:modelValue":t[2]||(t[2]=t=>e.worktree=t),"x-hide-v-show":"has_worktree",onAction:e.handleAction},null,8,["modelValue","onAction"]),[[u.F8,!1]]),(0,i.wy)((0,i.Wm)(Oe,{class:"item-info-box",modelValue:e.project,"onUpdate:modelValue":t[3]||(t[3]=t=>e.project=t),onAction:e.handleAction},null,8,["modelValue","onAction"]),[[u.F8,e.has_project]]),(0,i.wy)((0,i._)("div",Le," 没有找到任何结果 :( ",512),[[u.F8,e.displayNoResult]])]),Ze,(0,i.Wm)(Ee.Z,{modelValue:e.displayOpenDialog,"onUpdate:modelValue":t[4]||(t[4]=t=>e.displayOpenDialog=t),onOpenFile:e.handleOpenPathChange},null,8,["modelValue","onOpenFile"])])])),_:1})}}});const Ke=(0,O.Z)(He,[["__scopeId","data-v-2c573d99"]]);var Ye=Ke,Je=n(8818),qe={name:"home-local-repository-index",components:{MyRepoList:oe,MyOpenItemDialog:ye,FastImportDialog:Ye,OpenWithDrawer:Je.Z},computed:{theFrameConfig(){return{pager:!1,home:!0,nav:!0,search:!0,searchCategory:"本地仓库"}},theCountItemsTotal(){return this.$store.getters["local_repository/total"]},theItems(){return this.$store.getters["local_repository/currentPageItems"]}},data(){return{pageSize:1,currentPage:1,expandedItemId:0,background:"",displayFastImportDialog:!1,displayOpenItemDialog:!1,displayOpenWithDrawer:!1,dataForOpenItemDialog:{}}},methods:{handleAction(e){let t=e.name;"refresh"==t?this.fetch():"add"==t?this.add():"applyFilter"==t?this.applyFilter(e.value):"open-item-with"==t?this.openItemWith(e):"expand-item"==t?this.makeItemExpanded(e):"fold-item"==t?this.makeItemFolded(e):"intent"==t?this.handleIntent(e):console.warn("unsupported action: "+t)},fetch(){this.$store.dispatch("local_repository/fetch")},initOpenWithList(){this.$store.dispatch("executable/init")},add(){this.displayFastImportDialog=!0},handleIntent(e){let t=e.intent,n={intents:[t]};this.$store.dispatch("intent/start",n)},handleSizeChange(e){let t=e;this.$store.commit("local_repository/update",{size:t})},handleCurrentChange(e){let t=e-1;this.$store.commit("local_repository/update",{index:t})},applyFilter(e){this.$store.commit("local_repository/update",{filter:e})},pageViewToModel(){let e=this.currentPage-1,t=this.pageSize;this.$store.commit("local_repository/update",{index:e,size:t})},pageModelToView(){this.currentPage=this.$store.getters["local_repository/currentPage"],this.pageSize=this.$store.getters["local_repository/pageSize"]},makeItemExpanded(e){let t=e.item;if(null==t)return;let n=t.id;this.expandedItemId=n,this.$store.dispatch("local_repository/fetchById",{id:n})},makeItemFolded(){this.expandedItemId=0},openItemWith(e){let t=e.item;this.dataForOpenItemDialog=t,this.displayOpenWithDrawer=!0},openFastImportDialog(){this.displayFastImportDialog=!0}},mounted(){this.pageModelToView(),this.initOpenWithList(),this.fetch()}};const Qe=(0,O.Z)(qe,[["render",a],["__scopeId","data-v-772e848a"]]);var Xe=Qe},8818:function(e,t,n){n.d(t,{Z:function(){return C}});var i=n(3396);function r(e,t,n,r,a,o){const l=(0,i.up)("MyPanel"),s=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.j4)(s,{class:"open-with-drawer",title:o.theDrawerTitle,direction:a.direction,"before-close":o.handleClose,style:{"background-color":"rgb(230, 230, 230)","max-height":"380px","min-height":"300px"}},{default:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(l)])])),_:1},8,["title","direction","before-close"])}var a=n(4870),o=n(2748);const l={class:"exe-list"},s=["title","onClick"],u={class:"exe-list-item-inner"},d=["src"];function c(e,t,n,r,a,o){return(0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.items,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"exe-list-item",key:e.id,title:e.title,onClick:t=>o.handleClickItem(e)},[(0,i._)("div",u,[(0,i._)("img",{class:"exe-list-item-icon",src:e.icon},null,8,d)])],8,s)))),128))])}var p={name:"open-with-panel",computed:{items(){return this.$store.getters["executable/openWithList"]}},data(){return{targetType:"仓库路径",targetPath:"/a/b/c/d"}},methods:{handleClickItem(e){let t="intent",n={executable:e},i={name:t,intent:n};this.$emit("action",i)}}},m=n(89);const h=(0,m.Z)(p,[["render",c],["__scopeId","data-v-5887e2a4"]]);var f=h;n(8822);const g={class:"open-with-panel"},_=(0,i._)("div",{style:{"margin-top":"20px"}},"请选择打开方式: ",-1),v={name:"open-with-panel",components:{MyExeList:f},computed:{current(){let e=this.$store.getters["intent/current"];return null==e&&(e={}),e},revision(){return this.$store.getters["intent/revision"]},path(){return this.$store.getters["intent/path"]},type(){return this.$store.getters["intent/type"]},name(){return this.$store.getters["intent/name"]}},data(){return{}},methods:{handleAction(e){let t=e.name;if("intent"==t)return this.handleIntent(e.intent);this.$emit("action",e)},handleIntent(e){if(null==e)return;let t=e,n=this.current,i={};this.copyfields(t,i),this.copyfields(n,i);let r={intents:[i]};this.$store.dispatch("intent/run",r)},copyfields(e,t){for(var n in e)t[n]=e[n]},copy(){let e=this.path;this.$store.dispatch("clipboard/copy",e)}},mounted(){},watch:{revision(){}}};var y=Object.assign(v,{setup(e){return(e,t)=>{const n=(0,i.up)("el-icon"),r=(0,i.up)("el-button"),l=(0,i.up)("el-input");return(0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(l,{modelValue:e.path,readonly:""},{prepend:(0,i.w5)((()=>[(0,i.Uk)(" 路径 ")])),append:(0,i.w5)((()=>[(0,i.Wm)(r,{onClick:e.copy,title:"把路径复制到剪贴板"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)((0,a.SU)(o._hA))])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),_,(0,i.Wm)(f,{onAction:e.handleAction},null,8,["onAction"])])}}});const w=y;var b=w,k={name:"open-with-drawer",components:{MyPanel:b},computed:{current(){let e=this.$store.getters["intent/current"];return null==e&&(e={}),e},revision(){return this.$store.getters["intent/revision"]},theTargetName(){return this.$store.getters["intent/name"]},theTargetType(){return this.$store.getters["intent/type"]},theTargetTypeText(){return this.$store.getters["intent/typetext"]},theDrawerTitle(){let e=this.theTargetName,t=this.theTargetType,n=this.theTargetTypeText;return""==e&&"worktree"==t&&(e="[默认]"),n+": "+e}},data(){return{direction:"btt"}},methods:{handleClose(e){e()}}};const x=(0,m.Z)(k,[["render",r],["__scopeId","data-v-378ad22f"]]);var C=x},3312:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(3396),r=n(4870),a=n(9242),o=n(7139),l=n(2748);const s=["title"],u={class:"state-text"},d={ready:{type:"success",text:"正常"},moved:{type:"warn",text:"已搬迁"},offline:{type:"error",text:"找不到"},untracked:{type:"default",text:"未导入"},undef:{type:"warn",text:"未知"}},c={name:"file-state",computed:{stateText(){return this.stringifyState(this.code)},statetype(){return this.getStateType(this.code)}},data(){return{}},methods:{stringifyState(e){let t=d[e];return null==t?e:t.text},getStateType(e){let t=d[e];return null==t?e:t.type}},props:{code:String}};var p=Object.assign(c,{setup(e){return(t,n)=>{const d=(0,i.up)("el-icon");return(0,i.wg)(),(0,i.iD)("div",{title:e.code},[(0,i.wy)((0,i.Wm)(d,{class:"state-icon-ok"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,r.SU)(l.c5o))])),_:1},512),[[a.F8,"success"==t.statetype]]),(0,i._)("span",u,(0,o.zw)(t.stateText),1),(0,i.wy)((0,i.Wm)(d,{class:"state-icon-warn"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,r.SU)(l.hg5))])),_:1},512),[[a.F8,"warn"==t.statetype]]),(0,i.wy)((0,i.Wm)(d,{class:"state-icon-error"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,r.SU)(l.Tw$))])),_:1},512),[[a.F8,"error"==t.statetype]])],8,s)}}}),m=n(89);const h=(0,m.Z)(p,[["__scopeId","data-v-a43b95d8"]]);var f=h}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,r,a){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],r=e[d][1],a=e[d][2];for(var l=!0,s=0;s<i.length;s++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[s])}))?i.splice(s--,1):(l=!1,a<o&&(o=a));if(l){e.splice(d--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(443===e?"about":e)+"."+{16:"c450c7da",17:"a95bd31b",22:"54778398",28:"de69aa7b",78:"0ff985eb",88:"c7793865",166:"1e4ff627",229:"cb0e837f",236:"15d61a4f",282:"95fc2210",307:"fbb831db",325:"1b5244fb",330:"ccd82962",335:"a9580fb4",345:"ac9a0939",363:"0881b1f5",365:"37c02d14",403:"664c39a5",415:"b13cb3b9",433:"583b07ae",443:"230a19b1",455:"1e39dc68",479:"b612764d",521:"705102aa",541:"571cb208",549:"1f68a5c0",609:"70324f4a",851:"3e4dec7a",898:"201e97f0",924:"769ec426",953:"6084ad64",970:"54b92170",990:"46062f16"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+(443===e?"about":e)+"."+{16:"331c5444",17:"e3b2a3e7",28:"f03829ac",166:"26cb84a2",229:"6860a683",282:"0b3b55c2",307:"26cb84a2",325:"031dba84",345:"e7a68fd4",363:"a6032d81",365:"d466074c",433:"f96c1bdc",443:"71b4d88e",455:"047ef31a",479:"ab46f3c8",549:"40bc267a",609:"e69e6f34",898:"12bf974f",924:"7daa715a",990:"999e0ea2"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="wpm-station-vue:";n.l=function(i,r,a,o){if(e[i])e[i].push(r);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+a){l=c;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=i),e[i]=[r];var p=function(t,n){l.onerror=l.onload=null,clearTimeout(m);var r=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,i,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var o=function(n){if(a.onerror=a.onload=null,"load"===n.type)i();else{var o=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=l,a.parentNode.removeChild(a),r(s)}};return a.onerror=a.onload=o,a.href=t,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=n[i],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===e||a===t))return r}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){r=o[i],a=r.getAttribute("data-href");if(a===e||a===t)return r}},i=function(i){return new Promise((function(r,a){var o=n.miniCssF(i),l=n.p+o;if(t(o,l))return r();e(i,l,null,r,a)}))},r={143:0};n.f.miniCss=function(e,t){var n={16:1,17:1,28:1,166:1,229:1,282:1,307:1,325:1,345:1,363:1,365:1,433:1,443:1,455:1,479:1,549:1,609:1,898:1,924:1,990:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=i(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var o=n.p+n.u(t),l=new Error,s=function(i){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}};n.l(o,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,a,o=i[0],l=i[1],s=i[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var d=s(n)}for(t&&t(i);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},i=self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6110)}));i=n.O(i)})();
//# sourceMappingURL=app.f131d0b6.js.map