"use strict";(self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[]).push([[549],{1549:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(3396);function o(e,t,n,o,a,i){const s=(0,r.up)("MyClient");return(0,r.wg)(),(0,r.j4)(s)}const a={class:"box-outer"},i={class:"box-inner"};function s(e,t,n,o,s,c){const l=(0,r.up)("MyFilter"),p=(0,r.up)("MyPager"),u=(0,r.up)("MyTable"),d=(0,r.up)("MyStateLoader"),h=(0,r.up)("HomeFrame");return(0,r.wg)(),(0,r.j4)(h,{config:c.theFrameConfig,onAction:c.handleAction},{default:(0,r.w5)((()=>[(0,r._)("div",a,[(0,r._)("div",i,[(0,r.Wm)(l,{class:"clientbox"}),(0,r.Wm)(p,{class:"clientbox"}),(0,r.Wm)(u,{class:"clientbox",onAction:c.handleAction},null,8,["onAction"]),(0,r.Wm)(d)])])])),_:1},8,["config","onAction"])}n(7658);var c=n(7139);function l(e,t,n,o,a,i){const s=(0,r.up)("el-button"),l=(0,r.up)("el-table-column"),p=(0,r.up)("MyFileState"),u=(0,r.up)("el-table");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{data:i.items},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{prop:"name",label:"名称",sortable:""},{default:(0,r.w5)((e=>[(0,r.Wm)(s,{type:"primary",link:"",title:e.row.path,onClick:t=>i.handleOpenItem(e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,c.zw)(e.row.name),1)])),_:2},1032,["title","onClick"])])),_:1}),(0,r.Wm)(l,{prop:"type",label:"类型",sortable:""}),(0,r.Wm)(l,{prop:"state",label:"状态"},{default:(0,r.w5)((e=>[(0,r.Wm)(p,{code:e.row.state},null,8,["code"])])),_:1}),(0,r.Wm)(l,{label:"操作",width:"170px"},{default:(0,r.w5)((e=>[(0,r.Wm)(s,{link:"",type:"primary",onClick:t=>i.handleOpenItem(e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("打开")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])}var p=n(3312),u={name:"ProjectTable",components:{MyFileState:p.Z},data(){return{}},computed:{items(){return this.$store.getters["project/listCurrentPage"]}},methods:{fetch(){this.$store.dispatch("project/fetch")},handleOpenItem(e){let t={project:e},n="intent",r={name:n,intent:t};this.$emit("action",r)}},mounted(){this.fetch()}},d=n(89);const h=(0,d.Z)(u,[["render",l]]);var m=h;const g={class:"pager-box"};function f(e,t,n,o,a,i){const s=(0,r.up)("el-pagination");return(0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(s,{"current-page":i.currentPage,"page-size":i.pageSize,"page-sizes":[5,10,20,50,100,200,500],background:a.background,layout:"total, sizes, prev, pager, next",total:i.theCountItemsTotal,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])])}var y={name:"home-project-pager",computed:{theCountItemsTotal(){return this.$store.getters["project/total"]},pageSize(){return this.$store.getters["project/pageSize"]},currentPage(){return this.$store.getters["project/currentPage"]}},data(){return{background:!0}},methods:{handleSizeChange(e){let t=e,n=0;this.$store.commit("project/update",{size:t,index:n})},handleCurrentChange(e){let t=e-1;this.$store.commit("project/update",{index:t})}}};const C=(0,d.Z)(y,[["render",f]]);var v=C;function w(e,t,n,o,a,i){const s=(0,r.up)("SearchBox");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(s,{ref:"theSearchBox",config:a.config,onAction:i.handleAction},null,8,["config","onAction"])])}var b=n(1195);function j(){}var k={name:"home-project-filter",components:{SearchBox:b.Z},data(){const e={searchCategory:"工程项目"};return{config:e}},methods:{handleAction(e){let t=e.name;"applyFilter"==t&&this.handleApplyFilter(e)},handleApplyFilter(e){let t=e.value;this.$store.commit("project/update",{filter:t})},init(e){j(e)}},mounted(){this.init("abc123")}};const _=(0,d.Z)(k,[["render",w]]);var x=_;function I(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div")}var M={name:"home-project-state-loader",computed:{stringifyCurrentPageIds(){return this.$store.getters["project/stringifyCurrentPageIds"]}},watch:{stringifyCurrentPageIds(e){this.$store.dispatch("project/fetchByIds",{value:e})}}};const S=(0,d.Z)(M,[["render",I]]);var W=S,$={name:"home-projects-index",components:{MyTable:m,MyPager:v,MyFilter:x,MyStateLoader:W},computed:{theFrameConfig(){return{pager:!1,home:!0,nav:!0,search:!1,searchCategory:"工程项目"}}},data(){return{}},methods:{handleAction(e){let t=e.name;"refresh"==t?this.fetch():"intent"==t?this.startIntent(e.intent):"add"==t?this.add():"applyFilter"==t?this.applyFilter(e.value):"open-item-more"==t?this.openItemMore(e):console.warn("unsupported action: "+t)},add(){this.$router.push("/settings/projects")},applyFilter(){},openItemMore(){},startIntent(e){let t={intents:[e]};this.$store.dispatch("intent/start",t)},fetch(){this.$store.dispatch("project/fetch")}},mounted(){this.fetch()}};const z=(0,d.Z)($,[["render",s],["__scopeId","data-v-e150103c"]]);var A=z,F={name:"HomeProjects",components:{MyClient:A}};const P=(0,d.Z)(F,[["render",o]]);var Z=P}}]);
//# sourceMappingURL=549.1f68a5c0.js.map