"use strict";(self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[]).push([[946],{7967:function(e,t,l){l.d(t,{Z:function(){return S}});var a=l(3396),i=l(7139);const n=["src"];function o(e,t,l,o,d,m){const r=(0,a.up)("MySelectorDialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:"image-parent",style:(0,i.j5)(m.imageParentStyle),title:"修改",onClick:t[0]||(t[0]=e=>d.displayDialog=!0)},[(0,a._)("img",{class:"image-img",src:m.url,style:(0,i.j5)(m.imageStyle)},null,12,n)],4),(0,a.Wm)(r,{modelValue:d.displayDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>d.displayDialog=e),onChange:m.handleImageSelected},null,8,["modelValue","onChange"])])}function d(e,t,l,i,n,o){const d=(0,a.up)("MySelector"),m=(0,a.up)("el-button"),r=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(r,{title:"选择图片"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"",onChange:o.handleSelectionChange},null,8,["onChange"]),(0,a._)("div",null,[(0,a.Wm)(m,{type:"primary",onClick:o.onok},{default:(0,a.w5)((()=>[(0,a.Uk)("确定")])),_:1},8,["onClick"]),(0,a.Wm)(m,{type:"default",onClick:o.cancel},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"])])])),_:1})}const m=e=>((0,a.dD)("data-v-9bb3daa0"),e=e(),(0,a.Cn)(),e),r=m((()=>(0,a._)("div",{class:"searchbox"},null,-1))),s={class:"pager"},u={class:"item-list"},c={class:"list"},p=["title","onClick"],h=["src"],g={class:"item-text"};function y(e,t,l,n,o,d){const m=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)("div",null,[r,(0,a._)("div",s,[(0,a.Wm)(m,{"current-page":o.currentPage,"onUpdate:currentPage":t[0]||(t[0]=e=>o.currentPage=e),"page-size":o.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>o.pageSize=e),"page-sizes":[5,10,20,50,100,200,500],background:o.background,layout:"total, sizes, prev, pager, next",total:d.theCountItemsTotal,onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])]),(0,a._)("div",u,[(0,a._)("ul",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.items,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"item",key:e.id,title:e.name,style:(0,i.j5)(d.computeItemStyle(e)),onClick:t=>d.handleClickItem(e)},[(0,a._)("img",{class:"item-image",src:e.url},null,8,h),(0,a._)("div",g,(0,i.zw)(e.label),1)],12,p)))),128))])])])}var f={name:"media-selector",computed:{items(){return this.$store.getters["media/list"]},theCountItemsTotal(){return this.$store.getters["media/total"]}},data(){return{selectedId:0,selectedItem:{},currentPage:1,pageSize:10,background:!0}},methods:{handleClickItem(e){this.selectedId=e.id,this.selectedItem=e,this.$emit("change",e)},computeItemStyle(e){let t=e.id==this.selectedId,l={};return t&&(l.borderWidth="3px",l.borderColor="rgb(61, 139, 255)"),l},fetch(){this.$store.dispatch("lazy/load_mediae")},handleSizeChange(e){let t=e,l=0;this.$store.commit("media/update",{index:l,size:t})},handleCurrentChange(e){let t=e-1;this.$store.commit("media/update",{index:t})}},mounted(){this.fetch()}},_=l(89);const w=(0,_.Z)(f,[["render",y],["__scopeId","data-v-9bb3daa0"]]);var W=w,b={name:"media-selector-dialog",components:{MySelector:W},data(){return{item:{}}},methods:{handleSelectionChange(e){null!=e&&(this.item=e)},onok(){let e=this.item,t=e.id;t<1||(this.$emit("change",e),this.close())},cancel(){this.close()},close(){this.$emit("update:modelValue",!1)}}};const v=(0,_.Z)(b,[["render",d]]);var C=v,V={name:"media-image-select",components:{MySelectorDialog:C},computed:{url(){return this.modelValue},imageStyle(){let e=this.imageHeight,t=this.imageWidth;return{maxHeight:e,maxWidth:t}},imageParentStyle(){let e=this.imageHeight,t=this.imageWidth;return{minHeight:e,minWidth:t}}},data(){return{displayDialog:!1}},methods:{handleImageSelected(e){let t=e.url;this.$emit("update:modelValue",t)}},props:{modelValue:String,imageWidth:String,imageHeight:String}};const k=(0,_.Z)(V,[["render",o],["__scopeId","data-v-2c75f73f"]]);var S=k},3368:function(e,t,l){l.d(t,{Z:function(){return s}});var a=l(3396),i=l(7139);const n=["src"];function o(e,t,l,o,d,m){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:"image-parent",style:(0,i.j5)(m.imageParentStyle)},[(0,a._)("img",{class:"image-img",src:m.url,style:(0,i.j5)(m.imageStyle)},null,12,n)],4)])}var d={name:"media-image-view",components:{},computed:{url(){return this.modelValue},imageStyle(){let e=this.imageHeight,t=this.imageWidth;return{maxHeight:e,maxWidth:t}},imageParentStyle(){let e=this.imageHeight,t=this.imageWidth;return{minHeight:e,minWidth:t}}},data(){return{}},methods:{},props:{modelValue:String,imageWidth:String,imageHeight:String}},m=l(89);const r=(0,m.Z)(d,[["render",o],["__scopeId","data-v-0b43dffa"]]);var s=r},9698:function(e,t,l){l.d(t,{Z:function(){return c}});var a=l(3396),i=l(7139),n=l(9242);const o={class:"utils-batch-tool-bar"},d={class:"the-count-box"};function m(e,t,l,m,r,s){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("span",null,(0,i.zw)(l.title),1),(0,a._)("span",d,(0,i.zw)(s.count)+" 项 ",1),(0,a.WI)(e.$slots,"default",{},void 0,!0)],512)),[[n.F8,!s.hide]])}var r={name:"utils-batch-tool-bar",computed:{items(){let e=this.modelValue;return null==e&&(e=[]),e},count(){let e=this.items.length;return null==e?0:e},hide(){return!!this.hideEmpty&&this.count<=0}},props:{modelValue:Array,title:String,hideEmpty:Boolean}},s=l(89);const u=(0,s.Z)(r,[["render",m],["__scopeId","data-v-5c44dc71"]]);var c=u},7946:function(e,t,l){l.r(t),l.d(t,{default:function(){return Y}});var a=l(3396);function i(e,t,l,i,n,o){const d=(0,a.up)("ClientViewIndex"),m=(0,a.up)("AdminFrame");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1})}const n=e=>((0,a.dD)("data-v-c5e559d0"),e=e(),(0,a.Cn)(),e),o={class:"settings-project-types-index"},d=n((()=>(0,a._)("h1",null,"内容类型",-1)));function m(e,t,l,i,n,m){const r=(0,a.up)("MyToolbar"),s=(0,a.up)("MyTable");return(0,a.wg)(),(0,a.iD)("div",o,[d,(0,a.Wm)(r),(0,a.Wm)(s)])}function r(e,t,l,i,n,o){const d=(0,a.up)("el-table-column"),m=(0,a.up)("ImageView"),r=(0,a.up)("el-button"),s=(0,a.up)("el-table"),u=(0,a.up)("MyBatch"),c=(0,a.up)("MyEditDialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{data:o.items,onSelectionChange:o.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"selection"}),(0,a.Wm)(d,{prop:"type",label:"",width:"48px"},{default:(0,a.w5)((e=>[(0,a.Wm)(m,{modelValue:e.row.icon,"onUpdate:modelValue":t=>e.row.icon=t,"image-height":"24px","image-width":"24px"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(d,{prop:"type",label:"类型",sortable:""}),(0,a.Wm)(d,{prop:"patterns",label:"命名模式",sortable:""}),(0,a.Wm)(d,{prop:"label",label:"标签",sortable:""}),(0,a.Wm)(d,{prop:"priority",label:"优先级",sortable:""}),(0,a.Wm)(d,{label:"操作",width:"170px"},{default:(0,a.w5)((e=>[(0,a.Wm)(r,{link:"",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("详细")])),_:1}),(0,a.Wm)(r,{link:"",type:"primary",onClick:t=>o.handleClickEditItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(r,{link:"",type:"danger",onClick:t=>o.handleClickRemoveItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Wm)(u,{modelValue:n.selectedItems,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedItems=e)},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:n.displayEditDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.displayEditDialog=e),title:"编辑类型",method:"PUT",target:n.theEditDialogTarget},null,8,["modelValue","target"])])}function s(e,t,l,i,n,o){const d=(0,a.up)("ImageSelect"),m=(0,a.up)("el-form-item"),r=(0,a.up)("el-input"),s=(0,a.up)("el-checkbox"),u=(0,a.up)("MyPrioritySelector"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"label-width":"100px"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:"图标"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.item.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>n.item.icon=e),"image-height":"100px","image-width":"100px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"类型名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:n.item.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.item.type=e),placeholder:"例如：text/plain"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"命名模式"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:n.item.patterns,"onUpdate:modelValue":t[2]||(t[2]=e=>n.item.patterns=e),placeholder:"例如：*.txt; 可接受多个值，以逗号分隔"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"目标"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:n.item.as_dir,"onUpdate:modelValue":t[3]||(t[3]=e=>n.item.as_dir=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件夹 ")])),_:1},8,["modelValue"]),(0,a.Wm)(s,{modelValue:n.item.as_file,"onUpdate:modelValue":t[4]||(t[4]=e=>n.item.as_file=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件 ")])),_:1},8,["modelValue"]),(0,a.Wm)(s,{modelValue:n.item.as_project,"onUpdate:modelValue":t[5]||(t[5]=e=>n.item.as_project=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 项目 ")])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"标签名"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:n.item.label,"onUpdate:modelValue":t[6]||(t[6]=e=>n.item.label=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"优先级"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:n.item.priority,"onUpdate:modelValue":t[7]||(t[7]=e=>n.item.priority=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:n.item.description,"onUpdate:modelValue":t[8]||(t[8]=e=>n.item.description=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",null,[(0,a.Wm)(p,{type:"success",onClick:o.save},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["onClick"]),(0,a.Wm)(p,{type:"default",onClick:o.close},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"])])])),_:1})}function u(e,t,l,i,n,o){const d=(0,a.up)("el-option"),m=(0,a.up)("el-select");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.options,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,value:e.value,label:e.text},null,8,["value","label"])))),128)),(0,a.Wm)(d,{value:0,label:"默认值"})])),_:1})}l(7658);var c={name:"project-type-priority-selector",data(){const e=6;let t=[];for(let l=1;l<=e;l++){let e={id:l,value:l,text:""+l};t.push(e)}return{options:t}}},p=l(89);const h=(0,p.Z)(c,[["render",u]]);var g=h,y=l(7967),f={name:"settings-project-type-edit-dialog",components:{MyPrioritySelector:g,ImageSelect:y.Z},data(){return{item:{as_dir:!1,as_file:!1,description:"",label:"",name:"",type:""}}},methods:{save(){let e=this.item,t="",l=this.method;if("POST"==l)t="insert";else{if("PUT"!=l)return;t="update"}this.$store.dispatch("content_type/"+t,{item:e}).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)},cloneObject(e){let t=JSON.stringify(e);return JSON.parse(t)}},props:{method:String,target:Object},watch:{target(e){this.item=this.cloneObject(e)}}};const _=(0,p.Z)(f,[["render",s]]);var w=_,W=l(3368),b=l(2655);const v={style:{"margin-top":"10px"}};function C(e,t,l,i,n,o){const d=(0,a.up)("el-button"),m=(0,a.up)("BatchToolBar");return(0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(m,{modelValue:o.items,"onUpdate:modelValue":t[0]||(t[0]=e=>o.items=e),title:"批处理",hideEmpty:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"danger",onClick:o.handleDelete},{default:(0,a.w5)((()=>[(0,a.Uk)(" 删除 ")])),_:1},8,["onClick"]),(0,a.Wm)(d,{type:"primary",onClick:o.handlePutToBuffer},{default:(0,a.w5)((()=>[(0,a.Uk)(" 存入缓冲区 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}var V=l(9698),k={name:"settings-intent-templates-batch",components:{BatchToolBar:V.Z},computed:{items(){return this.modelValue}},methods:{handleDelete(){let e=this.items;this.$store.dispatch("content_type/remove",{items:e})},handlePutToBuffer(){let e="contenttypes",t={};t[e]=this.items,this.$store.dispatch("jsonbuffer/put",{vo:t})}},props:{modelValue:Array}};const S=(0,p.Z)(k,[["render",C]]);var D=S,I={name:"settings-project-types-table",components:{MyEditDialog:w,ImageView:W.Z,MyBatch:D},computed:{items(){return this.$store.getters["content_type/all"]}},data(){return{displayEditDialog:!1,theEditDialogTarget:{},selectedItems:[]}},methods:{handleClickEditItem(e){this.theEditDialogTarget=e,this.displayEditDialog=!0},handleClickRemoveItem(e){let t="删除项目类型",l="确定要移除 ["+e.name+"] 这项目类型吗？",a="";b.T.confirm(l+a,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.removeItem(e)})).catch((()=>{}))},removeItem(e){this.$store.dispatch("content_type/remove",e)},handleSelectionChange(e){this.selectedItems=e}}};const U=(0,p.Z)(I,[["render",r]]);var T=U,x=l(4870),E=l(2748);const j={class:"toolbar"},P={name:"settings-project-types-toolbar",components:{MyEditDialog:w},data(){return{displayEditDialog:!1,theEditDialogTarget:{}}},methods:{fetch(){this.$store.dispatch("content_type/fetch")},insert(){this.theEditDialogTarget={},this.displayEditDialog=!0},importPresetTypes(){let e="POST",t="import-project-types",l={};this.$store.dispatch("rest/execute",{method:e,type:t,data:l})},handleCommand(e){"IMPORT_PRESET_TYPES"==e&&this.importPresetTypes()}},mounted(){this.fetch()}};var Z=Object.assign(P,{setup(e){return(e,t)=>{const l=(0,a.up)("el-icon"),i=(0,a.up)("el-button"),n=(0,a.up)("el-dropdown-item"),o=(0,a.up)("el-dropdown-menu"),d=(0,a.up)("el-dropdown");return(0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",null,[(0,a.Wm)(i,{title:"刷新",onClick:e.fetch},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,x.SU)(E.hYj))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(i,{title:"添加",onClick:e.insert},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,x.SU)(E.v37))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(d,{style:{"margin-left":"15px"},onCommand:e.handleCommand},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{command:"IMPORT_PRESET_TYPES"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 导入预置类型 ")])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(i,{type:"default",title:"更多"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,x.SU)(E.Tkc))])),_:1})])),_:1})])),_:1},8,["onCommand"])]),(0,a.Wm)(w,{modelValue:e.displayEditDialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.displayEditDialog=t),method:"POST",target:e.theEditDialogTarget,title:"添加类型"},null,8,["modelValue","target"])])}}});const $=(0,p.Z)(Z,[["__scopeId","data-v-5c82ece1"]]);var z=$,M={name:"settings-project-types-index",components:{MyToolbar:z,MyTable:T}};const H=(0,p.Z)(M,[["render",m],["__scopeId","data-v-c5e559d0"]]);var B=H,O={name:"SettingsContentTypes",components:{ClientViewIndex:B}};const R=(0,p.Z)(O,[["render",i]]);var Y=R}}]);
//# sourceMappingURL=946.83eba952.js.map