(function(){"use strict";var e={9327:function(e,t,n){var r=n(5268);function i(e,t,n){if(null==e||null==t)return n;let i=e,o=r.Z.ToElements(t);for(var a in o=r.Z.NormalizeElements(o),o){let e=o[a],t=i[e];if(null==t)return n;i=t}return null==i?n:i}t["Z"]={name:"GetterJS",Get:i}},5268:function(e,t,n){n(7658);function r(e){let t=e,n=[];if(null==t)return n;for(var r in t){let e=t[r];null==e||""==e||"."==e||(".."==e?n.pop():n.push(e))}return n}function i(e){let t=o(e);return t=r(t),a(t)}function o(e){const t="\\",n="/";let r=e+"",i=r.replaceAll(t,n),o=i.split(n);return o}function a(e,t,n){null==t&&(t="/"),null==n&&(n="/");let r=t,i="";if(null==e)return i;for(var o in e){let t=e[o];i+=r+t,r=n}return i}t["Z"]={name:"path-js",NormalizeElements:r,NormalizePath:i,Stringify:a,ToElements:o}},6007:function(e,t){function n(){}function r(){return new n}n.prototype={GetRepositoryID(e){return e.$route.params["repository_id"]},GetCommitID(e){return e.$route.params["commit_id"]},GetTagID(e){return e.$route.params["tag_id"]}},t["Z"]={name:"route-js",NewRouteJS:r}},2171:function(e,t,n){var i=n(9242),o=n(7174),a=(n(4415),n(814)),s=n(3396);function l(e,t,n,r,i,o){const a=(0,s.up)("MyWorkingStateViewer"),l=(0,s.up)("MyLogViewer"),u=(0,s.up)("MyInit"),d=(0,s.up)("MyOpenWithListener"),c=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a),(0,s.Wm)(l),(0,s.Wm)(u),(0,s.Wm)(d),(0,s.Wm)(c)],64)}function u(e,t,n,r,i,o){return(0,s.wg)(),(0,s.iD)("div")}var d=n(7178),c=n(6666),p=n(2655);const m={trace:1,debug:2,info:3,warn:4,error:5,fatal:6},h={trace:"跟踪",debug:"调试",info:"信息",warn:"告警",error:"错误",fatal:"崩溃"};var f={name:"utils-log-viewer",computed:{logs(){return this.$store.getters["log/logs"]},todo(){return this.$store.getters["log/todo"]},revision(){return this.$store.getters["log/revision"]}},methods:{displayLogItem(e){if(null==e)return;if(e.read)return;if(!e.display)return;e.read=!0;let t=e.action,n=this.isok(e);"fetch"==t?n||this.displayMessageBalloon(e):n?this.displayMessageTip(e):this.displayMessageDialog(e)},isok(e){let t=this.getLogLevelNum(e);return t<=m.info},displayMessageTip(e){let t=e.message,n=e.type,r=e.duration,i=!0;(0,d.z8)({message:t,type:n,duration:r,showClose:i})},displayMessageBalloon(e){let t=e.message,n=e.type,r=e.duration,i=!0,o=this.getLogLevelText(e);(0,c.bM)({message:t,title:o,type:n,duration:r,showClose:i})},displayMessageDialog(e){let t=e.message,n=e.type,r=this.getLogLevelText(e);p.T.alert(t,r,{type:n})},getLogLevelText(e){let t=e.level,n=h[t];return null==n&&(n=t),null==n&&(n="no_level"),n},getLogLevelNum(e){let t=e.level,n=m[t];return null==n?0:n},displayLogs(){let e=0,t=this.todo;if(null!=t)for(var n in t){let r=t[n];this.displayLogItem(r),e++}if(e>5)return this.$store.commit("log/clean")}},watch:{revision(){this.displayLogs()}}},g=n(89);const v=(0,g.Z)(f,[["render",u]]);var _=v;const y={class:"working-state-view"};function w(e,t,n,r,o,a){const l=(0,s.Q2)("loading");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",y,[(0,s.wy)((0,s._)("div",null,null,512),[[l,a.working]])],512)),[[i.F8,a.working]])}var b={name:"utils-working-state-view",computed:{working(){return this.$store.getters["rest/working"]},loading(){return!0}}};const k=(0,g.Z)(b,[["render",w],["__scopeId","data-v-499ae694"]]);var x=k;function W(e,t,n,r,i,o){const a=(0,s.up)("MyNewVersionDialog");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(a,{modelValue:i.displayNewVersionDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.displayNewVersionDialog=e)},null,8,["modelValue"])])}n(7658);var I=n(2314),C={name:"init-element",components:{MyNewVersionDialog:I.Z},data(){return{displayNewVersionDialog:!1}},methods:{init(){this.fetch()},fetch(){this.$store.dispatch("init/fetch").then((e=>{let t=e.data;this.handleVO(t)}))},handleVO(e){this.checkSetup(e)||this.checkNewVersion(e)},checkSetup(e){let t=e.Setup,n=t.setup_required;return!!n&&(this.doSetup(),!0)},checkNewVersion(e){let t=e.CheckUpdate;this.$store.commit("checkupdate/handle_vo",t);let n=t.checkupdate.has_new_version,r=t.checkupdate.has_ignored;return!(!n||r)&&(this.doShowNewVersion(),!0)},doSetup(){this.$router.push("/init/setup-or-import")},doShowNewVersion(){this.displayNewVersionDialog=!0}},mounted(){this.init()}};const P=(0,g.Z)(C,[["render",W]]);var S=P;function D(e,t,n,r,i,o){const a=(0,s.up)("MyDrawer");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(a,{modelValue:i.displayDrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>i.displayDrawer=e)},null,8,["modelValue"])])}var T=n(9475),j={name:"open-with-listener",components:{MyDrawer:T.Z},computed:{revision(){return this.$store.getters["intent/revision"]},current(){return this.$store.getters["intent/current"]}},data(){return{displayDrawer:!1}},watch:{revision(){this.displayDrawer=!0}}};const F=(0,g.Z)(j,[["render",D]]);var O=F,U={name:"theApp",components:{MyLogViewer:_,MyWorkingStateViewer:x,MyInit:S,MyOpenWithListener:O},methods:{initTimer(){this.$store.dispatch("timer/init")},initDebugMode(){this.$store.dispatch("dev/fetch")}},mounted(){this.initTimer(),this.initDebugMode()}};const V=(0,g.Z)(U,[["render",l]]);var E=V,A=n(2483);function z(e,t,n,r,i,o){const a=(0,s.up)("MyClient");return(0,s.wg)(),(0,s.j4)(a)}var M=n(6799),$={name:"Home",components:{MyClient:M.Z}};const L=(0,g.Z)($,[["render",z]]);var G=L;const B=[{path:"/",name:"Home",component:G},{path:"/repositories",component:()=>n.e(851).then(n.bind(n,1851))},{path:"/repositories/:repository_id",component:()=>n.e(415).then(n.bind(n,6415))},{path:"/repositories/:repository_id/branches",component:()=>n.e(22).then(n.bind(n,8022))},{path:"/repositories/:repository_id/commits",component:()=>n.e(335).then(n.bind(n,335))},{path:"/repositories/:repository_id/commits/:commit_id",component:()=>n.e(335).then(n.bind(n,335))},{path:"/repositories/:repository_id/projects",component:()=>n.e(325).then(n.bind(n,4325))},{path:"/repositories/:repository_id/projects/:project_id",component:()=>n.e(325).then(n.bind(n,4325))},{path:"/repositories/:repository_id/remotes",component:()=>n.e(541).then(n.bind(n,6541))},{path:"/repositories/:repository_id/tags",component:()=>n.e(403).then(n.bind(n,6403))},{path:"/repositories/:repository_id/tags/:tag_id",component:()=>n.e(330).then(n.bind(n,7330))},{path:"/repositories/:repository_id/worktrees",component:()=>n.e(953).then(n.bind(n,2953))},{path:"/repositories/:repository_id/worktrees/:worktree_id",component:()=>n.e(953).then(n.bind(n,2953))},{path:"/remotes",component:()=>n.e(78).then(n.bind(n,8078))},{path:"/executables",component:()=>n.e(810).then(n.bind(n,6810))},{path:"/projects",component:()=>n.e(442).then(n.bind(n,2442))},{path:"/init/setup-or-import",component:()=>n.e(479).then(n.bind(n,5479))},{path:"/import-local-repo",component:()=>n.e(521).then(n.bind(n,9521))},{path:"/import-local-repository",component:()=>Promise.all([n.e(690),n.e(997)]).then(n.bind(n,2924))},{path:"/import-local-repositories",component:()=>Promise.all([n.e(690),n.e(434)]).then(n.bind(n,1028))},{path:"/settings",component:()=>Promise.all([n.e(155),n.e(760)]).then(n.bind(n,5237))},{path:"/settings/backups",component:()=>n.e(89).then(n.bind(n,5089))},{path:"/settings/dev",component:()=>n.e(359).then(n.bind(n,1359))},{path:"/settings/projects",component:()=>Promise.all([n.e(690),n.e(543)]).then(n.bind(n,5422))},{path:"/settings/plug-ins",component:()=>n.e(188).then(n.bind(n,4188))},{path:"/settings/repositories",component:()=>Promise.all([n.e(155),n.e(796)]).then(n.bind(n,2451))},{path:"/settings/remotes",component:()=>n.e(280).then(n.bind(n,9280))},{path:"/settings/executables",component:()=>Promise.all([n.e(690),n.e(866)]).then(n.bind(n,1393))},{path:"/settings/intents",component:()=>n.e(90).then(n.bind(n,6090))},{path:"/settings/intent-templates",component:()=>n.e(120).then(n.bind(n,2120))},{path:"/settings/images",component:()=>n.e(970).then(n.bind(n,1970))},{path:"/settings/media",component:()=>n.e(745).then(n.bind(n,5745))},{path:"/settings/content-types",component:()=>n.e(229).then(n.bind(n,1229))},{path:"/setup",component:()=>n.e(433).then(n.bind(n,3433))},{path:"/about",name:"About",component:()=>n.e(443).then(n.bind(n,3108))}];function R(e){for(var t in e){let n=e[t],r=n.name;null==r&&(n.name=n.path)}}R(B);const N=(0,A.p7)({history:(0,A.PO)("/"),routes:B});var Z=N,H=n(65);const K={root:!0},Y={items:[]},q={list(e){return e.items}},J={handle_vo(e,t){let n=t.backups;null!=n&&(e.items=n)}},Q={fetch(e){let t="GET",n="backups";return e.dispatch("rest/execute",{method:t,type:n},K).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))}};var X={name:"module_backup",namespaced:!0,state:Y,mutations:J,actions:Q,getters:q};const ee={root:!0};function te(e){return null==e&&(e={}),e}const ne={current:{},ignore:{},latest:{},has_new_version:!1,has_ignored:!1},re={current(e){return e.current},ignore(e){return e.ignore},latest(e){return e.latest},has_ignored(e){return e.has_ignored},has_new_version(e){return e.has_new_version}},ie={handle_vo(e,t){t=te(t);let n=te(t.checkupdate);e.current=te(n.current),e.latest=te(n.latest),e.ignore=te(n.ignore),e.has_ignored=n.has_ignored,e.has_new_version=n.has_new_version}},oe={check(e,t){let n="fetch",r="POST",i="about/checkupdate",o=t;return e.dispatch("rest/execute",{method:r,type:i,data:o,action:n},ee).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))},ignore(e,t){let n="POST",r="about/ignore",i=t;return e.dispatch("rest/execute",{method:n,type:r,data:i},ee).then((t=>{let n=t.data;e.commit("handle_vo",n)}))}};var ae={name:"module_check_update",namespaced:!0,state:ne,mutations:ie,actions:oe,getters:re};const se={root:!0},le=1,ue=2,de=3,ce={"":ue,debug:le,dev:le,"dev-windows":le,"dev-linux":le,preview:ue,release:de},pe={profiles:[le,ue,de],active:ue},me={debug(e){return e.active<=le},preview(e){return e.active<=ue},release(e){return e.active<=de}},he={handle_vo(e,t){let n=t.profile,r=ce[n];null==r&&(r=ue),e.active=r}},fe={fetch(e){let t="GET",n="about",r="debug-mode";return e.dispatch("rest/execute",{method:t,type:n,id:r},se).then((t=>{let n=t.data;return e.commit("handle_vo",n),Promise.resolve(t)}))}};var ge={name:"module_develop",namespaced:!0,state:pe,mutations:he,actions:fe,getters:me};function ve(){this.pkname="undef",this.srclist=[],this.dstlist=[]}function _e(e,t){this.state=e,this.rw=t}function ye(e,t){this.state=e,this.rw=t}function we(e){this.listname=e.listname,this.pk=e.pk,this.filterObject=null,this.filterText=""}ve.prototype={pk(e){return null!=e&&(this.pkname=e),this},src(e){return null!=e&&(this.srclist=e),this},dst(e){return null!=e&&(this.dstlist=e),this},makeSourceTable(e){let t={},n=e;for(var r in n){let e=n[r],i=this.getItemKey(e);t[i]=e}return t},getItemKey(e){let t=this.pkname;if(null==e||null==t)return"";let n=e[t];return null==n?"":n},updateItemValues(e,t){if(null!=e&&null!=t)for(var n in t){var r=t[n];null!=r&&(e[n]=r)}},update(){let e=this.srclist,t=this.dstlist,n=this.makeSourceTable(e);for(var r in t){let e=t[r],i=this.getItemKey(e),o=n[i];null!=o&&(this.updateItemValues(e,o),n[i]=null)}for(r in e){let i=e[r],o=this.getItemKey(i),a=n[o];null!=i&&null!=a&&t.push(i)}},remove(e){let t=this.srclist,n=this.dstlist;for(var r in t){let i=t[r],o=this.getItemKey(i);e!=o&&n.push(i)}}},_e.prototype={build(){let e=this.state,t=this.rw.listAll(e),n=[],r=this.rw.filterObject,i=this.rw.filterText;if(null==i||""==i||null==r)n=t;else for(var o in r.prepare(i),t){let e=t[o];r.accept(e)&&n.push(e)}e.filterResults=n}},ye.prototype={build(){let e=this.state,t=e.offset,n=e.limit,r=this.rw.listFilterResults(e),i=[],o=r.length,a=t+n;a>o&&(a=o);for(var s=t;s<a;s++){let e=r[s];i.push(e)}e.currentPageItems=i}},we.prototype={init(e){this.reset(e)},remove(e,t){if(null==e||null==t)return;let n=e.all,r=[],i=new ve;i.pk(this.pk).src(n).dst(r).remove(t),e.all=r,e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateOne(e,t){if(null==e||null==t)return;let n=[t],r=e.all,i=new ve;i.pk(this.pk).src(n).dst(r).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateList(e,t){if(null==e||null==t)return;let n=t,r=e.all,i=new ve;i.pk(this.pk).src(n).dst(r).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},updateVO(e,t){if(null==e||null==t)return;let n=this.listname,r=t[n],i=e.all,o=new ve;o.pk(this.pk).src(r).dst(i).update(),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},setPage(e,t){let n=t.limit,r=t.offset,i=t.current,o=t.index;if(null!=n?e.limit=n:n=e.limit,null!=r&&(e.offset=r),null!=i){let t=i-1;e.offset=t*n}null!=o&&(e.offset=o*n),e.wantRebuildCurrentPageItems=!0},setFilter(e,t){let n=t.text,r=t.filter;null!=n&&(this.filterText=n,e.filterText=n),null!=r&&(this.filterObject=r),e.wantRebuildCurrentPageItems=!0,e.wantRebuildFilterResults=!0},getFilterText(e){return e.filterText},listAll(e){return e.all},listFilterResults(e){if(e.wantRebuildFilterResults){e.wantRebuildFilterResults=!1;let t=new _e(e,this);t.build()}return e.filterResults},listCurrentPage(e){if(e.wantRebuildCurrentPageItems){e.wantRebuildCurrentPageItems=!1;let t=new ye(e,this);t.build()}return e.currentPageItems},listCurrentPageIds(e){let t=this.listCurrentPage(e),n=[],r=this.pk;for(var i in t){let e=t[i],o=e[r];n.push(o)}return n},stringifyCurrentPageIds(e){let t=this.listCurrentPageIds(e),n="";for(var r in t){let e=t[r];n+=e+"."}return n},currentPageNumber(e){return this.currentPageIndex(e)+1},currentPageIndex(e){let t=e.offset,n=e.limit;return n>.5&&t>0?Math.floor(t/n):0},offset(e){return e.offset},limit(e){return e.limit},total(e){let t=e.filterResults;return null==t&&(t=[]),t.length},reset(e,t){null==t&&(t={list:!0,page:!0,filter:!0}),t.list&&(e.all=[],e.filterResults=[],e.currentPageItems=[]),t.page&&(e.limit=10,e.offset=0),t.filter&&(e.filterText=""),e.wantRebuildFilterResults=!0,e.wantRebuildCurrentPageItems=!0}};var be={name:"state",createStateRW(e){return new we(e)}};const ke={root:!0};function xe(e){null==e&&(e=[]);const t=function(e){if(null==e)return 0;let t=e.open_with_priority;return null==t?0:t};e.sort(((e,n)=>{let r=t(e),i=t(n);return i-r}));let n=[];for(var r in e){let i=e[r],o=t(i);if(!(o>0))break;n.push(i)}return n}function We(){this.text=""}We.prototype={containString(e,t){if(null==e||null==t)return!1;e=this.normalizeText(e),t=this.normalizeText(t);let n=t.indexOf(e);return n>=0},normalizeText(e){return""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}};const Ie={executables:[],openWithList:[]},Ce=new We,Pe=be.createStateRW({pk:"id",listname:"executables"});Pe.init(Ie),Pe.setFilter(Ie,{filter:Ce}),Pe.setPage(Ie,{limit:10,offset:0});const Se={openWithList(e){return e.openWithList},all(e){return Pe.listAll(e)},currentPageItems(e){return Pe.listCurrentPage(e)},currentPage(e){return Pe.currentPageNumber(e)},pageSize(e){return Pe.limit(e)},afterFilter(e){return Pe.listFilterResults(e)},total(e){return Pe.total(e)}},De={removeFromState(e,t){Pe.remove(e,t)},reset(e){Pe.reset(e)},update(e,t){let n=t.vo,r=t.size,i=t.index,o=t.filter;null!=n&&Pe.updateVO(e,n),null==r&&null==i||Pe.setPage(e,{limit:r,index:i}),null!=o&&Pe.setFilter(e,{text:o});let a=Pe.listAll(e),s=xe(a);e.openWithList=s}},Te={init(e){e.dispatch("fetch")},fetch(e){let t="GET",n="executables",r={method:t,type:n};return e.dispatch("rest/execute",r,ke).then((t=>{let n=t.data;e.commit("reset",{vo:n}),e.commit("update",{vo:n})}))},insert(e,t){let n="POST",r="executables",i={executables:[t]},o={method:n,type:r,data:i};return e.dispatch("rest/execute",o,ke).then((()=>{e.dispatch("fetch")}))},update(e,t){let n="PUT",r="executables",i={executables:[t]},o=t.id,a={method:n,type:r,id:o,data:i};return e.dispatch("rest/execute",a,ke).then((()=>{e.dispatch("fetch")}))},prepareInsert(e,t){let n="POST",r="import-executables",i={executables:[t]},o={method:n,type:r,data:i};return e.dispatch("rest/execute",o,ke)},remove(e,t){let n="DELETE",r="executables",i={},o={method:n,type:r,id:t,data:i};return e.dispatch("rest/execute",o,ke).then((()=>{e.dispatch("fetch")}))}};var je={name:"module_executable",namespaced:!0,state:Ie,mutations:De,actions:Te,getters:Se},Fe=n(5268);const Oe={name:"name",bank:"bank",path:"path",baseurl:"base",items:"items",self:"self"};function Ue(e,t){let n=e[t];null==n&&(n={}),this.name=t,this.state=e,this.data=n}function Ve(){}function Ee(){return new Ve}Ue.prototype={_getValueByName(e,t){let n=this.data[e];return null==n&&(n=t),n},_copy_fields(e,t,n){if(null!=e&&null!=t)for(var r in e){let i=t[r],o=e[r];null!=n&&n(r,i,o),t[r]=o}},Init(e){let t=this.data,n=e;const r=(e,t,n)=>{null==t&&console.warn("StateBank.Init a bad field, name:["+e+"] v1:["+t+"] v2:["+n+"]")};this._copy_fields(n,t,r)},GetSelf(){return this._getValueByName(Oe.self,{})},GetItems(){return this._getValueByName(Oe.items,[])},GetPathString(){return this._getValueByName(Oe.path,"")},GetBaseURL(){return this._getValueByName(Oe.baseurl,"")},GetPathElements(){let e=this.GetPathString(),t=Fe.Z.ToElements(e);return Fe.Z.NormalizeElements(t)},UpdateVO(e){let t=e.self.exists;if(!t)return;let n=e,r=this.data;this._copy_fields(n,r)}},Ve.prototype={createBank(e){let t={};return t[Oe.name]=e,t[Oe.bank]=e,t[Oe.baseurl]="",t[Oe.path]="",t},InitWithBanks(e,t){for(var n in t){let r=t[n];e[r]=this.createBank(r)}},GetBank(e,t){return new Ue(e,t)}};var Ae={name:"file_browser",CreateStateRW:Ee};const ze={root:!0},Me=Ae.CreateStateRW(),$e={items:[]};Me.InitWithBanks($e,["dialog_open","dialog_save","default"]);const Le={GetSelf:e=>t=>Me.GetBank(e,t).GetSelf(),GetItems:e=>t=>Me.GetBank(e,t).GetItems(),GetPathString:e=>t=>Me.GetBank(e,t).GetPathString(),GetPathElements:e=>t=>Me.GetBank(e,t).GetPathElements()},Ge={init(e,t){let n=t.bank;Me.GetBank(e,n).Init(t)},handle_vo(e,t){let n=t.bank,r=t.vo;Me.GetBank(e,n).UpdateVO(r)}},Be={fetch(e,t){let n=t.bank,r=t.path,i=t.base,o=t.href,a=e.state,s=Me.GetBank(a,n);null==i&&(i=s.GetBaseURL()),null==r&&(r=s.GetPathString()),null!=o&&(r+="/"+o);let l="fetch",u="POST",d="file-query",c={path:r,base:i};return e.dispatch("rest/execute",{action:l,method:u,type:d,data:c},ze).then((t=>{let r=t.data;e.commit("handle_vo",{bank:n,vo:r})}))}};var Re={name:"module_file_browser",namespaced:!0,state:$e,mutations:Ge,actions:Be,getters:Le};const Ne={root:!0},Ze={items:[]},He={list(e){return e.items}},Ke={handle_items(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},Ye={fetch(e){let t="GET",n="intents",r=e.dispatch("rest/execute",{method:t,type:n},Ne);return r.then((t=>{let n=t.data;e.commit("handle_example",n)})),r}};var qe={name:"module_image",namespaced:!0,state:Ze,mutations:Ke,actions:Ye,getters:He};const Je={root:!0},Qe={items:[]},Xe={list(e){return e.items}},et={handle_fetch_resp_vo(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)},handle_post_resp_vo(e,t){null!=t&&(e.ok=!0)}},tt={fetch(e){let t="GET",n="init";return e.dispatch("rest/execute",{method:t,type:n},Je).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))},post(e){let t="POST",n="init";return e.dispatch("rest/execute",{method:t,type:n},Je).then((t=>{let n=t.data;return e.commit("handle_post_resp_vo",n),Promise.resolve(t)}))}};var nt={name:"module_init",namespaced:!0,state:Qe,mutations:et,actions:tt,getters:Xe};const rt={root:!0};let it=0;function ot(e){return!1}const at={intents:[],revision:0,current:{}},st={list(e){return e.intents},revision(e){return e.revision},current(e){return e.current}},lt={handle_intents(e,t){if(null==t)return;let n=t.intents;null!=n&&(e.intents=n)},setCurrent(e,t){let n=++it;t.revision=n,e.current=t,e.revision=n}},ut={fetch(e){let t="GET",n="intents",r=e.dispatch("rest/execute",{method:t,type:n},rt);return r.then((t=>{let n=t.data;e.commit("handle_intents",n)})),r},run(e,t){let n="POST",r="intents",i=t,o=e.dispatch("rest/execute",{method:n,type:r,data:i},rt);return o.then((t=>{let n=t.data;e.commit("handle_intents",n)})),o},start(e,t){let n=t.intents[0];return ot(n)?e.dispatch("run",t):(e.commit("setCurrent",n),Promise.resolve(t))}};var dt={name:"module_intent",namespaced:!0,state:at,mutations:lt,actions:ut,getters:st};const ct={root:!0};function pt(){}pt.prototype={prepare(e){pt.text=e},accept(e){let t=""+pt.text,n=""+this.makeSearchText(e),r=n.indexOf(t.trim().toLowerCase());return r>=0},makeSearchText(e){let t="",n=[e.name,e.group,e.title];for(var r in n){let e=n[r];null!=e&&(t+=e+"\n")}return t.toLowerCase()}};const mt={templates:[],macro_properties:[]},ht=new pt,ft=be.createStateRW({pk:"id",listname:"intent_templates"});ft.init(mt),ft.setFilter(mt,{text:"",filter:ht}),ft.setPage(mt,{limit:10,offset:0});const gt={all(e){return ft.listAll(e)},list(e){return ft.listCurrentPage(e)},macro_properties(e){return e.macro_properties},current_page(e){return ft.currentPageNumber(e)},page_size(e){return ft.limit(e)},total(e){return ft.total(e)},filter(e){return ft.getFilterText(e)}},vt={handle_fetch_resp_vo(e,t){ft.updateVO(e,t)},handle_insert_resp_vo(e,t){ft.updateVO(e,t)},handle_update_resp_vo(e,t){ft.updateVO(e,t)},handle_remove_id(e,t){ft.remove(e,t)},update_macro_properties_with_vo(e,t){let n=t.macro_properties,r=[];for(var i in n){let e=n[i],t={};t.id=i,t.name=i,t.label=i,t.description=e,r.push(t)}r.sort(((e,t)=>{let n=e.name+"",r=t.name+"";return n.localeCompare(r)})),e.macro_properties=r},update(e,t){let n=t.vo,r=t.size,i=t.index,o=t.filter;null!=n&&ft.updateVO(e,n),null==r&&null==i||ft.setPage(e,{limit:r,index:i}),null!=o&&ft.setFilter(e,{text:o})}},_t={fetch(e){let t="GET",n="intent-templates";return e.dispatch("rest/execute",{method:t,type:n},ct).then((t=>{let n=t.data;return e.commit("handle_fetch_resp_vo",n),Promise.resolve(t)}))},insert(e,t){let n=t.item,r="POST",i="intent-templates",o={intent_templates:[n]};return e.dispatch("rest/execute",{method:r,type:i,data:o},ct).then((t=>{let n=t.data;return e.commit("handle_insert_resp_vo",n),Promise.resolve(t)}))},update(e,t){let n=t.item,r=n.id,i="PUT",o="intent-templates",a={intent_templates:[n]};if(null!=r&&!(r<1))return e.dispatch("rest/execute",{method:i,type:o,id:r,data:a},ct).then((t=>{let n=t.data;return e.commit("handle_update_resp_vo",n),Promise.resolve(t)}))},remove(e,t){let n=t.item,r=t.id;if(null==r&&(r=n.id),null==r)return Promise.reject("no param: id | item");let i="DELETE",o="intent-templates";return r<1?void 0:e.dispatch("rest/execute",{method:i,type:o,id:r},ct).then((t=>(e.commit("handle_remove_id",r),Promise.resolve(t))))},import_preset_templates(e){let t="POST",n="intent-templates/import-preset",r={};return e.dispatch("rest/execute",{method:t,type:n,data:r},ct).then((e=>Promise.resolve(e)))},fetch_macro_props(e){let t="GET",n="intent-templates",r="macro/properties";return e.dispatch("rest/execute",{method:t,type:n,id:r},ct).then((t=>{let n=t.data;return e.commit("update_macro_properties_with_vo",n),Promise.resolve(t)}))}};var yt={name:"module_intent_template",namespaced:!0,state:mt,mutations:vt,actions:_t,getters:gt};const wt={root:!0},bt={items:[]},kt={list(e){return e.items}},xt={handle_items(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},Wt={fetch(e){let t="GET",n="intents",r=e.dispatch("rest/execute",{method:t,type:n},wt);return r.then((t=>{let n=t.data;e.commit("handle_example",n)})),r}};var It={name:"module_example",namespaced:!0,state:bt,mutations:xt,actions:Wt,getters:kt};const Ct={root:!0};function Pt(e,t){this.action=e,this.params=t,this.result=null,this.loading=!1}function St(){this.cache={}}Pt.prototype={loaded(){let e=this.result;return null!=e},cached(){let e=this.result;return Promise.resolve(e)},load(e){if(this.loading){let e={};return Promise.resolve(e)}this.loading=!0;let t=this.action,n=this.params,r=this;return e.dispatch(t,n,Ct).then((e=>(r.handle(e),Promise.resolve(e))))},handle(e){this.result=e}},St.prototype={get(e,t){let n=this.cache[e];return null==n&&(n=new Pt(e,t),this.cache[e]=n),n}};const Dt=new St,Tt={},jt={},Ft={},Ot={load_executables(e){let t=Dt.get("executable/fetch",{});return t.loaded()?t.cached():t.load(e)},load_mediae(e){let t=Dt.get("media/fetch",{});return t.loaded()?t.cached():t.load(e)}};var Ut={name:"module_lazy",namespaced:!0,state:Tt,mutations:Ft,actions:Ot,getters:jt};const Vt="debug";function Et(e){this.state=e}Et.prototype={makeDefaultItem(){let e=this.now(),t=this.nextID();return{id:t,level:Vt,type:"default",action:"",message:"",time:e,read:!1,display:!0,source:"",duration:0}},normalizeItem(e){null==e&&(e={}),e.id=null,e.time=null,e.read=!1;let t=this.makeDefaultItem();for(var n in t)null==e[n]&&(e[n]=t[n]);return e},nextID(){let e=this.state.revision+1;return this.state.revision=e,e},now(){let e=new Date;return e.getTime()},clean(){let e=this.state;e.logs=this.cleanList(e.logs,(e=>!e.read)),e.todo=this.cleanList(e.todo,(e=>!e.read))},cleanList(e,t){let n=[];if(null==e)return n;for(var r in e){let i=e[r];t(i)&&n.push(i)}return n}};const At={logs:[],todo:[],revision:0},zt={push(e,t){let n=new Et(e);t=n.normalizeItem(t),e.logs.push(t),e.todo.push(t)},clean(e){let t=new Et(e);t.clean()}},Mt={},$t={logs(e){return e.logs},todo(e){return e.todo},revision(e){return e.revision}};var Lt={name:"module_log",namespaced:!0,state:At,mutations:zt,actions:Mt,getters:$t};const Gt={root:!0};function Bt(e){if(null==e)return!1;let t=e.all;return null!=t&&(1==t||1==t)}function Rt(){}Rt.prototype={};const Nt={},Zt=new Rt,Ht=be.createStateRW({pk:"id",listname:"mediae"});Ht.init(Nt),Ht.setFilter(Nt,{text:"",filter:Zt}),Ht.setPage(Nt,{limit:10,offset:0});const Kt={list(e){return Ht.listCurrentPage(e)},total(e){return Ht.total(e)}},Yt={handle_vo(e,t){Ht.updateVO(e,t)},reset(e,t){Ht.reset(e,t)},remove_id(e,t){Ht.remove(e,t)},update(e,t){if(null==t)return;let n=t.vo,r=t.size,i=t.index,o=t.filter;null==r&&null==i||Ht.setPage(e,{limit:r,index:i}),null!=o&&Ht.setFilter(e,{text:o}),null!=n&&Ht.updateVO(e,n)}},qt={fetch(e,t){let n=Bt(t),r="GET",i="media";return e.dispatch("rest/execute",{method:r,type:i,params:t},Gt).then((t=>{let r=t.data;n&&e.commit("reset",{list:!0}),e.commit("handle_vo",r)}))},insert(e,t){let n=t.item,r="POST",i="media",o={mediae:[n]};return null==n?Promise.reject("no media item"):e.dispatch("rest/execute",{method:r,type:i,data:o},Gt).then((t=>{let n=t.data;e.commit("handle_vo",n)}))},import_presets(e){let t="POST",n="media",r="import-presets",i={};return e.dispatch("rest/execute",{method:t,type:n,id:r,data:i},Gt).then((e=>Promise.resolve(e)))},remove(e,t){let n=t.id,r=t.item;null==n&&null!=r&&(n=r.id);let i="DELETE",o="media";return e.dispatch("rest/execute",{method:i,type:o,id:n},Gt).then((t=>(e.commit("remove_id",n),Promise.resolve(t))))}};var Jt={name:"module_media",namespaced:!0,state:Nt,mutations:Yt,actions:qt,getters:Kt};const Qt={root:!0};function Xt(){this.text=""}function en(e,t){null==t&&(t={}),this.context=e,this.ids=t.ids}function tn(e){let t=e.state,n=on.listCurrentPage(t),r=[];for(var i in n){let e=n[i].id;r.push(e)}return r}Xt.prototype={containString(e,t){if(null==e||null==t)return!1;e=this.normalizeText(e),t=this.normalizeText(t);let n=t.indexOf(e);return n>=0},normalizeText(e){return""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}},en.prototype={prepareFetchByIds(e){let t={};return t.ids=this.makeIDs(e),t},makeIDs(e){if(null==e)return null;let t=0,n="";for(var r in e){let i=e[r];n+=i+".",t++}return t<1?null:n}};const nn={projects:[]},rn=new Xt,on=be.createStateRW({pk:"id",listname:"projects"});on.init(nn),on.setFilter(nn,{text:"",filter:rn}),on.setPage(nn,{limit:10,offset:0});const an={listAll(e){return on.listAll(e)},listAfterFilter(e){return on.listFilterResults(e)},listCurrentPage(e){return on.listCurrentPage(e)},filterText(e){return on.getFilterText(e)},currentPage(e){return on.currentPageNumber(e)},pageSize(e){return on.limit(e)},total(e){return on.total(e)},listCurrentPageIds(e){return on.listCurrentPageIds(e)},stringifyCurrentPageIds(e){return on.stringifyCurrentPageIds(e)}},sn={handle_fetch_all(e,t){on.reset(e),on.updateVO(e,t)},handle_fetch_by_ids(e,t){on.updateVO(e,t)},update_items(e,t){on.updateVO(e,t)},remove_item(e,t){on.remove(e,t.id)},setFilter(e,t){on.setFilter(e,t)},update(e,t){let n=t.vo,r=t.size,i=t.index,o=t.filter;null!=n&&on.updateVO(e,n),null==r&&null==i||on.setPage(e,{limit:r,index:i}),null!=o&&on.setFilter(e,{text:o})},reset(e){on.reset(e)}},ln={fetch(e,t){return e.dispatch("fetchAll",t)},fetchAll(e){let t="GET",n="projects",r={all:1},i={method:t,type:n,params:r};return e.dispatch("rest/execute",i,Qt).then((t=>{let n=t.data;return e.commit("reset"),e.commit("update",{vo:n}),e.dispatch("fetchByIds",{}),Promise.resolve(t)}))},fetchByIds(e,{ids:t}){null==t&&(t=tn(e));let n=new en(e),r=n.prepareFetchByIds(t);r["with-file-state"]=1;let i="GET",o="projects",a={method:i,type:o,params:r};return e.dispatch("rest/execute",a,Qt).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},insert(e,t){let n=t.item,r="POST",i="projects",o={projects:[n]},a={method:r,type:i,data:o};return e.dispatch("rest/execute",a,Qt).then((t=>{let n=t.data;return e.commit("update_items",n),Promise.resolve(t)}))},update(e,t){let n=t.item,r="PUT",i="projects",o=n.id,a={projects:[n]},s={method:r,type:i,id:o,data:a};return e.dispatch("rest/execute",s,Qt).then((t=>{let n=t.data;return e.commit("update_items",n),Promise.resolve(t)}))},remove(e,t){let n="DELETE",i="projects",o=t.id,a={method:n,type:i,id:o};return e.dispatch("rest/execute",a,Qt).then((()=>(e.commit("remove_item",t),Promise.resolve(r))))}};var un={name:"module_project",namespaced:!0,state:nn,mutations:sn,actions:ln,getters:an};const dn={root:!0},cn="software-sets";function pn(){}function mn(){}pn.prototype={},mn.prototype={compare(e,t){let n=""+e.name,r=""+t.name;return this.computeState(e),this.computeState(t),n.localeCompare(r)},computeState(e){let t=e.state;if(null!=t)return;let n=e.has_new_version,r=e.installed;t=r?n?"HAS_NEW_VER":"INSTALLED":"AVAILABLE",e.state=t}};const hn={items:[]},fn=new pn,gn=be.createStateRW({pk:"id",listname:"sets"});gn.init(hn),gn.setFilter(hn,{filter:fn}),gn.setPage(hn,{limit:10,offset:0});const vn={list(e){return gn.listCurrentPage(e)},all(e){return gn.listAll(e)},total(e){return gn.total(e)},current_page(e){return gn.currentPageNumber(e)},page_size(e){return gn.limit(e)}},_n={handle_fetch_resp_vo(e,t){let n=t.sets,r=new mn;n.sort(((e,t)=>r.compare(e,t))),t.sets=n,gn.updateVO(e,t)},update(e,t){let n=t.vo,r=t.size,i=t.index,o=t.filter;null!=n&&gn.updateVO(e,n),null==r&&null==i||gn.setPage(e,{limit:r,index:i}),null!=o&&gn.setFilter(e,{text:o})}},yn={fetch(e){let t="GET",n=cn;return e.dispatch("rest/execute",{method:t,type:n},dn).then((t=>{let n=t.data;e.commit("handle_fetch_resp_vo",n)}))}};var wn={name:"module_plugin_set",namespaced:!0,state:hn,mutations:_n,actions:yn,getters:vn};const bn={root:!0},kn="packages",xn={items:[]},Wn={list(e){return e.items}},In={handle_fetch_resp_vo(e,t){if(null==t)return;let n=t.items;null!=n&&(e.items=n)}},Cn={fetch(e){let t="GET",n=kn;return e.dispatch("rest/execute",{method:t,type:n},bn).then((t=>{let n=t.data;e.commit("handle_fetch_resp_vo",n)}))},update_sources(e){let t="POST",n=kn,r="update",i={};return e.dispatch("rest/execute",{method:t,type:n,id:r,data:i},bn).then((t=>{let n=t.data;e.commit("handle_update_resp_vo",n)}))}};var Pn={name:"module_plugin_pack",namespaced:!0,state:xn,mutations:In,actions:Cn,getters:Wn},Sn=n(9327);const Dn={root:!0};function Tn(){}function jn(e,t){let n=[],r=Sn.Z.Get(e,"content_types",[]);for(var i in r){let e=r[i];t(e)&&n.push(e)}return n}Tn.prototype={};const Fn={file_type_list:[],project_type_list:[]},On=new Tn,Un=be.createStateRW({pk:"id",listname:"content_types"});Un.init(Fn),Un.setFilter(Fn,{text:"",filter:On}),Un.setPage(Fn,{limit:10,offset:0});const Vn={list(e){return e.items},file_type_list(e){return e.file_type_list},project_type_list(e){return e.project_type_list},all(e){return Un.listAll(e)}},En={handle_vo(e,t){Un.reset(e),Un.updateVO(e,t),e.file_type_list=jn(t,(e=>0==e.as_project)),e.project_type_list=jn(t,(e=>1==e.as_project))},remove_item(e,t){Un.remove(e,t.id)}},An={fetch(e){let t="GET",n="content-types";return e.dispatch("rest/execute",{method:t,type:n},Dn).then((t=>{let n=t.data;e.commit("handle_vo",n)}))},insert(e,{item:t}){let n="POST",r="content-types",i={content_types:[t]};return e.dispatch("rest/execute",{method:n,type:r,data:i},Dn).then((()=>{e.dispatch("fetch")}))},update(e,{item:t}){let n="PUT",r="content-types",i=t.id,o={content_types:[t]};return e.dispatch("rest/execute",{method:n,type:r,id:i,data:o},Dn).then((()=>{e.dispatch("fetch")}))},remove(e,t){let n="DELETE",r="content-types",i=t.id;return e.dispatch("rest/execute",{method:n,type:r,id:i},Dn).then((()=>{e.commit("remove_item",t)}))}};var zn={name:"module_project_type",namespaced:!0,state:Fn,mutations:En,actions:An,getters:Vn},Mn=n(4161);const $n={root:!0};function Ln(){}function Gn(e){this.context=e,this.workCount=0,this.method="",this.action="fetch"}function Bn(e){this.context=e,this.action=""}Mn.Z.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),Mn.Z.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Gn.prototype={updateWorkCount(e){let t=this.workCount,n=t+e;(0==t&&1==n||1==t&&0==n)&&this.context.commit("updateWorking",e),this.workCount=n},forAxios(){let e={};return this.forAxiosField(e,"method"),this.forAxiosField(e,"params"),this.forAxiosField(e,"data"),this.forAxiosField(e,"url"),this.method=e.method,this.updateWorkCount(1),e},forAxiosField(e,t){let n=this[t];null!=n&&(e[t]=n)},resolve(e){this.updateWorkCount(-1);let t=this.isGetMethod(),n=(e.data,{message:"操作成功"});n.display=!t,n.action=this.action,n.level="info",n.type="success",n.duration=3e3,n.source="axios",this.context.commit("log/push",n,$n)},reject(e){Ln(e),this.updateWorkCount(-1);let t=e.response.data,n=t.error;null==n&&(n=e.message);let r={};r.message=n,r.display=!0,r.action=this.action,r.level="error",r.type="error",r.duration=0,r.source="axios",this.context.commit("log/push",r,$n)},isGetMethod(){let e=this.action,t=this.method;return null==e&&(e=""),null!=t&&""!=t||(t="GET"),t=t.trim().toUpperCase(),e=e.trim().toUpperCase(),"GET"==t||"FETCH"==e}},Bn.prototype={init(e){this.action=e.action,this.method=e.method,this.url=e.url,this.params=e.params,this.data=e.data,this.type=e.type,this.id=e.id},create(){let e=new Gn(this.context);return e.action=this.makeAction(),e.method=this.makeMethod(),e.url=this.makeURL(),null!=this.params&&(e.params=this.params),null!=this.data&&(e.data=this.data),e},makeAction(){let e=this.action;if(null==e||""==e){let t=this.makeMethod();const n={GET:"fetch",POST:"insert",PUT:"update",DELETE:"remove"};e=n[t]}return null!=e&&""!=e||(e="fetch"),e.toLowerCase()},makeMethod(){let e=this.method;return null==e&&(e="GET"),e.toUpperCase()},makeURL(){let e=this.url,t=this.type,n=this.id;return null==e&&(e=this.getBaseRestURL()+t,null!=n&&(e+="/"+n)),e},getBaseRestURL(){return"/api/v1/"}};const Rn={working:!1,workCount:0},Nn={working(e){return e.working}},Zn={updateWorking(e,t){let n=e.workCount;t<0?n--:t>0&&n++,e.working=n>0,e.workCount=n}},Hn={execute(e,t){let n=new Bn(e);n.init(t);let r=n.create();return(0,Mn.Z)(r.forAxios()).then((e=>(r.resolve(e),Promise.resolve(e)))).catch((e=>(r.reject(e),Promise.reject(e))))}};var Kn={name:"module_rest",namespaced:!0,state:Rn,mutations:Zn,actions:Hn,getters:Nn};const Yn={root:!0},qn={repositories:[]},Jn={list(e){return e.repositories}},Qn={handle_repositories(e,t){if(null==t)return;let n=t.repositories;null!=n&&(e.repositories=n)}},Xn={fetch(e){let t="GET",n="repositories",r=e.dispatch("rest/execute",{method:t,type:n},Yn);return r.then((t=>{let n=t.data;e.commit("handle_repositories",n)})),r}};var er={name:"module_repository",namespaced:!0,state:qn,mutations:Qn,actions:Xn,getters:Jn};const tr={root:!0};function nr(){}const rr={want:{},have:{}},ir={info(e){return e.have}},or={handle_vo(e,t){if(null==t)return;let n=t.local_repositories;if(null==n)return;let r=n[0];null!=r&&(e.have=r)}},ar={fetch(e,t){nr(t),null==t&&(t={});let n=t.id,r=e.state;null==n&&(n=r.want.id);let i="GET",o="local-repositories";return r.want.id=n,e.dispatch("rest/execute",{method:i,type:o,id:n},tr).then((t=>{let n=t.data;e.commit("handle_vo",n)}))}};var sr={name:"module_current_repository",namespaced:!0,state:rr,mutations:or,actions:ar,getters:ir};const lr={root:!0};function ur(){}const dr={repositories:[]},cr=be.createStateRW({listname:"local_repositories",pk:"path"});cr.init(dr),cr.setPage(dr,{limit:999,offset:0});const pr={list(e){return cr.listAll(e)}},mr={handle_search_result(e,t){cr.updateVO(e,t)},handle_result_repositories(e,t){cr.updateVO(e,t)},reset(e){cr.reset(e)}},hr={search(e,t){let n=t.path,r="POST",i="import-repositories",o={action:"find",local_repositories:[{path:n}]};return e.commit("reset"),e.dispatch("rest/execute",{method:r,type:i,data:o},lr).then((t=>{let n=t.data;e.commit("handle_search_result",n)}))},locate(e,t){let n=t.path,r="POST",i="import-repositories",o={action:"locate",local_repositories:[{path:n}]};return e.commit("reset"),e.dispatch("rest/execute",{method:r,type:i,data:o},lr).then((t=>{let n=t.data;e.commit("handle_search_result",n)}))},save(e,{items:t}){ur(t);let n="POST",r="import-repositories",i={action:"save",local_repositories:t},o=e.dispatch("rest/execute",{method:n,type:r,data:i},lr);return o.then((t=>{let n=t.data;e.commit("handle_result_repositories",n)})),o}};var fr={name:"module_import_local_repository",namespaced:!0,state:dr,mutations:mr,actions:hr,getters:pr};const gr={root:!0},vr={all:[],pageSize:16,pageIndex:0,currentPageItems:[],repositories:[]},_r={all(e){return e.all},list(e){return e.repositories}},yr={handle_repositories(e,t){if(null==t)return;let n=t.repositories;null!=n&&(e.repositories=n)}},wr={fetch(e){let t="GET",n="remote-repositories",r=e.dispatch("rest/execute",{method:t,type:n},gr);return r.then((t=>{let n=t.data;e.commit("handle_repositories",n)})),r}};var br={name:"module_remote_repository",namespaced:!0,state:vr,mutations:yr,actions:wr,getters:_r};const kr={root:!0};function xr(){}const Wr={all:[]},Ir={all(e){return e.all}},Cr={update(e,t){xr(e,t)}},Pr={fetch(e,t){xr(e,t,kr)},update(e,t){xr(e,t)},remove(e,t){xr(e,t)}};var Sr={name:"module_repository_detail",namespaced:!0,state:Wr,mutations:Cr,actions:Pr,getters:Ir};const Dr={root:!0};function Tr(){this.text=""}function jr(e,t){null==t&&(t={}),this.context=e,this.ids=t.ids}function Fr(e){let t=e.state,n=Vr.listCurrentPage(t),r=[];for(var i in n){let e=n[i].id;r.push(e)}return r}Tr.prototype={containString(e,t){if(null==e||null==t)return!1;t=this.normalizeText(t),e=this.normalizeText(e);let n=t.indexOf(e);return n>=0},normalizeText(e){return null==e||""==e?"":e.trim().toLowerCase()},prepare(e){this.text=e},accept(e){let t=this.text;return!!this.containString(t,e.name)||(!!this.containString(t,e.title)||!!this.containString(t,e.description))}},jr.prototype={prepareFetchByIds(e){let t={};return t.ids=this.makeIDs(e),t},makeIDs(e){if(null==e)return null;let t=0,n="";for(var r in e){let i=e[r];n+=i+".",t++}return t<1?null:n}};const Or={},Ur=new Tr,Vr=be.createStateRW({pk:"id",listname:"local_repositories"});Vr.init(Or),Vr.setFilter(Or,{text:"",filter:Ur}),Vr.setPage(Or,{limit:10,offset:0});const Er={all(e){return Vr.listAll(e)},currentPageItems(e){return Vr.listCurrentPage(e)},currentPage(e){return Vr.currentPageNumber(e)},pageSize(e){return Vr.limit(e)},total(e){return Vr.total(e)}},Ar={update(e,t){let n=t.size,r=t.index,i=t.filter,o=t.vo;null==n&&null==r||Vr.setPage(e,{limit:n,index:r}),null!=i&&Vr.setFilter(e,{text:i}),null!=o&&Vr.updateVO(e,o)},reset(e){Vr.reset(e)}},zr={fetch(e){return e.dispatch("fetchAll")},fetchAll(e){let t="GET",n="local-repositories",r={all:1},i={method:t,type:n,params:r};return e.dispatch("rest/execute",i,Dr).then((t=>{let n=t.data;return e.commit("reset"),e.commit("update",{vo:n}),e.dispatch("fetchByIds",{}),Promise.resolve(t)}))},fetchByIds(e,{ids:t}){null==t&&(t=Fr(e));let n=new jr(e),r=n.prepareFetchByIds(t);r["with-file-state"]=1,r["with-projects"]=1;let i="GET",o="local-repositories",a={method:i,type:o,params:r};return e.dispatch("rest/execute",a,Dr).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},fetchById(e,{id:t}){if(null==t)return Promise.reject("no param: id");let n={"with-file-state":1,"with-submodules":1,"with-worktrees":1,"with-projects":1},r="GET",i="local-repositories",o={method:r,type:i,id:t,params:n};return e.dispatch("rest/execute",o,Dr).then((t=>{let n=t.data;return e.commit("update",{vo:n}),Promise.resolve(t)}))},update(e,t){let n="PUT",r="local-repositories",i=t.id,o={local_repositories:[t]},a={method:n,type:r,id:i,data:o};return e.dispatch("rest/execute",a,Dr).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))},remove(e,t){let n="DELETE",r="local-repositories",i=t.id,o={method:n,type:r,id:i};return e.dispatch("rest/execute",o,Dr).then((t=>(e.dispatch("fetch"),Promise.resolve(t))))}};var Mr={name:"module_local_repository",namespaced:!0,state:Or,mutations:Ar,actions:zr,getters:Er};const $r={root:!0};function Lr(e,t,n){for(var r in e){let n=e[r],i=n.id;t[i]=n}for(var r in n){let e=n[r],i=e.id,o=t[i];null!=o&&null!=e&&(e.state=o.state,e.error=o.error)}}const Gr={items:[]},Br={items(e){return e.items}},Rr={handle_fetch_vo(e,t){e.items=t.setup_items},handle_apply_vo(e,t){let n=t.setup_items,r=e.items,i={};Lr(n,i,r)}},Nr={fetch(e){let t="GET",n="setup";return e.dispatch("rest/execute",{method:t,type:n},$r).then((t=>{let n=t.data;return e.commit("handle_fetch_vo",n),Promise.resolve(t)}))},apply(e,t){let n="POST",r="setup",i=t.data;return e.dispatch("rest/execute",{method:n,type:r,data:i},$r).then((t=>{let n=t.data;return e.commit("handle_apply_vo",n),Promise.resolve(t)}))},skipall(e){let t="POST",n="setup/skip-all",r={};return e.dispatch("rest/execute",{method:t,type:n,data:r},$r).then((e=>Promise.resolve(e)))}};var Zr={name:"module_setup",namespaced:!0,state:Gr,mutations:Rr,actions:Nr,getters:Br};function Hr(e,t,n){this.storage=e,this.name=t,this.defaultValue=n}Hr.prototype={get(){let e=this.storage[this.name];return null==e&&(e=this.defaultValue),e},set(e){if(null!=e)return this.storage[this.name]=e,e}};let Kr=window.localStorage,Yr=window.sessionStorage;const qr=new Hr(Yr,"jwt",""),Jr=new Hr(Yr,"desktop_session_id",""),Qr=new Hr(Kr,"example",0),Xr={},ei={jwt(){return qr.get()},dsid(){return Jr.get()}},ti={example(e,t){e.example=Qr.set(t)},jwt(e,t){e.jwt=qr.set(t)},dsid(e,t){e.sgid=Jr.set(t)}},ni={};var ri={name:"module_web_storage",namespaced:!0,state:Xr,mutations:ti,actions:ni,getters:ei};function ii(e){this.context=e,this.count=0}ii.started=!1,ii.prototype={hasStarted(){return ii.started},start(){this.hasStarted()||(ii.started=!0,this.setupForNextEvent())},setupForNextEvent(){setTimeout((()=>{this.onTimer()}),1e3)},onTimer(){this.count++;let e=this.count;this.context.commit("update1hz",e),this.setupForNextEvent()}};const oi={count1hz:0},ai={timer1hz(e){return e.count1hz}},si={update1hz(e,t){null!=t&&(e.count1hz=t)}},li={init(e){let t=new ii(e);t.hasStarted()||t.start()}};var ui={name:"module_timer",namespaced:!0,state:oi,mutations:si,actions:li,getters:ai},di=(0,H.MT)({state:{},mutations:{},actions:{},modules:{backup:X,checkupdate:ae,dev:ge,executable:je,files:Re,current_repository:sr,import_repository:fr,init:nt,intent:dt,intent_template:yt,image:qe,jwt:It,lazy:Ut,log:Lt,media:Jt,project:un,soft_pack:Pn,soft_set:wn,content_type:zn,rest:Kn,repository:er,local_repository:Mr,remote_repository:br,repository_detail:Sr,setup:Zr,storage:ri,timer:ui}}),ci=n(4870),pi=n(2748);const mi={name:"AdminNavMenu",computed:{theDevDebug(){return this.$store.getters["dev/debug"]},isCollapse(){return!1},currentActive(){let e=this.$route.path;return e}},methods:{handleOpen(){},handleClose(){}}};var hi=Object.assign(mi,{setup(e){return(e,t)=>{const n=(0,s.up)("el-icon"),r=(0,s.up)("el-menu-item"),o=(0,s.up)("el-menu");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{"default-active":e.currentActive,class:"el-menu-vertical-demo",collapse:e.isCollapse,router:"",onOpen:e.handleOpen,onClose:e.handleClose},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{index:"/settings"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 设置 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1},512),[[i.F8,e.theDevDebug]]),(0,s.Wm)(r,{index:"/settings/repositories"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 本地仓库 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.wy)((0,s.Wm)(r,{index:"/settings/remotes"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 远程仓库 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1},512),[[i.F8,e.theDevDebug]]),(0,s.Wm)(r,{index:"/settings/projects"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 工程项目 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/settings/content-types"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 内容类型 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/settings/executables"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 应用程序 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.wy)((0,s.Wm)(r,{index:"/settings/images"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 图像 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1},512),[[i.F8,e.theDevDebug]]),(0,s.Wm)(r,{index:"/settings/media"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 媒体文件 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/settings/intent-templates"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 命令模板 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/settings/plug-ins"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 插件 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/settings/backups"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 数据导入/导出 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1}),(0,s.Wm)(r,{index:"/about"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 关于")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.cEj))])),_:1})])),_:1}),(0,s.wy)((0,s.Wm)(r,{index:"/settings/dev"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 开发者模式 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.BBB))])),_:1})])),_:1},512),[[i.F8,e.theDevDebug]]),(0,s.wy)((0,s.Wm)(r,{index:"/"},{title:(0,s.w5)((()=>[(0,s.Uk)(" 退出设置 ")])),default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.BBB))])),_:1})])),_:1},512),[[i.F8,e.theDevDebug]])])),_:1},8,["default-active","collapse","onOpen","onClose"])])}}});const fi=hi;var gi=fi;const vi={class:"common-layout"},_i={class:"admin-frame-aside-head"},yi={name:"AdminFrame",components:{AdminNavMenu:gi},data(){const e={a:1,home:!0,nav:!0};return{config:e}},methods:{handleClickBack(){this.$router.push("/")}}};var wi=Object.assign(yi,{setup(e){return(e,t)=>{const n=(0,s.up)("el-icon"),r=(0,s.up)("el-button"),i=(0,s.up)("el-aside"),o=(0,s.up)("el-main"),a=(0,s.up)("el-container");return(0,s.wg)(),(0,s.iD)("div",vi,[(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"admin-frame-aside-box",width:"200px"},{default:(0,s.w5)((()=>[(0,s._)("div",_i,[(0,s.Wm)(r,{class:"btn-back",type:"default",onClick:e.handleClickBack},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.nt8))])),_:1}),(0,s.Uk)(" 返回 ")])),_:1},8,["onClick"])]),(0,s._)("div",null,[(0,s.Wm)(gi)])])),_:1}),(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3})])),_:3})])}}});const bi=(0,g.Z)(wi,[["__scopeId","data-v-7134b5af"]]);var ki=bi;const xi={class:"top-bar"};function Wi(e,t,n,r,i,o){const a=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",xi,[(0,s.Wm)(a,{type:"primary",link:"",onClick:o.handleGoHome},{default:(0,s.w5)((()=>[(0,s.Uk)(" 回首页")])),_:1},8,["onClick"])]),(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var Ii={name:"SimpleFrame",methods:{handleGoHome(){this.$router.push("/")}}};const Ci=(0,g.Z)(Ii,[["render",Wi],["__scopeId","data-v-55b39458"]]);var Pi=Ci;function Si(e,t,n,r,o,a){const l=(0,s.up)("MyHeader"),u=(0,s.up)("MySearchBox"),d=(0,s.up)("MyPager"),c=(0,s.up)("MyFooter"),p=(0,s.up)("MyDebug");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{config:a.theConfig,onAction:a.handleAction},null,8,["config","onAction"]),(0,s.wy)((0,s.Wm)(u,{config:a.theConfig,onAction:a.handleAction},null,8,["config","onAction"]),[[i.F8,a.theDisplaySearch]]),(0,s.WI)(e.$slots,"default"),(0,s.wy)((0,s.Wm)(d,null,null,512),[[i.F8,a.theDisplayPager]]),(0,s.Wm)(c),(0,s.wy)((0,s.Wm)(p,null,null,512),[[i.F8,a.theDisplayDebug]])])}const Di={title:"Session Group Status"};function Ti(e,t,n,r,i,o){const a=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",Di,[(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" S ")])),_:1})])}var ji={name:"session-group-status",methods:{checkQuery(){let e=this.$route.query["dsid"];null!=e&&(console.log("find desktop-session-id:"+e),this.$store.commit("storage/dsid",e))}},mounted(){this.checkQuery()}};const Fi=(0,g.Z)(ji,[["render",Ti]]);var Oi=Fi;const Ui=e=>((0,s.dD)("data-v-0bc96ad9"),e=e(),(0,s.Cn)(),e),Vi={class:"header-bar"},Ei={class:"nav-items"},Ai=Ui((()=>(0,s._)("div",{class:"spring-gap"},null,-1))),zi={name:"home-frame-header",components:{MySessionGroupStatus:Oi},props:{config:Object},computed:{theConfig(){let e=this.config;return null==e&&(e={}),e},theDisplayHome(){return!!this.theConfig.home},theDisplayNav(){return!!this.theConfig.nav},theDevDebug(){return this.$store.getters["dev/debug"]}},methods:{open(e){this.$router.push(e)},fireAction(e){let t={name:e};this.$emit("action",t)}}};var Mi=Object.assign(zi,{setup(e){return(e,t)=>{const n=(0,s.up)("el-icon"),r=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",Vi,[(0,s.wy)((0,s._)("div",null,[(0,s.Wm)(r,{link:"",onClick:t[0]||(t[0]=t=>e.open("/")),title:"首页"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.Ozs))])),_:1})])),_:1})],512),[[i.F8,e.theDisplayHome]]),(0,s.wy)((0,s._)("div",Ei,[(0,s.Wm)(r,{link:"",onClick:t[1]||(t[1]=t=>e.open("/repositories"))},{default:(0,s.w5)((()=>[(0,s.Uk)("仓库")])),_:1}),(0,s.wy)((0,s.Wm)(r,{link:"",onClick:t[2]||(t[2]=t=>e.open("/remotes"))},{default:(0,s.w5)((()=>[(0,s.Uk)("远程仓库")])),_:1},512),[[i.F8,e.theDevDebug]]),(0,s.Wm)(r,{link:"",onClick:t[3]||(t[3]=t=>e.open("/executables"))},{default:(0,s.w5)((()=>[(0,s.Uk)("应用")])),_:1}),(0,s.Wm)(r,{link:"",onClick:t[4]||(t[4]=t=>e.open("/projects"))},{default:(0,s.w5)((()=>[(0,s.Uk)("项目")])),_:1})],512),[[i.F8,e.theDisplayNav]]),Ai,(0,s.wy)((0,s.Wm)(Oi,null,null,512),[[i.F8,!1]]),(0,s.Wm)(r,{link:"",title:"刷新",onClick:t[5]||(t[5]=t=>e.fireAction("refresh"))},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.hYj))])),_:1})])),_:1}),(0,s.Wm)(r,{link:"",title:"添加",onClick:t[6]||(t[6]=t=>e.fireAction("add"))},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.v37))])),_:1})])),_:1}),(0,s.Wm)(r,{link:"",onClick:t[7]||(t[7]=t=>e.open("/settings")),title:"设置"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,ci.SU)(pi.pEs))])),_:1})])),_:1})])}}});const $i=(0,g.Z)(Mi,[["__scopeId","data-v-0bc96ad9"]]);var Li=$i,Gi=n(1195);const Bi={class:"pager-container"};function Ri(e,t,n,r,i,o){const a=(0,s.up)("el-pagination");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Bi,[(0,s.Wm)(a,{layout:"prev, pager, next",total:50})])])}var Ni={name:"home-frame-pager"};const Zi=(0,g.Z)(Ni,[["render",Ri],["__scopeId","data-v-d199875e"]]);var Hi=Zi;function Ki(e,t,n,r,i,o){return(0,s.wg)(),(0,s.iD)("div")}var Yi={name:"home-frame-footer"};const qi=(0,g.Z)(Yi,[["render",Ki],["__scopeId","data-v-575e9f32"]]);var Ji=qi,Qi=n(7139);const Xi={class:"debug"};function eo(e,t,n,r,i,o){const a=(0,s.up)("MyTimer");return(0,s.wg)(),(0,s.iD)("div",Xi,[(0,s._)("div",null,"timer(1hz) : "+(0,Qi.zw)(i.t1),1),(0,s._)("div",null,"timer(5hz) : "+(0,Qi.zw)(i.t5),1),(0,s.Wm)(a,{enabled:!0,interval:1e3,onTimer:o.handleTimer1hz},null,8,["onTimer"]),(0,s.Wm)(a,{enabled:!0,interval:5e3,onTimer:o.handleTimer5hz},null,8,["onTimer"])])}function to(e,t,n,r,i,o){return(0,s.wg)(),(0,s.iD)("div")}var no={name:"timer",computed:{t1hz(){return this.$store.getters["timer/timer1hz"]}},data(){return{current:0,count:0}},methods:{fireOnTimer(){this.$emit("timer")},handle1hz(e){if(!this.enabled)return;let t=this.current,n=1e3*(e-t);this.count+=n,this.current=e;let r=this.interval,i=5;for(;r<this.count;i--){if(i<0){this.count=0;break}this.count-=r,this.fireOnTimer()}}},props:{enabled:Boolean,interval:Number},watch:{t1hz(e){this.handle1hz(e)}}};const ro=(0,g.Z)(no,[["render",to]]);var io=ro,oo={name:"debug",components:{MyTimer:io},data(){return{t1:0,t5:0}},methods:{handleTimer1hz(){this.t1++},handleTimer5hz(){this.t5++}}};const ao=(0,g.Z)(oo,[["render",eo],["__scopeId","data-v-9852a020"]]);var so=ao,lo={name:"home-frame",components:{MyHeader:Li,MySearchBox:Gi.Z,MyPager:Hi,MyFooter:Ji,MyDebug:so},props:{config:Object},computed:{theConfig(){let e=this.config;return null==e&&(e={pager:!0,home:!0,nav:!0,search:!0,searchCategory:"全部"}),e},theDisplayPager(){return!!this.theConfig.pager},theDisplaySearch(){return!!this.theConfig.search},theDisplayDebug(){return!!this.theConfig.debug}},methods:{handleAction(e){this.$emit("action",e)}}};const uo=(0,g.Z)(lo,[["render",Si]]);var co=uo;const po={class:"repo-frame-client"},mo={class:"repo-name"},ho={class:"repo-description"},fo={class:"repo-path"};function go(e,t,n,r,i,o){const a=(0,s.up)("el-tab-pane"),l=(0,s.up)("el-tabs"),u=(0,s.up)("HomeFrame");return(0,s.wg)(),(0,s.j4)(u,{config:i.config},{default:(0,s.w5)((()=>[(0,s._)("div",po,[(0,s._)("h1",mo,(0,Qi.zw)(o.repository_name),1),(0,s._)("div",ho,(0,Qi.zw)(o.repository_description),1),(0,s._)("div",fo,"@ "+(0,Qi.zw)(o.repository_path),1),(0,s.Wm)(l,{modelValue:o.activeName,class:"demo-tabs",onTabChange:o.handleChange},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{label:"概览",name:"overview"}),(0,s.Wm)(a,{label:"分支",name:"branches"}),(0,s.Wm)(a,{label:"提交",name:"commits"}),(0,s.Wm)(a,{label:"标签",name:"tags"}),(0,s.Wm)(a,{label:"远程",name:"remotes"}),(0,s.Wm)(a,{label:"工作树",name:"worktrees"}),(0,s.Wm)(a,{label:"项目",name:"projects"})])),_:1},8,["modelValue","onTabChange"]),(0,s.WI)(e.$slots,"default",{},void 0,!0)])])),_:3},8,["config"])}var vo=n(6007);const _o=vo.Z.NewRouteJS();function yo(){return{pager:!1,home:!0,nav:!0,search:!1,searchCategory:""}}var wo={name:"local-repository-frame",computed:{repositoryid(){return _o.GetRepositoryID(this)},repository_info(){return this.$store.getters["current_repository/info"]},repository_name(){return this.repository_info.name},repository_path(){return this.repository_info.path},repository_description(){return this.repository_info.description},activeName(){return this.computeCurrentActiveName()}},data(){let e=yo();return{config:e}},methods:{computeCurrentActiveName(){let e=this.$route.path,t=e.split("/"),n=t[3];return null==n||""==n||"overview"==n?"overview":n},fetch(){let e=this.repositoryid;this.$store.dispatch("current_repository/fetch",{id:e})},handleChange(e){let t="";"overview"!=e&&(t="/"+e);let n=this.repositoryid,r="/repositories/"+n+t;this.$router.push(r)}},mounted(){this.fetch()}};const bo=(0,g.Z)(wo,[["render",go],["__scopeId","data-v-47119903"]]);var ko=bo;const xo=(0,i.ri)(E);xo.component("AdminFrame",ki),xo.component("SimpleFrame",Pi),xo.component("HomeFrame",co),xo.component("RepositoryFrame",ko),xo.use(di).use(Z),xo.use(o.Z,{locale:a.Z}),xo.mount("#app")},2314:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(3396),i=n(7139),o=n(9242);const a={class:"dialog-toolbar"};function s(e,t,n,s,l,u){const d=(0,r.up)("el-form-item"),c=(0,r.up)("el-form"),p=(0,r.up)("el-button"),m=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.j4)(m,{title:"发现新版本"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{"label-width":"48%"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"版本"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(u.latest.version),1)])),_:1}),(0,r.Wm)(d,{label:"文件"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(u.latest.full_name),1)])),_:1}),(0,r.Wm)(d,{label:"大小"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(u.latest.size),1)])),_:1}),(0,r.Wm)(d,{label:"发布日期"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(u.latest.release_at),1)])),_:1})])),_:1}),(0,r._)("div",a,[(0,r.Wm)(p,{type:"primary",onClick:u.openWebPage},{default:(0,r.w5)((()=>[(0,r.Uk)(" 去下载 ")])),_:1},8,["onClick"]),(0,r.wy)((0,r.Wm)(p,{onClick:u.ignoreThisVersion},{default:(0,r.w5)((()=>[(0,r.Uk)(" 忽略此版本 ")])),_:1},8,["onClick"]),[[o.F8,u.displayIgnoreButton]])])])),_:1})}var l={name:"check-update-dialog.vue",computed:{latest(){return this.$store.getters["checkupdate/latest"]},ignore(){return this.$store.getters["checkupdate/ignore"]},displayIgnoreButton(){let e=this.$store.getters["checkupdate/has_ignored"];return!e}},methods:{openWebPage(){let e=this.latest.web_page_url;window.open(e,"_blank")},ignoreThisVersion(){let e=this.latest,t={checkupdate:{ignore:e}};this.$store.dispatch("checkupdate/ignore",t).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)}}},u=n(89);const d=(0,u.Z)(l,[["render",s],["__scopeId","data-v-2378e519"]]);var c=d},1195:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(3396),i=n(7139),o=n(4870),a=n(2748);const s={class:"s-box"},l={name:"home-frame-search-box",props:{config:Object},data(){return{searchtext:""}},computed:{theConfig(){let e=this.config;return null==e&&(e={}),e},theSearchCategory(){let e=this.theConfig.searchCategory;return null!=e&&""!=e||(e="全部"),e}},methods:{fireApplyFilterAction(e){let t={name:"applyFilter",value:e};this.$emit("action",t)},applyFilter(e){this.searchtext=e,this.fireApplyFilterAction(e)}},watch:{}};var u=Object.assign(l,{setup(e){return(e,t)=>{const n=(0,r.up)("el-icon"),l=(0,r.up)("el-button"),u=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",s,[(0,r.Wm)(u,{modelValue:e.searchtext,onInput:e.applyFilter,clearable:"",placeholder:"在此输入要查找的关键字"},{prepend:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e.theSearchCategory),1)])),append:(0,r.w5)((()=>[(0,r.Wm)(l,{title:"查找"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(a.olm))])),_:1})])),_:1})])),_:1},8,["modelValue","onInput"])])])}}}),d=n(89);const c=(0,d.Z)(u,[["__scopeId","data-v-29bfbce9"]]);var p=c},6799:function(e,t,n){n.d(t,{Z:function(){return Ke}});var r=n(3396);const i={class:"pager-box"};function o(e,t,n,o,a,s){const l=(0,r.up)("el-pagination"),u=(0,r.up)("MyRepoList"),d=(0,r.up)("MyOpenItemDialog"),c=(0,r.up)("FastImportDialog"),p=(0,r.up)("OpenWithDrawer"),m=(0,r.up)("HomeFrame");return(0,r.wg)(),(0,r.j4)(m,{config:s.theFrameConfig,onAction:s.handleAction},{default:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r.Wm)(l,{"current-page":a.currentPage,"onUpdate:currentPage":t[0]||(t[0]=e=>a.currentPage=e),"page-size":a.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>a.pageSize=e),"page-sizes":[5,10,20,50,100,200,500],background:a.background,layout:"total, sizes, prev, pager, next",total:s.theCountItemsTotal,onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])]),(0,r.Wm)(u,{data:s.theItems,expandedItemId:a.expandedItemId,onAction:s.handleAction},null,8,["data","expandedItemId","onAction"]),(0,r.Wm)(d,{modelValue:a.displayOpenItemDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.displayOpenItemDialog=e),data:a.dataForOpenItemDialog},null,8,["modelValue","data"]),(0,r.Wm)(c,{modelValue:a.displayFastImportDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>a.displayFastImportDialog=e)},null,8,["modelValue"]),(0,r.Wm)(p,{modelValue:a.displayOpenWithDrawer,"onUpdate:modelValue":t[4]||(t[4]=e=>a.displayOpenWithDrawer=e)},null,8,["modelValue"])])),_:1},8,["config","onAction"])}var a=n(7139);const s={class:"items-box"};function l(e,t,n,i,o,l){const u=(0,r.up)("MyItem");return(0,r.wg)(),(0,r.iD)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.data,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"list-item",style:(0,a.j5)(l.getListItemStyle(e)),key:e.id},[(0,r.Wm)(u,{class:"list-item-inner",data:e,onAction:l.handleAction,expanded:e.id==n.expandedItemId},null,8,["data","onAction","expanded"])],4)))),128))])}var u=n(9242);const d={class:"item"},c={class:"gap"};function p(e,t,n,i,o,a){const s=(0,r.up)("MyOverview"),l=(0,r.up)("MyDetail");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(s,{data:n.data,onAction:a.handleAction,expanded:n.expanded},null,8,["data","onAction","expanded"]),(0,r.wy)((0,r._)("div",c,null,512),[[u.F8,n.expanded]]),(0,r.wy)((0,r.Wm)(l,{data:n.data,onAction:a.handleAction},null,8,["data","onAction"]),[[u.F8,n.expanded]])])}n(7658);const m=e=>((0,r.dD)("data-v-0d6bd44e"),e=e(),(0,r.Cn)(),e),h=m((()=>(0,r._)("h3",{class:"sub-list-title"},"仓库路径：",-1))),f={class:"text-path"},g={class:"sub-list-title"},v={class:"projects sub-list"},_=["title","onClick"],y={class:"sub-list-title"},w={class:"worktrees sub-list"},b=["title","onClick"],k={class:"sub-list-title"},x={class:"submodules sub-list"},W=["title","onClick"];function I(e,t,n,i,o,s){return(0,r.wg)(),(0,r.iD)("div",null,[h,(0,r._)("div",f,(0,a.zw)(s.thePath),1),(0,r.wy)((0,r._)("h3",g,"项目：",512),[[u.F8,s.projects.length>0]]),(0,r._)("div",v,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.projects,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"projects-item sub-list-item",key:e.name,title:e.path,onClick:t=>s.handleClickProjectItem(e)},(0,a.zw)(e.name),9,_)))),128))]),(0,r.wy)((0,r._)("h3",y,"工作树：",512),[[u.F8,s.worktrees.length>0]]),(0,r._)("div",w,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.worktrees,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"worktrees-item sub-list-item",key:e.name,title:e.path,onClick:t=>s.handleClickWorktreeItem(e)},(0,a.zw)(s.formatWorktreeName(e)),9,b)))),128))]),(0,r.wy)((0,r._)("h3",k,"子模块：",512),[[u.F8,s.submodules.length>0]]),(0,r._)("div",x,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.submodules,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"submodules-item sub-list-item",key:e.name,title:e.path,onClick:t=>s.handleClickSubmoduleItem(e)},(0,a.zw)(e.name),9,W)))),128))])])}var C=n(9327),P={name:"home-local-repository-detail",computed:{theIcon(){return this.GetByPath("icon","/bad/icon/path")},theTitle(){return this.GetByPath("name","")},theDescription(){return this.GetByPath("description","")},thePath(){return this.GetByPath("path","")},projects(){return this.GetByPath("projects",[])},submodules(){return this.GetByPath("submodules",[])},worktrees(){return this.GetByPath("worktrees",[])}},methods:{GetByPath(e,t){return C.Z.Get(this.data,e,t)},formatWorktreeName(e){let t=e.name;return""==t&&(t="[默认]"),t},handleClickProjectItem(e){let t={project:e},n={intents:[t]};this.$store.dispatch("intent/start",n)},handleClickSubmoduleItem(e){let t={submodule:e},n={intents:[t]};this.$store.dispatch("intent/start",n)},handleClickWorktreeItem(e){let t={worktree:e},n={intents:[t]};this.$store.dispatch("intent/start",n)}},props:{data:Object}},S=n(89);const D=(0,S.Z)(P,[["render",I],["__scopeId","data-v-0d6bd44e"]]);var T=D,j=n(4870),F=n(2748);const O={class:"open-with-list"},U=["title","onClick"],V=["src"],E={name:"home-local-repository-open-with-list",computed:{apps(){return this.$store.getters["executable/openWithList"]}},data(){return{}},methods:{handleClickItem(e){let t=e,n=this.repository,r={executable:t,repository:n},i={intents:[r]};this.$store.dispatch("intent/run",i)},handleClickItemMore(){}},props:{repository:Object}};var A=Object.assign(E,{setup(e){return(e,t)=>((0,r.wg)(),(0,r.iD)("div",O,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.apps,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"open-with-item",key:t.id,title:t.title,onClick:n=>e.handleClickItem(t)},[(0,r._)("img",{class:"icon",src:t.icon},null,8,V)],8,U)))),128))]))}});const z=(0,S.Z)(A,[["__scopeId","data-v-ad483a16"]]);var M=z;const $=e=>((0,r.dD)("data-v-70d8d979"),e=e(),(0,r.Cn)(),e),L={class:"overview"},G={class:"overview-left"},B=["title"],R={class:"description"},N={class:"toolbar-for-overview"},Z=$((()=>(0,r._)("div",{class:"overview-mid"},null,-1))),H={class:"overview-right"},K={name:"home-local-repository-item",components:{MyExeList:M},computed:{theIcon(){return"/image/icon_empty.png"},theTitle(){return this.getDataWithoutNull().name},thePath(){return this.getDataWithoutNull().path},theDescription(){return this.getDataWithoutNull().description}},methods:{getDataWithoutNull(){let e=this.data;return null==e&&(e={}),e},handleClickItemFold(){let e="fold-item",t=this.data;this.$emit("action",{name:e,item:t})},handleClickItemExpand(){let e="expand-item",t=this.data;this.$emit("action",{name:e,item:t})}},props:{data:Object,expanded:Boolean}};var Y=Object.assign(K,{setup(e){return(t,n)=>{const i=(0,r.up)("el-icon"),o=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",L,[(0,r._)("div",G,[(0,r._)("div",{class:"title",title:t.thePath},(0,a.zw)(t.theTitle),9,B),(0,r._)("div",R,(0,a.zw)(t.theDescription),1),(0,r._)("div",N,[(0,r.wy)((0,r.Wm)(o,{class:"btn-expand-fold",onClick:t.handleClickItemExpand,title:"展开",circle:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(F.v37))])),_:1})])),_:1},8,["onClick"]),[[u.F8,!e.expanded]]),(0,r.wy)((0,r.Wm)(o,{class:"btn-expand-fold",onClick:t.handleClickItemFold,title:"收起",circle:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(F.WF_))])),_:1})])),_:1},8,["onClick"]),[[u.F8,e.expanded]]),(0,r.wy)((0,r.Wm)(o,{circle:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("3")])),_:1},512),[[u.F8,!1]]),(0,r.wy)((0,r.Wm)(o,{circle:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("4")])),_:1},512),[[u.F8,!1]]),(0,r.wy)((0,r.Wm)(o,{circle:"",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("5")])),_:1},512),[[u.F8,!1]])])]),Z,(0,r._)("div",H,[(0,r.Wm)(M,{repository:e.data},null,8,["repository"])])])}}});const q=(0,S.Z)(Y,[["__scopeId","data-v-70d8d979"]]);var J=q,Q={name:"home-local-repository-item",components:{MyDetail:T,MyOverview:J},computed:{apps(){return this.$store.getters["executable/openWithList"]}},methods:{handlePopoverShow(){let e=this.data.id;console.warn("todo: load-local-repo-detail:"+e)},handleClickItemName(){let e=this.data.id;this.$router.push("/repositories/"+e)},handleClickItemPath(){this.openWithDefaultExe()},handleAction(e){let t=e.name;"open-with"==t?this.openWith(e):"open-item-more"==t&&this.openItemMore(e),this.$emit("action",e)},openItemMore(e){e.item=this.data,this.$emit("action",e)},openWithDefaultExe(){let e=this.apps,t={};for(var n in e){let r=e[n];if(null!=r){t.executable=r,this.openWith(t);break}}},openWith(e){e.repository=this.data;let t={executable:e.executable,repository:e.repository},n={intents:[t]};this.$store.dispatch("intent/run",n)}},props:{data:Object,expanded:Boolean}};const X=(0,S.Z)(Q,[["render",p],["__scopeId","data-v-437a6a4e"]]);var ee=X,te={name:"home-local-repository-repos",components:{MyItem:ee},methods:{handleAction(e){this.$emit("action",e)},getListItemStyle(e){let t=e.id==this.expandedItemId;return t?{"background-color":"rgb(245,245,245)"}:{}},handleClickOpenItemWith(e){let t="open-item-with",n={name:t,item:e};this.$emit("action",n)}},props:{data:Array,expandedItemId:Number}};const ne=(0,S.Z)(te,[["render",l],["__scopeId","data-v-2de528aa"]]);var re=ne,ie=n(6465),oe=n(9969),ae=n(1955),se=n(3417),le=n(5268);const ue={class:"dialog-2333"},de={class:"with-app-list"},ce=["title","onClick"],pe=["src"],me={name:"home-local-repository-open-item-dialog",components:{ElButton:ie.mi,MyApps:M,ElRadioGroup:oe.KD,ElForm:ae.ly,ElFormItem:ae.nH,ElInput:se.EZ},computed:{repo(){let e=this.data;return null==e&&(e={}),e},repoTitle(){return this.repo.name},repoLocation(){return this.repo.path},repoProjects(){let e=this.repo.projects;return null==e&&(e=[]),e},theWithAppList(){return this.$store.getters["executable/openWithList"]}},data(){return{fullpath:"",currentProject:"."}},methods:{close(){this.$emit("update:modelValue",!1)},computeFullPath(e){null==e&&(e=this.currentProject);let t=this.data.workspace_path,n=t+"/"+e;return le.Z.NormalizePath(n)},handleClickApp(e){let t=this.fullpath;if(null==e||null==t)return;let n={executable:e,wd:t},r={intents:[n]};this.$store.dispatch("intent/run",r)}},props:{data:Object},watch:{currentProject(e){this.fullpath=this.computeFullPath(e)},repoLocation(){this.currentProject="."}}};var he=Object.assign(me,{setup(e){return(e,t)=>{const n=(0,r.up)("el-divider"),i=(0,r.up)("el-icon"),o=(0,r.up)("ElDialog");return(0,r.wg)(),(0,r.j4)(o,{title:"打开仓库内的项目"},{default:(0,r.w5)((()=>[(0,r._)("div",ue,[(0,r._)("h2",null," @"+(0,a.zw)(e.repo.name),1),(0,r._)("div",null,(0,a.zw)(e.repo.description),1),(0,r.Wm)(n),(0,r.Wm)((0,j.SU)(ae.ly),{"label-width":"180"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(ae.nH),{label:"仓库位置"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(se.EZ),{modelValue:e.repo.path,"onUpdate:modelValue":t[0]||(t[0]=t=>e.repo.path=t),readonly:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)((0,j.SU)(ae.nH),{label:"选择将要打开的项目"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(oe.KD),{class:"project-list",modelValue:e.currentProject,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentProject=t)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.repoProjects,(e=>((0,r.wg)(),(0,r.j4)((0,j.SU)(oe.rh),{label:e.path,title:e.name},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.path),1)])),_:2},1032,["label","title"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)((0,j.SU)(ae.nH),{label:"完整路径"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(se.EZ),{modelValue:e.fullpath,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fullpath=t),readonly:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)((0,j.SU)(ae.nH),{label:"打开方式"},{default:(0,r.w5)((()=>[(0,r._)("div",de,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.theWithAppList,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"with-app",key:t.id,title:t.title,onClick:n=>e.handleClickApp(t)},[(0,r._)("img",{class:"with-app-icon",src:t.icon},null,8,pe),(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,j.SU)(F.GhU))])),_:1})],8,ce)))),128))])])),_:1})])),_:1}),(0,r._)("div",null,[(0,r.Wm)((0,j.SU)(ie.mi),{onClick:e.close},{default:(0,r.w5)((()=>[(0,r.Uk)("关闭")])),_:1},8,["onClick"])])])])),_:1})}}});const fe=(0,S.Z)(he,[["__scopeId","data-v-056b34ab"]]);var ge=fe;const ve=e=>((0,r.dD)("data-v-4ec2b12e"),e=e(),(0,r.Cn)(),e),_e={class:"this-dialog"},ye={class:"item-info-box no-result-text"},we=ve((()=>(0,r._)("div",null,null,-1)));function be(e,t,n,i,o,a){const s=(0,r.up)("el-button"),l=(0,r.up)("el-input"),d=(0,r.up)("MyInfoRepository"),c=(0,r.up)("MyInfoWorktree"),p=(0,r.up)("MyInfoProject"),m=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.j4)(m,{title:"快速导入：仓库 | 工作树 | 项目"},{default:(0,r.w5)((()=>[(0,r._)("div",_e,[(0,r.Wm)(l,{modelValue:o.path,"onUpdate:modelValue":t[0]||(t[0]=e=>o.path=e),placeholder:"请输入要查找的文件或文件夹路径"},{prepend:(0,r.w5)((()=>[(0,r.Uk)(" 路径 ")])),append:(0,r.w5)((()=>[(0,r.Wm)(s,{onClick:a.search},{default:(0,r.w5)((()=>[(0,r.Uk)(" 查找 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,r._)("div",null,[(0,r.wy)((0,r.Wm)(d,{class:"item-info-box",modelValue:o.repository,"onUpdate:modelValue":t[1]||(t[1]=e=>o.repository=e),onAction:a.handleAction},null,8,["modelValue","onAction"]),[[u.F8,o.has_repository]]),(0,r.wy)((0,r.Wm)(c,{class:"item-info-box",modelValue:o.worktree,"onUpdate:modelValue":t[2]||(t[2]=e=>o.worktree=e),"x-hide-v-show":"has_worktree",onAction:a.handleAction},null,8,["modelValue","onAction"]),[[u.F8,!1]]),(0,r.wy)((0,r.Wm)(p,{class:"item-info-box",modelValue:o.project,"onUpdate:modelValue":t[3]||(t[3]=e=>o.project=e),onAction:a.handleAction},null,8,["modelValue","onAction"]),[[u.F8,o.has_project]]),(0,r.wy)((0,r._)("div",ye," 没有找到任何结果 :( ",512),[[u.F8,a.displayNoResult]])]),we])])),_:1})}function ke(e,t,n,i,o,s){const l=(0,r.up)("el-form-item"),u=(0,r.up)("MyStateBox"),d=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("h3",null,"项目: "+(0,a.zw)(s.item.name),1),(0,r.Wm)(d,{"label-width":"50px"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"路径"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(s.item.path),1)])),_:1}),(0,r.Wm)(l,{label:"类型"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(s.item.type),1)])),_:1}),(0,r.Wm)(l,{label:"状态"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:s.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>s.item.state=e),targetId:s.item.id,onClickImport:s.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}const xe={class:"state-box"},We={class:"state-box-text"},Ie={class:"state-box-btn-parent"};function Ce(e,t,n,i,o,a){const s=(0,r.up)("FileState"),l=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",xe,[(0,r._)("span",We,[(0,r.Wm)(s,{code:n.modelValue},null,8,["code"])]),(0,r._)("span",Ie,[(0,r.wy)((0,r.Wm)(l,{class:"state-box-btn",type:"success",onClick:a.handleClickImport},{default:(0,r.w5)((()=>[(0,r.Uk)(" 导入 ")])),_:1},8,["onClick"]),[[u.F8,0==n.targetId]])])])}var Pe=n(3312),Se={name:"import-fast-state-box-with-import-button",components:{FileState:Pe.Z},methods:{handleClickImport(){this.$emit("click-import")}},props:{modelValue:String,targetId:Number}};const De=(0,S.Z)(Se,[["render",Ce],["__scopeId","data-v-75b94dcf"]]);var Te=De,je={name:"import-fast-info-of-project",components:{MyStateBox:Te},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository","project","worktree"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const Fe=(0,S.Z)(je,[["render",ke]]);var Oe=Fe;function Ue(e,t,n,i,o,s){const l=(0,r.up)("el-form-item"),u=(0,r.up)("MyStateBox"),d=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("h3",null,"Git 仓库: "+(0,a.zw)(s.item.name),1),(0,r.Wm)(d,{"label-width":"50px"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"路径"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(s.item.path),1)])),_:1}),(0,r.Wm)(l,{label:"状态"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:s.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>s.item.state=e),targetId:s.item.id,onClickImport:s.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}var Ve={name:"import-fast-info-of-repository",components:{MyStateBox:Te},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const Ee=(0,S.Z)(Ve,[["render",Ue],["__scopeId","data-v-18e76692"]]);var Ae=Ee;function ze(e,t,n,i,o,s){const l=(0,r.up)("el-form-item"),u=(0,r.up)("MyStateBox"),d=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("h3",null,"Git 工作区: "+(0,a.zw)(s.item.name),1),(0,r.Wm)(d,{"label-width":"50px"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"路径"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(s.item.path),1)])),_:1}),(0,r.Wm)(l,{label:"状态"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:s.item.state,"onUpdate:modelValue":t[0]||(t[0]=e=>s.item.state=e),targetId:s.item.id,onClickImport:s.handleImport},null,8,["modelValue","targetId","onClickImport"])])),_:1})])),_:1})])}var Me={name:"import-fast-info-of-worktree",components:{MyStateBox:Te},computed:{item(){let e=this.modelValue;return null==e&&(e={}),e}},methods:{handleImport(){let e="save",t=["repository","worktree"];this.$emit("action",{name:e,items:t})}},props:{modelValue:Object}};const $e=(0,S.Z)(Me,[["render",ze]]);var Le=$e,Ge={name:"import-fast-dialog",components:{MyInfoProject:Oe,MyInfoRepository:Ae,MyInfoWorktree:Le},computed:{displayNoResult(){let e=this.has_search_done,t=this.has_project,n=this.has_repository,r=this.has_worktree;return e&&!t&&!n&&!r}},data(){return{path:"",project:{},repository:{},worktree:{},has_project:!1,has_repository:!1,has_worktree:!1,has_search_done:!1,result_vo:{}}},methods:{search(){let e=this.path,t="POST",n="repository-worktree-project/find",r={path:e};this.$store.dispatch("rest/execute",{method:t,type:n,data:r}).then((e=>{let t=e.data;this.handleSearchResults(t)}))},save(e){let t=this.result_vo.path,n="POST",r="repository-worktree-project/save",i={path:t},o=e.items,a=this.result_vo,s=i;for(var l in o){let e=o[l];s[e]=a[e]}this.$store.dispatch("rest/execute",{method:n,type:r,data:i}).then((()=>{this.search()}))},makeObjectWithoutNil(e){return null==e&&(e={}),e},handleAction(e){let t=e.name;"save"==t&&this.save(e)},handleSearchResults(e){this.project=this.makeObjectWithoutNil(e.project),this.repository=this.makeObjectWithoutNil(e.repository),this.worktree=this.makeObjectWithoutNil(e.worktree),this.has_project=null!=e.project,this.has_repository=null!=e.repository,this.has_worktree=null!=e.worktree,this.has_search_done=!0,this.result_vo=e}}};const Be=(0,S.Z)(Ge,[["render",be],["__scopeId","data-v-4ec2b12e"]]);var Re=Be,Ne=n(9475),Ze={name:"home-local-repository-index",components:{MyRepoList:re,MyOpenItemDialog:ge,FastImportDialog:Re,OpenWithDrawer:Ne.Z},computed:{theFrameConfig(){return{pager:!1,home:!0,nav:!0,search:!0,searchCategory:"本地仓库"}},theCountItemsTotal(){return this.$store.getters["local_repository/total"]},theItems(){return this.$store.getters["local_repository/currentPageItems"]}},data(){return{pageSize:1,currentPage:1,expandedItemId:0,background:"",displayFastImportDialog:!1,displayOpenItemDialog:!1,displayOpenWithDrawer:!1,dataForOpenItemDialog:{}}},methods:{handleAction(e){let t=e.name;"refresh"==t?this.fetch():"add"==t?this.add():"applyFilter"==t?this.applyFilter(e.value):"open-item-with"==t?this.openItemWith(e):"expand-item"==t?this.makeItemExpanded(e):"fold-item"==t?this.makeItemFolded(e):console.warn("unsupported action: "+t)},fetch(){this.$store.dispatch("local_repository/fetch")},initOpenWithList(){this.$store.dispatch("executable/init")},add(){this.displayFastImportDialog=!0},handleSizeChange(e){let t=e;this.$store.commit("local_repository/update",{size:t})},handleCurrentChange(e){let t=e-1;this.$store.commit("local_repository/update",{index:t})},applyFilter(e){this.$store.commit("local_repository/update",{filter:e})},pageViewToModel(){let e=this.currentPage-1,t=this.pageSize;this.$store.commit("local_repository/update",{index:e,size:t})},pageModelToView(){this.currentPage=this.$store.getters["local_repository/currentPage"],this.pageSize=this.$store.getters["local_repository/pageSize"]},makeItemExpanded(e){let t=e.item;if(null==t)return;let n=t.id;this.expandedItemId=n,this.$store.dispatch("local_repository/fetchById",{id:n})},makeItemFolded(){this.expandedItemId=0},openItemWith(e){let t=e.item;this.dataForOpenItemDialog=t,this.displayOpenWithDrawer=!0},openFastImportDialog(){this.displayFastImportDialog=!0}},mounted(){this.pageModelToView(),this.initOpenWithList(),this.fetch()}};const He=(0,S.Z)(Ze,[["render",o],["__scopeId","data-v-2f574654"]]);var Ke=He},9475:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(3396);function i(e,t,n,i,o,a){const s=(0,r.up)("MyPanel"),l=(0,r.up)("el-drawer");return(0,r.wg)(),(0,r.j4)(l,{class:"open-with-drawer",title:"请选择打开方式",direction:o.direction,"before-close":a.handleClose,style:{"background-color":"rgb(230, 230, 230)","max-height":"380px","min-height":"300px"}},{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(s)])])),_:1},8,["direction","before-close"])}var o=n(7139),a=n(4870),s=n(2748);const l={class:"exe-list"},u=["title","onClick"],d={class:"exe-list-item-inner"},c=["src"];function p(e,t,n,i,o,a){return(0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"exe-list-item",key:e.id,title:e.title,onClick:t=>a.handleClickItem(e)},[(0,r._)("div",d,[(0,r._)("img",{class:"exe-list-item-icon",src:e.icon},null,8,c)])],8,u)))),128))])}var m={name:"open-with-panel",computed:{items(){return this.$store.getters["executable/openWithList"]}},data(){return{targetType:"仓库路径",targetPath:"/a/b/c/d"}},methods:{handleClickItem(e){let t="intent",n={executable:e},r={name:t,intent:n};this.$emit("action",r)}}},h=n(89);const f=(0,h.Z)(m,[["render",p],["__scopeId","data-v-5887e2a4"]]);var g=f,v=n(7178);const _={name:"open-with-panel",components:{MyExeList:g},computed:{current(){let e=this.$store.getters["intent/current"];return null==e&&(e={}),e},revision(){return this.$store.getters["intent/revision"]}},data(){return{path:"",label:"",intent:{}}},methods:{handleAction(e){let t=e.name;"intent"==t&&this.handleIntent(e.intent)},handleIntent(e){if(null==e)return;let t=e,n=this.intent,r={};this.copyfields(t,r),this.copyfields(n,r);let i={intents:[r]};this.$store.dispatch("intent/run",i)},copyfields(e,t){for(var n in e)t[n]=e[n]},reload(){let e=this.current;this.tryLoadFolder(e.folder),this.tryLoadProject(e.project),this.tryLoadRepository(e.repository),this.tryLoadSubmodule(e.submodule),this.tryLoadWorktree(e.worktree)},tryLoadFolder(e){null!=e&&(this.label="打开文件夹",this.path=e.path,this.intent={folder:e})},tryLoadProject(e){null!=e&&(this.label="打开工程项目",this.path=e.path,this.intent={project:e})},tryLoadRepository(e){null!=e&&(this.label="打开仓库",this.path=e.path,this.intent={repository:e})},tryLoadSubmodule(e){null!=e&&(this.label="打开子模块",this.path=e.path,this.intent={submodule:e})},tryLoadWorktree(e){null!=e&&(this.label="打开工作树",this.path=e.path,this.intent={worktree:e})},copy(){let e=this.path;navigator.clipboard.writeText(e).then((()=>{this.displayCopyOK()})).catch((()=>{this.displayCopyFail()}))},displayCopyOK(){(0,v.z8)({message:"复制成功",type:"success"})},displayCopyFail(){v.z8.error("复制失败")}},mounted(){this.reload()},watch:{revision(){this.reload()}}};var y=Object.assign(_,{setup(e){return(e,t)=>{const n=(0,r.up)("el-icon"),i=(0,r.up)("el-button"),l=(0,r.up)("el-input");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l,{modelValue:e.path,"onUpdate:modelValue":t[0]||(t[0]=t=>e.path=t),readonly:""},{prepend:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.label),1)])),append:(0,r.w5)((()=>[(0,r.Wm)(i,{onClick:e.copy,title:"把路径复制到剪贴板"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,a.SU)(s._hA))])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,r.Wm)(g,{onAction:e.handleAction},null,8,["onAction"])])}}});const w=y;var b=w,k={name:"open-with-drawer",components:{MyPanel:b},data(){return{direction:"btt"}},methods:{handleClose(e){e()}}};const x=(0,h.Z)(k,[["render",i],["__scopeId","data-v-6a6dff2e"]]);var W=x},3312:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(3396),i=n(4870),o=n(9242),a=n(7139),s=n(2748);const l=["title"],u={class:"state-text"},d={ready:{type:"success",text:"正常"},moved:{type:"warn",text:"已搬迁"},offline:{type:"error",text:"找不到"},untracked:{type:"default",text:"未导入"},undef:{type:"warn",text:"未知"}},c={name:"file-state",computed:{stateText(){return this.stringifyState(this.code)},statetype(){return this.getStateType(this.code)}},data(){return{}},methods:{stringifyState(e){let t=d[e];return null==t?e:t.text},getStateType(e){let t=d[e];return null==t?e:t.type}},props:{code:String}};var p=Object.assign(c,{setup(e){return(t,n)=>{const d=(0,r.up)("el-icon");return(0,r.wg)(),(0,r.iD)("div",{title:e.code},[(0,r.wy)((0,r.Wm)(d,{class:"state-icon-ok"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(s.c5o))])),_:1},512),[[o.F8,"success"==t.statetype]]),(0,r._)("span",u,(0,a.zw)(t.stateText),1),(0,r.wy)((0,r.Wm)(d,{class:"state-icon-warn"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(s.hg5))])),_:1},512),[[o.F8,"warn"==t.statetype]]),(0,r.wy)((0,r.Wm)(d,{class:"state-icon-error"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(s.Tw$))])),_:1},512),[[o.F8,"error"==t.statetype]])],8,l)}}}),m=n(89);const h=(0,m.Z)(p,[["__scopeId","data-v-a43b95d8"]]);var f=h}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,i,o){if(!r){var a=1/0;for(d=0;d<e.length;d++){r=e[d][0],i=e[d][1],o=e[d][2];for(var s=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(443===e?"about":e)+"."+{22:"c10272df",78:"cb08fcc0",89:"200aeb09",90:"ab42cf55",120:"43a2ee44",155:"b48ea427",188:"2cd6b1cd",229:"2228f255",280:"aacb762d",325:"a8b1415f",330:"a637bb45",335:"c5ab6d81",359:"f08831bc",403:"45843ac8",415:"33de842d",433:"0053d4b3",434:"02848b30",442:"efdb6870",443:"dd9d65d5",479:"513cf71c",521:"f903bc86",541:"577726fa",543:"c39465a8",690:"b2afded6",745:"82a2deef",760:"f0135d58",796:"7b67f61d",810:"0b962947",851:"438208cf",866:"fe9c8eee",953:"d4f8b9d1",970:"a7c2858e",997:"ee1dbd4b"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+(443===e?"about":e)+"."+{89:"fb8a3c1f",90:"e66ee221",120:"cdb09079",188:"5ab718e5",229:"ea78b860",325:"031dba84",433:"117aba34",434:"c44f274b",442:"31220f3d",443:"8b3baee7",479:"76a4bafe",543:"5cb37c22",745:"04fc8e9e",760:"4ba5c3d5",796:"4ba5c3d5",810:"ebf33f5f",866:"77e21355",997:"9c642d79"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="wpm-station-vue:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+o){s=c;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var p=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,r,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(n){if(o.onerror=o.onload=null,"load"===n.type)r();else{var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,o.parentNode.removeChild(o),i(l)}};return o.onerror=o.onload=a,o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=n[r],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var a=document.getElementsByTagName("style");for(r=0;r<a.length;r++){i=a[r],o=i.getAttribute("data-href");if(o===e||o===t)return i}},r=function(r){return new Promise((function(i,o){var a=n.miniCssF(r),s=n.p+a;if(t(a,s))return i();e(r,s,null,i,o)}))},i={143:0};n.f.miniCss=function(e,t){var n={89:1,90:1,120:1,188:1,229:1,325:1,433:1,434:1,442:1,443:1,479:1,543:1,745:1,760:1,796:1,810:1,866:1,997:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=r(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error,l=function(r){if(n.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}};n.l(a,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n)}for(t&&t(r);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var i=n.O(void 0,[998],(function(){return n(2171)}));i=n.O(i)})();
//# sourceMappingURL=app.571767f1.js.map