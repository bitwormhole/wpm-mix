(self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[]).push([[345],{5581:function(e,t,l){"use strict";var a=l(2109),o=l(1572),n=l(5656),i=Array;a({target:"Array",proto:!0},{with:function(e,t){return o(n(this),i,e,t)}})},7391:function(e,t,l){l(5581)},3196:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Oe}});var a=l(3396);function o(e,t,l,o,n,i){const d=(0,a.up)("MyClient"),u=(0,a.up)("AdminFrame");return(0,a.wg)(),(0,a.j4)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1})}const n=e=>((0,a.dD)("data-v-bd53ae4c"),e=e(),(0,a.Cn)(),e),i={class:"index-page"},d=n((()=>(0,a._)("h1",null,"命令模板",-1)));function u(e,t,l,o,n,u){const m=(0,a.up)("MyToolbar"),r=(0,a.up)("MySearch"),s=(0,a.up)("MyPager"),p=(0,a.up)("MyTable"),c=(0,a.up)("MyEditDialog"),h=(0,a.up)("MyMacroListDialog");return(0,a.wg)(),(0,a.iD)("div",i,[d,(0,a.Wm)(m,{onAction:u.handleAction},null,8,["onAction"]),(0,a.Wm)(r,{class:"search-box"}),(0,a.Wm)(s,{class:"pager-box"}),(0,a.Wm)(p,{onAction:u.handleAction},null,8,["onAction"]),(0,a.Wm)(c,{class:"insert-dialog",modelValue:n.displayInsertDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>n.displayInsertDialog=e),method:"POST",onAction:u.handleAction},null,8,["modelValue","onAction"]),(0,a.Wm)(h,{modelValue:n.displayMacroListDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.displayMacroListDialog=e)},null,8,["modelValue"])])}var m=l(4870),r=l(9242),s=l(2748);const p={class:"toolbar"},c={name:"settings-intent-templates-toolbar",components:{},data(){return{}},methods:{fetch(){this.$store.dispatch("intent_template/fetch")},insert(){this.fireAction("insert")},fireAction(e){let t={name:e};this.$emit("action",t)},handleCommand(e){"IMPORT_PRESET_TEMPLATES"==e&&this.doImportPresetTemplates()},doImportPresetTemplates(){this.$store.dispatch("intent_template/import_preset_templates",{})}},mounted(){this.fetch()}};var h=Object.assign(c,{setup(e){return(e,t)=>{const l=(0,a.up)("el-icon"),o=(0,a.up)("el-button"),n=(0,a.up)("el-dropdown-item"),i=(0,a.up)("el-dropdown-menu"),d=(0,a.up)("el-dropdown");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(o,{type:"default",onClick:e.fetch,title:"刷新"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.hYj))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(o,{type:"default",onClick:e.insert,title:"添加"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.v37))])),_:1})])),_:1},8,["onClick"]),(0,a.wy)((0,a.Wm)(d,{style:{"margin-left":"15px"},onCommand:e.handleCommand},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{command:"IMPORT_PRESET_TEMPLATES"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 导入预置模板 ")])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(o,{type:"default",title:"更多"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.Tkc))])),_:1})])),_:1})])),_:1},8,["onCommand"]),[[r.F8,!1]])])}}}),g=l(89);const f=(0,g.Z)(h,[["__scopeId","data-v-a7ab8966"]]);var w=f;function _(e,t,l,o,n,i){const d=(0,a.up)("el-table-column"),u=(0,a.up)("ImageView"),m=(0,a.up)("el-button"),r=(0,a.up)("el-table"),s=(0,a.up)("MyBatch"),p=(0,a.up)("MyEditDialog"),c=(0,a.up)("MyItemDetailDialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{data:i.items,"default-sort":{prop:"title",order:"descending"},onSelectionChange:i.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"selection"}),(0,a.Wm)(d,{width:"48px"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{modelValue:e.row.icon,"onUpdate:modelValue":t=>e.row.icon=t,"image-height":"24px","image-width":"24px"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(d,{prop:"name",label:"名称",sortable:""}),(0,a.Wm)(d,{prop:"title",label:"标题",sortable:""}),(0,a.Wm)(d,{prop:"group",label:"分组",sortable:""}),(0,a.Wm)(d,{prop:"name",label:"操作",width:"170px"},{default:(0,a.w5)((e=>[(0,a.Wm)(m,{type:"primary",link:"",onClick:t=>i.handleClickItemDetail(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 详细 ")])),_:2},1032,["onClick"]),(0,a.Wm)(m,{type:"primary",link:"",onClick:t=>i.handleClickItemEdit(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,a.Wm)(m,{type:"danger",link:"",onClick:t=>i.handleClickItemRemove(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Wm)(s,{modelValue:n.selectedItems,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedItems=e)},null,8,["modelValue"]),(0,a.Wm)(p,{modelValue:n.displayEditDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.displayEditDialog=e),target:n.theEditDialogItem,method:"PUT",onAction:i.handleAction},null,8,["modelValue","target","onAction"]),(0,a.Wm)(c,{modelValue:n.displayDetailDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>n.displayDetailDialog=e),target:n.theDetailDialogItem},null,8,["modelValue","target"])])}var y=l(2655);l(7391);const b=e=>((0,a.dD)("data-v-a9e50502"),e=e(),(0,a.Cn)(),e),W={class:"select-sub-type"},v=b((()=>(0,a._)("span",null," 项目类型：",-1))),V={class:"select-sub-type"},k=b((()=>(0,a._)("span",null," 文件类型：",-1))),U={class:"select-sub-type"},C=b((()=>(0,a._)("span",null," 对象类型：",-1))),D={class:"dialog-button-bar"},S=b((()=>(0,a._)("span",{class:"spring"},null,-1)));function M(e,t,l,o,n,i){const d=(0,a.up)("ImageSelect"),u=(0,a.up)("el-form-item"),m=(0,a.up)("el-input"),s=(0,a.up)("el-button"),p=(0,a.up)("ExecutableUrnSelector"),c=(0,a.up)("MyTypeRadioGroup"),h=(0,a.up)("ProjectTypeSelector"),g=(0,a.up)("FileTypeSelector"),f=(0,a.up)("ObjectTypeSelector"),w=(0,a.up)("el-form"),_=(0,a.up)("MyMacroListDialog"),y=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(y,{title:i.dialogTitle,onOpen:i.open,"align-center":"",width:"800px"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{"label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.item.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>n.item.icon=e),"image-height":"100px","image-width":"100px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.item.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"标题"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.title,"onUpdate:modelValue":t[2]||(t[2]=e=>n.item.title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"分组"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.group,"onUpdate:modelValue":t[3]||(t[3]=e=>n.item.group=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"动作"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.method,"onUpdate:modelValue":t[5]||(t[5]=e=>n.item.method=e)},{append:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:t[4]||(t[4]=e=>n.item.method=n.valueDefault.method)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 使用默认值 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"应用名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:n.item.with,"onUpdate:modelValue":t[6]||(t[6]=e=>n.item.with=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"目标类型"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:n.item.kind,"onUpdate:modelValue":t[7]||(t[7]=e=>n.item.kind=e),contenttype:n.item.type},null,8,["modelValue","contenttype"]),(0,a.wy)((0,a._)("div",W,[v,(0,a.Wm)(h,{modelValue:n.item.type,"onUpdate:modelValue":t[8]||(t[8]=e=>n.item.type=e),style:{display:"inline-block"}},null,8,["modelValue"])],512),[[r.F8,i.displaySelectTypeForProject]]),(0,a.wy)((0,a._)("div",V,[k,(0,a.Wm)(g,{modelValue:n.item.type,"onUpdate:modelValue":t[9]||(t[9]=e=>n.item.type=e),style:{display:"inline-block"}},null,8,["modelValue"])],512),[[r.F8,i.displaySelectTypeForFile]]),(0,a.wy)((0,a._)("div",U,[C,(0,a.Wm)(f,{modelValue:n.item.type,"onUpdate:modelValue":t[10]||(t[10]=e=>n.item.type=e),style:{display:"inline-block"}},null,8,["modelValue"])],512),[[r.F8,i.displaySelectTypeForObject]])])),_:1}),(0,a.Wm)(u,{label:"命令"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.command,"onUpdate:modelValue":t[12]||(t[12]=e=>n.item.command=e)},{append:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:t[11]||(t[11]=e=>n.item.command=n.valueDefault.command)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 使用默认值 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"参数"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.args,"onUpdate:modelValue":t[13]||(t[13]=e=>n.item.args=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"环境变量"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.env,"onUpdate:modelValue":t[14]||(t[14]=e=>n.item.env=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"工作目录"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.wd,"onUpdate:modelValue":t[16]||(t[16]=e=>n.item.wd=e)},{append:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:t[15]||(t[15]=e=>n.item.wd=n.valueDefault.wd)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 使用默认值 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:n.item.description,"onUpdate:modelValue":t[17]||(t[17]=e=>n.item.description=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",D,[(0,a.Wm)(s,{type:"default",onClick:i.showMacroProps},{default:(0,a.w5)((()=>[(0,a.Uk)(" 宏变量... ")])),_:1},8,["onClick"]),S,(0,a.Wm)(s,{type:"success",onClick:i.save},{default:(0,a.w5)((()=>[(0,a.Uk)(" 保存 ")])),_:1},8,["onClick"]),(0,a.Wm)(s,{type:"default",onClick:i.close},{default:(0,a.w5)((()=>[(0,a.Uk)(" 取消 ")])),_:1},8,["onClick"])]),(0,a.Wm)(_,{modelValue:n.displayMacroListDialog,"onUpdate:modelValue":t[18]||(t[18]=e=>n.displayMacroListDialog=e)},null,8,["modelValue"])])),_:1},8,["title","onOpen"])}var T=l(9327);const I={name:"settings-intent-templates-macro-list-dialog",computed:{items(){return this.$store.getters["intent_template/macro_properties"]}},data(){return{output:""}},methods:{handleSelect(e){this.output="${"+e.name+"}"},fetch(){this.$store.dispatch("intent_template/fetch_macro_props").then((()=>{}))},copy(){let e=this.output;this.$store.dispatch("clipboard/copy",e).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)}},mounted(){this.fetch()}};var j=Object.assign(I,{setup(e){return(e,t)=>{const l=(0,a.up)("el-table-column"),o=(0,a.up)("el-table"),n=(0,a.up)("el-button"),i=(0,a.up)("el-icon"),d=(0,a.up)("el-input"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:"宏变量名单"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{data:e.items,"max-height":"320",border:"",onCurrentChange:e.handleSelect},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{prop:"name",label:"变量名"}),(0,a.Wm)(l,{prop:"description",label:"说明"})])),_:1},8,["data","onCurrentChange"]),(0,a.Wm)(d,{class:"output-text-edit",modelValue:e.output,"onUpdate:modelValue":t[0]||(t[0]=t=>e.output=t),readonly:""},{prepend:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" 引用表达式 ")])),_:1})])),append:(0,a.w5)((()=>[(0,a.Wm)(n,{onClick:e.copy},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s._hA))])),_:1}),(0,a.Uk)(" 复制文本 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})}}});const $=(0,g.Z)(j,[["__scopeId","data-v-749bc7ba"]]);var x=$;const z={name:"settings-content-types-for-project-selector",computed:{options(){return this.$store.getters["content_type/file_type_list"]}},data(){return{}},methods:{refresh(){this.$store.dispatch("content_type/fetch")},computeLabel(e){let t=e.label,l=e.patterns;return t+" ("+l+")"},fireUpdateModelValue(e){this.$emit("update:modelValue",e)}},props:{modelValue:String}};var P=Object.assign(z,{setup(e){return(t,l)=>{const o=(0,a.up)("el-option"),n=(0,a.up)("el-select"),i=(0,a.up)("el-icon"),d=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{"model-value":e.modelValue,"onUpdate:modelValue":t.fireUpdateModelValue,placeholder:"请选择"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.options,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.id,label:t.computeLabel(e),value:e.type},null,8,["label","value"])))),128)),(0,a.Wm)(o,{label:"任何类型",value:"*"})])),_:1},8,["model-value","onUpdate:modelValue"]),(0,a.Wm)(d,{type:"default",title:"刷新",onClick:t.refresh},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.hYj))])),_:1})])),_:1},8,["onClick"])])}}});const E=P;var A=E;function L(e,t,l,o,n,i){const d=(0,a.up)("el-option"),u=(0,a.up)("el-select");return(0,a.wg)(),(0,a.j4)(u,{placeholder:"请选择"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"Git 仓库",value:"repository"}),(0,a.Wm)(d,{label:"Git 工作树",value:"worktree"}),(0,a.Wm)(d,{label:"Git 子模块",value:"submodule"}),(0,a.Wm)(d,{label:"文件夹",value:"folder"}),(0,a.Wm)(d,{label:"网页",value:"web"}),(0,a.Wm)(d,{label:"任何项目",value:"project"}),(0,a.Wm)(d,{label:"任何文件",value:"file"}),(0,a.Wm)(d,{label:"任何类型",value:"*"})])),_:1})}var O={name:"settings-content-types-for-project-selector",computed:{},data(){return{}},methods:{},props:{}};const Z=(0,g.Z)(O,[["render",L]]);var F=Z;const B={name:"settings-content-types-for-project-selector",computed:{options(){return this.$store.getters["content_type/project_type_list"]}},data(){return{}},methods:{refresh(){this.$store.dispatch("content_type/fetch")},computeLabel(e){let t=e.label,l=e.patterns;return t+" ("+l+")"},fireUpdateModelValue(e){this.$emit("update:modelValue",e)}},props:{modelValue:String}};var G=Object.assign(B,{setup(e){return(t,l)=>{const o=(0,a.up)("el-option"),n=(0,a.up)("el-select"),i=(0,a.up)("el-icon"),d=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{"model-value":e.modelValue,"onUpdate:modelValue":t.fireUpdateModelValue,placeholder:"请选择"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.options,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.id,label:t.computeLabel(e),value:e.type},null,8,["label","value"])))),128)),(0,a.Wm)(o,{label:"任何类型",value:"*"})])),_:1},8,["model-value","onUpdate:modelValue"]),(0,a.Wm)(d,{type:"default",title:"刷新",onClick:t.refresh},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.hYj))])),_:1})])),_:1},8,["onClick"])])}}});const R=G;var Y=R,K=l(7139);const H={class:"select-option-box"},J=["src"],N={name:"executable-urn-selector",computed:{options(){return this.$store.getters["executable/all"]}},methods:{fireUpdateModelValue(e){this.$emit("update:modelValue",e)},refresh(){this.$store.dispatch("executable/fetch")}},props:{modelValue:String}};var q=Object.assign(N,{setup(e){return(t,l)=>{const o=(0,a.up)("el-option"),n=(0,a.up)("el-select"),i=(0,a.up)("el-icon"),d=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{"model-value":e.modelValue,"onUpdate:modelValue":t.fireUpdateModelValue},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.options,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.id,label:e.title,value:e.urn},{default:(0,a.w5)((()=>[(0,a._)("div",H,[(0,a._)("span",null,[(0,a._)("img",{class:"select-option-icon-image",src:e.icon},null,8,J)]),(0,a._)("span",null,(0,K.zw)(e.name),1)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["model-value","onUpdate:modelValue"]),(0,a.Wm)(d,{onClick:t.refresh},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.hYj))])),_:1})])),_:1},8,["onClick"])])}}});const Q=(0,g.Z)(q,[["__scopeId","data-v-4cdbea7e"]]);var X=Q,ee=l(7967);function te(e,t,l,o,n,i){const d=(0,a.up)("el-radio"),u=(0,a.up)("el-radio-group");return(0,a.wg)(),(0,a.j4)(u,{class:"ml-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"file",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)("文件")])),_:1}),(0,a.Wm)(d,{label:"project",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)("项目")])),_:1}),(0,a.Wm)(d,{label:"object",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 其它 ")])),_:1})])),_:1})}var le={name:"settings-intent-templates-content-type-radio-group",methods:{computeKindByContentType(e){let t=""+e;if(0==t.indexOf("project/"))return"project";let l=t.indexOf("/");return l>=0?"file":"object"},setValue(e){this.$emit("update:modelValue",e)}},mounted(){let e=this.contenttype;this.setValue(e)},props:{contenttype:String},watch:{contenttype(e){let t=this.computeKindByContentType(e);this.setValue(t)}}};const ae=(0,g.Z)(le,[["render",te]]);var oe=ae;const ne=[{id:1,label:"git 仓库",value:"repository",wd_default:"${repository.wkdir}"},{id:2,label:"git 工作区",value:"worktree",wd_default:"${worktree.wkdir}"},{id:3,label:"git 子模块",value:"submodule",wd_default:"${submodule.wkdir}"},{id:4,label:"文件夹",value:"folder",wd_default:"${folder.path}"},{id:5,label:"文件",value:"file",wd_default:"${file.path}"},{id:6,label:"工程项目",value:"project",wd_default:"${project.fullpath}"},{id:99,label:"任何类型",value:"*",wd_default:"${executable.path}"}];var ie={name:"settings-intent-template-edit-dialog",components:{MyMacroListDialog:x,ProjectTypeSelector:Y,ObjectTypeSelector:F,FileTypeSelector:A,ExecutableUrnSelector:X,ImageSelect:ee.Z,MyTypeRadioGroup:oe},computed:{dialogTitle(){return this.isPost()?"新建命令模板":"修改命令模板"},displaySelectTypeForObject(){let e=T.Z.Get(this.item,"kind","");return"object"==e},displaySelectTypeForFile(){let e=T.Z.Get(this.item,"kind","");return"file"==e},displaySelectTypeForProject(){let e=T.Z.Get(this.item,"kind","");return"project"==e}},data(){return{item:{},displayMacroListDialog:!1,target_types:ne,project_types:[],content_types:[],valueDefault:{wd:"${repository.wkdir}",command:"${executable.path}",method:"open"},target_type_selection:""}},methods:{isPost(){let e=""+this.method;return"post"==e.toLowerCase()},isPut(){let e=""+this.method;return"put"==e.toLowerCase()},save(){this.prepareSave();let e="";if(this.isPost())e="intent_template/insert";else{if(!this.isPut())return void console.warn("bad prop.method.value: "+this.method);e="intent_template/update"}let t=this.item;this.$store.dispatch(e,{item:t}).then((()=>{this.close()}))},close(){this.$emit("update:modelValue")},open(){this.prepareLoad()},prepareLoad(){let e=this.target;null==e&&(e={});let t=JSON.stringify(e);e=JSON.parse(t),this.item=e},prepareSave(){let e=T.Z.Get(this,"item",{});this.item=e},handleTargetChange(e){let t=ne;for(var l in t){let a=t[l];a.value==e&&(this.valueDefault.wd=a.wd_default)}},showMacroProps(){let e={name:"list:macro"};this.$emit("action",e)}},props:{method:String,target:Object}};const de=(0,g.Z)(ie,[["render",M],["__scopeId","data-v-a9e50502"]]);var ue=de,me=l(3368);const re={style:{"margin-top":"10px"}};function se(e,t,l,o,n,i){const d=(0,a.up)("el-button"),u=(0,a.up)("BatchToolBar");return(0,a.wg)(),(0,a.iD)("div",re,[(0,a.Wm)(u,{modelValue:i.items,"onUpdate:modelValue":t[0]||(t[0]=e=>i.items=e),title:"批处理",hideEmpty:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"danger",onClick:i.handleDelete},{default:(0,a.w5)((()=>[(0,a.Uk)(" 删除 ")])),_:1},8,["onClick"]),(0,a.Wm)(d,{type:"primary",onClick:i.handlePutToBuffer},{default:(0,a.w5)((()=>[(0,a.Uk)(" 存入缓冲区 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}var pe=l(9698),ce={name:"settings-intent-templates-batch",components:{BatchToolBar:pe.Z},computed:{items(){return this.modelValue}},methods:{handleDelete(){let e=this.items;this.$store.dispatch("intent_template/remove",{items:e})},handlePutToBuffer(){let e="intenttemplates",t={};t[e]=this.items,this.$store.dispatch("jsonbuffer/put",{vo:t})}},props:{modelValue:Array}};const he=(0,g.Z)(ce,[["render",se]]);var ge=he;const fe={class:"info-parent"};function we(e,t,l,o,n,i){const d=(0,a.up)("MyIcon"),u=(0,a.up)("el-form-item"),m=(0,a.up)("el-form"),r=(0,a.up)("ElButton"),s=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(s,{title:"命令模板详情","align-center":"",width:"800px"},{default:(0,a.w5)((()=>[(0,a._)("div",fe,[(0,a.Wm)(d,{class:"info-icon",src:i.item.icon,size:99,title:""},null,8,["src"]),(0,a.Wm)(m,{class:"info-form the-item-detail-dialog","label-width":"128px"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"标题"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.title),1)])),_:1}),(0,a.Wm)(u,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.name),1)])),_:1}),(0,a.Wm)(u,{label:"ID / UUID"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.id)+" / "+(0,K.zw)(i.item.uuid),1)])),_:1}),(0,a.Wm)(u,{label:"分组"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.group),1)])),_:1}),(0,a.Wm)(u,{label:"选择表达式"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.selector),1)])),_:1}),(0,a.Wm)(u,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.description),1)])),_:1}),(0,a.Wm)(u,{label:"命令"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.command),1)])),_:1}),(0,a.Wm)(u,{label:"参数"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.args),1)])),_:1}),(0,a.Wm)(u,{label:"环境变量"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.env),1)])),_:1}),(0,a.Wm)(u,{label:"工作目录"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.item.wd),1)])),_:1}),(0,a.Wm)(u,{label:"创建时间"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.formatTime(i.item.created_at)),1)])),_:1}),(0,a.Wm)(u,{label:"修改时间"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,K.zw)(i.formatTime(i.item.updated_at)),1)])),_:1})])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(r,{type:"default",onClick:i.duplicate},{default:(0,a.w5)((()=>[(0,a.Uk)("创建副本")])),_:1},8,["onClick"]),(0,a.Wm)(r,{type:"default",onClick:i.close},{default:(0,a.w5)((()=>[(0,a.Uk)("关闭")])),_:1},8,["onClick"])])])),_:1})}var _e=l(6465),ye=l(4031),be=l(9466),We={name:"settings-intent-templates-item-detail-dialog",components:{ElButton:_e.mi,MyIcon:ye.Z},computed:{item(){let e=this.target;return null==e&&(e=this.emptyItem),e}},data(){return{emptyItem:{}}},methods:{close(){this.$emit("update:modelValue",!1)},duplicate(){let e=this.item;this.$store.dispatch("intent_template/duplicate",{item:e}).then((()=>{this.close()}))},formatTime(e){return be.Z.StringifyTimestamp(e,"datetime")}},props:{target:Object}};const ve=(0,g.Z)(We,[["render",we],["__scopeId","data-v-7f91cf9b"]]);var Ve=ve,ke={name:"settings-intent-templates-table",components:{MyEditDialog:ue,ImageView:me.Z,MyBatch:ge,MyItemDetailDialog:Ve},computed:{items(){return this.$store.getters["intent_template/list"]}},data(){return{displayDetailDialog:!1,displayEditDialog:!1,theEditDialogItem:{},theDetailDialogItem:{},selectedItems:[]}},methods:{handleClickItemEdit(e){this.theEditDialogItem=e,this.displayEditDialog=!0},handleClickItemDetail(e){this.theDetailDialogItem=e,this.displayDetailDialog=!0},handleClickItemRemove(e){let t="删除命令模板",l="确定要删除 ["+e.name+"] 这个命令模板吗？",a="";y.T.confirm(l+a,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.removeItem(e)})).catch((()=>{}))},removeItem(e){let t=e.id;this.$store.dispatch("intent_template/remove",{id:t})},handleAction(e){this.$emit("action",e)},handleSelectionChange(e){this.selectedItems=e}}};const Ue=(0,g.Z)(ke,[["render",_]]);var Ce=Ue;function De(e,t,l,o,n,i){const d=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,{"current-page":i.currentPage,"onUpdate:currentPage":t[0]||(t[0]=e=>i.currentPage=e),"page-size":i.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>i.pageSize=e),"page-sizes":[5,10,20,50,100,200,500],background:n.background,layout:"total, sizes, prev, pager, next",total:i.theCountItemsTotal,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","background","total","onSizeChange","onCurrentChange"])])}var Se={name:"settings-intent-templates-pager",computed:{theCountItemsTotal(){return this.$store.getters["intent_template/total"]},currentPage(){return this.$store.getters["intent_template/current_page"]},pageSize(){return this.$store.getters["intent_template/page_size"]}},data(){return{background:!0}},methods:{handleSizeChange(e){let t=e,l=0;this.$store.commit("intent_template/update",{size:t,index:l})},handleCurrentChange(e){let t=e-1;this.$store.commit("intent_template/update",{index:t})}}};const Me=(0,g.Z)(Se,[["render",De]]);var Te=Me;const Ie={name:"settings-intent-templates-search",computed:{theModelValue(){return this.$store.getters["intent_template/filter"]}},methods:{handleUpdateModelValue(e){let t=e;this.$store.commit("intent_template/update",{filter:t})}}};var je=Object.assign(Ie,{setup(e){return(e,t)=>{const l=(0,a.up)("el-icon"),o=(0,a.up)("el-button"),n=(0,a.up)("el-input");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{modelValue:e.theModelValue,"onUpdate:modelValue":e.handleUpdateModelValue,placeholder:"输入要查找的内容"},{append:(0,a.w5)((()=>[(0,a.Wm)(o,{title:"查找"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,m.SU)(s.olm))])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])])}}});const $e=je;var xe=$e,ze={name:"settings-intent-templates-index",components:{MyToolbar:w,MyTable:Ce,MyPager:Te,MyEditDialog:ue,MyMacroListDialog:x,MySearch:xe},data(){return{displayInsertDialog:!1,displayMacroListDialog:!1}},methods:{handleAction(e){let t=e.name;"insert"==t?this.insert():"list:macro"==t&&(this.displayMacroListDialog=!0)},insert(){this.displayInsertDialog=!0}}};const Pe=(0,g.Z)(ze,[["render",u],["__scopeId","data-v-bd53ae4c"]]);var Ee=Pe,Ae={name:"views-settings-intent-templates",components:{MyClient:Ee}};const Le=(0,g.Z)(Ae,[["render",o]]);var Oe=Le}}]);
//# sourceMappingURL=345.ac9a0939.js.map