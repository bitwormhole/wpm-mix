{"version":3,"file":"js/128.7270bc7d.js","mappings":"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","sources":["webpack://wpm-station-vue/./src/components/filebrowser/dialog-open.vue","webpack://wpm-station-vue/./src/components/filebrowser/path-bar.vue","webpack://wpm-station-vue/./src/components/filebrowser/path-bar.vue?533f","webpack://wpm-station-vue/./src/components/filebrowser/view-detail-table.vue","webpack://wpm-station-vue/./src/js/time.js","webpack://wpm-station-vue/./src/js/bytes.js","webpack://wpm-station-vue/./src/components/filebrowser/view-detail-table.vue?6572","webpack://wpm-station-vue/./src/components/filebrowser/dialog-common.vue","webpack://wpm-station-vue/./src/components/filebrowser/dialog-common.vue?2bd0","webpack://wpm-station-vue/./src/components/filebrowser/dialog-open.vue?55d8"],"sourcesContent":["<template>\n  <div>\n    <MyDialogCommon\n      :modelValue=\"modelValue\"\n      bank=\"dialog_open\"\n      :multipleSelection=\"multipleSelection\"\n      @update:modelValue=\"updateModelValue\"\n      @open-file=\"handleOpenFile\"\n    />\n  </div>\n</template>\n\n<script>\nimport MyDialogCommon from \"./dialog-common.vue\";\n\nexport default {\n  name: \"filebrowser-dialog-open\",\n  components: { MyDialogCommon },\n\n  methods: {\n    updateModelValue(p) {\n      this.$emit(\"update:modelValue\", p);\n    },\n\n    handleOpenFile(files) {\n      this.$emit(\"open-file\", files);\n    },\n  },\n\n  props: {\n    modelValue: Boolean,\n    multipleSelection: Boolean,\n  },\n};\n</script>\n\n<style scoped>\n</style>\n","<template>\n  <div>\n    <div class=\"mode-elements\" v-show=\"mode.current == mode.elements\">\n      <el-breadcrumb class=\"mode-elements-bread\" :separator-icon=\"ArrowRight\">\n        <el-breadcrumb-item>\n          <el-button\n            class=\"path-element\"\n            link\n            type=\"primary\"\n            @click=\"handleClickPathRoot\"\n          >\n            根\n          </el-button>\n        </el-breadcrumb-item>\n\n        <el-breadcrumb-item v-for=\"item in items\" :key=\"item.id\">\n          <el-button\n            class=\"path-element\"\n            link\n            type=\"primary\"\n            :title=\"item.path\"\n            @click=\"handleClickPathItem(item)\"\n          >\n            {{ item.name }}\n          </el-button>\n        </el-breadcrumb-item>\n      </el-breadcrumb>\n\n      <el-button link @click=\"handleClickEdit\" title=\"编辑路径\">\n        <el-icon> <Edit /> </el-icon>\n      </el-button>\n    </div>\n\n    <div class=\"mode-input\" v-show=\"mode.current == mode.edit\">\n      <el-input v-model=\"pathText\" placeholder=\"请输入要查询的路径\">\n        <template #prepend>\n          <el-button @click=\"handleClickCancel\" title=\"取消\">\n            <el-icon> <CloseBold /> </el-icon>\n          </el-button>\n        </template>\n\n        <template #append>\n          <el-button @click=\"handleClickGo\" title=\"查询\">\n            <el-icon> <Right /> </el-icon>\n          </el-button>\n        </template>\n      </el-input>\n    </div>\n  </div>\n</template>\n\n\n<script setup>\nimport { Edit, Right, CloseBold, ArrowRight } from \"@element-plus/icons-vue\";\n</script>\n\n\n<script>\n// import xxx from ''\n\nexport default {\n  name: \"filebrowser-path-bar\",\n\n  computed: {\n    items() {\n      return this.makeItems(this.elements);\n    },\n\n    elements() {\n      return this.$store.getters[\"files/GetPathElements\"](this.bank);\n    },\n  },\n\n  data() {\n    return {\n      mode: {\n        current: 2,\n        edit: 1,\n        elements: 2,\n      },\n      pathText: \"\",\n    };\n  },\n\n  methods: {\n    handleClickEdit() {\n      let bank = this.bank;\n      let path = this.$store.getters[\"files/GetPathString\"](bank);\n      if (path == null) {\n        path = \"\";\n      }\n      this.pathText = path;\n      this.mode.current = this.mode.edit;\n    },\n\n    handleClickGo() {\n      this.mode.current = this.mode.elements;\n      this.navTo(this.pathText);\n    },\n\n    handleClickCancel() {\n      this.mode.current = this.mode.elements;\n    },\n\n    handleClickPathItem(item) {\n      let path = item.path;\n      this.navTo(path);\n    },\n\n    handleClickPathRoot() {\n      this.navTo(\"/\");\n    },\n\n    makeItems(src) {\n      let dst = [];\n      let dir = \"\";\n      for (var i in src) {\n        let name = src[i];\n        let item = this.makeItem(name, dir);\n        dst.push(item);\n        dir = item.path;\n      }\n      return dst;\n    },\n\n    makeItem(name, parent) {\n      let item = {};\n      item.path = parent + \"/\" + name;\n      item.name = name;\n      return item;\n    },\n\n    navTo(path) {\n      let bank = this.bank;\n      this.$store.dispatch(\"files/fetch\", { bank, path });\n    },\n  },\n\n  props: { bank: String },\n};\n</script>\n\n<style scoped>\n.mode-elements {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 10px;\n  padding-right: 10px;\n  border-radius: 3px;\n  border-style: solid;\n  border-width: 1px;\n  border-color: rgba(128, 128, 128, 0);\n}\n\n.mode-elements:hover {\n  background-color: rgb(233, 232, 232);\n  border-color: rgb(222, 222, 222);\n}\n\n.mode-elements-bread {\n  flex-grow: 1;\n}\n\n.path-element {\n  color: rgb(68, 68, 68);\n}\n\n.path-element:hover {\n  color: rgb(48, 155, 255);\n}\n</style>\n","import script from \"./path-bar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./path-bar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./path-bar.vue?vue&type=style&index=0&id=44e24e86&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\home\\\\xukun\\\\git.bitwormhole\\\\wpm-ui\\\\vuejs\\\\wpm-station-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-44e24e86\"]])\n\nexport default __exports__","<template>\n  <div>\n    <el-table\n      :data=\"items\"\n      ref=\"theTable\"\n      highlight-current-row\n      @selection-change=\"handleSelectionChange\"\n      @current-change=\"handleCurrentChange\"\n    >\n      <el-table-column :type=\"tableColumnType\"></el-table-column>\n\n      <el-table-column prop=\"name\" label=\"名称\" sortable>\n        <template #default=\"scope\">\n          <el-button\n            link\n            type=\"primary\"\n            @click=\"handleClickItemName(scope.row)\"\n          >\n            {{ scope.row.name }}\n          </el-button>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        prop=\"content_type\"\n        label=\"类型\"\n        sortable\n      ></el-table-column>\n\n      <el-table-column\n        prop=\"updated_at\"\n        label=\"修改时间\"\n        :formatter=\"formatTimestamp\"\n        sortable\n      ></el-table-column>\n\n      <el-table-column\n        prop=\"size\"\n        label=\"大小\"\n        :formatter=\"formatByteSize\"\n        sortable\n      ></el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport TimeJS from \"./../../js/time.js\";\nimport ByteJS from \"./../../js/bytes.js\";\n\nfunction nop() {}\n\nexport default {\n  name: \"filebrowser-view-detail-table\",\n\n  computed: {\n    items() {\n      return this.$store.getters[\"files/GetItems\"](this.bank);\n    },\n\n    tableColumnType() {\n      return this.multipleSelection ? \"selection\" : \"index\";\n      // return \"selection\";\n    },\n  },\n\n  data() {\n    return {\n      selection1: {},\n      selectionN: [],\n    };\n  },\n\n  methods: {\n    handleClickItemName(item) {\n      if (item.is_dir) {\n        this.openDir(item);\n      }\n    },\n\n    openDir(item) {\n      let bank = this.bank;\n      let href = item.name;\n      this.$store.dispatch(\"files/fetch\", { bank, href });\n    },\n\n    getFieldByName(name, item) {\n      if (name == null || item == null) {\n        return \"\";\n      }\n      return item[name];\n    },\n\n    handleCurrentChange(currentRow /* , oldCurrentRow */) {\n      // let n2 = this.getFieldByName(\"name\", currentRow);\n      // let n1 = this.getFieldByName(\"name\", oldCurrentRow);\n      // console.warn(\"current-change old:\" + n1 + \" current:\" + n2);\n      ////////\n      if (currentRow != null) {\n        this.selection1 = currentRow;\n      }\n      this.fireSelectionChange();\n    },\n\n    handleSelectionChange() {\n      let rows = this.$refs.theTable.getSelectionRows();\n      // let cnt = rows.length;\n      // console.warn(\"selection.count=\" + cnt);\n      ////////\n      if (rows != null) {\n        this.selectionN = rows;\n      }\n      this.fireSelectionChange();\n    },\n\n    fireSelectionChange() {\n      let items = this.selectionN;\n      let item1 = this.selection1;\n      let dst = [];\n      if (items != null) {\n        for (var i in items) {\n          dst.push(items[i]);\n        }\n      }\n      if (dst.length == 0 && item1 != null) {\n        if (item1.name != null) {\n          dst.push(item1);\n        }\n      }\n      this.$emit(\"selection-change\", dst);\n    },\n\n    formatByteSize(row, column, cellValue, index) {\n      nop(row, column, index);\n      return ByteJS.StringifySize(cellValue);\n    },\n\n    formatTimestamp(row, column, cellValue, index) {\n      nop(row, column, index);\n      return TimeJS.StringifyTimestamp(cellValue);\n    },\n  },\n\n  props: {\n    bank: String,\n    multipleSelection: Boolean,\n  },\n};\n</script>\n\n<style scoped>\n</style>\n","\n\nfunction stringifyNumWithWidth(num, width) {\n    let str = num + ''\n    if (num < 0) {\n        return str\n    }\n    if (width == null) {\n        return str\n    }\n    if (width < 2) {\n        return str\n    }\n    for (; str.length < width;) {\n        str = '0' + str\n    }\n    return str\n}\n\n\n/**\n  文本化时间戳, ms 表示基于1970-01-01的毫秒数\n*/\nfunction StringifyTimestamp(ms) {\n\n    let t = new Date()\n    t.setTime(ms)\n\n    let YY = t.getFullYear()\n    let MM = t.getMonth() + 1\n    let DD = t.getDate()\n\n    let hh = t.getHours()\n    let mm = t.getMinutes()\n    let ss = t.getSeconds()\n\n    let str = '' + YY\n    str += '-' + stringifyNumWithWidth(MM, 2)\n    str += '-' + stringifyNumWithWidth(DD, 2)\n    str += '  ' + stringifyNumWithWidth(hh, 2)\n    str += ':' + stringifyNumWithWidth(mm, 2)\n    str += ':' + stringifyNumWithWidth(ss, 2)\n\n    return str\n}\n\n\n\nexport default {\n    name: \"TimeJS\",\n\n    StringifyTimestamp\n}\n","\n\n\nfunction tryStringifySizeWithUnit(size, per, unit) {\n    let n = size / per\n    if (n < 1) {\n        return null;\n    }\n    let str = ''\n    if (n < 5) {\n        str = n.toFixed(1)\n    } else {\n        str = n.toFixed(0)\n    }\n    return str + unit;\n}\n\n\n/**\n * 文本化字节数\n*/\nfunction StringifySize(size) {\n\n    const pKB = 1024\n    const pMB = 1024 * 1024\n    const pGB = 1024 * 1024 * 1024\n\n    let str = tryStringifySizeWithUnit(size, pGB, \" GB\")\n    if (str != null) {\n        return str\n    }\n\n    str = tryStringifySizeWithUnit(size, pMB, \" MB\")\n    if (str != null) {\n        return str\n    }\n\n    str = tryStringifySizeWithUnit(size, pKB, \" KB\")\n    if (str != null) {\n        return str\n    }\n\n    return size + \" B\"\n}\n\n\n\nexport default {\n    name: \"BytesJS\",\n\n    StringifySize\n}\n","import { render } from \"./view-detail-table.vue?vue&type=template&id=4ea26058\"\nimport script from \"./view-detail-table.vue?vue&type=script&lang=js\"\nexport * from \"./view-detail-table.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\home\\\\xukun\\\\git.bitwormhole\\\\wpm-ui\\\\vuejs\\\\wpm-station-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <el-dialog\n      :modelValue=\"modelValue\"\n      @update:modelValue=\"updateModelValue\"\n      width=\"66%\"\n      :fullscreen=\"false\"\n      :title=\"dialogTitle\"\n    >\n      <MyPathBar :bank=\"bank\" />\n\n      <div class=\"toolbar toolbar-top\">\n        <el-button @click=\"handleClickGoUp\">\n          <el-icon> <TopLeft /> </el-icon> 向上\n        </el-button>\n\n        <el-button @click=\"handleClickRefresh\">\n          <el-icon> <Refresh /> </el-icon> 刷新</el-button\n        >\n        <el-button @click=\"handleClickMakeDir\">\n          <el-icon> <Plus /> </el-icon> 新建文件夹</el-button\n        >\n\n        <el-input\n          class=\"input-file-name\"\n          v-model=\"filename\"\n          placeholder=\"文件(或目录)名\"\n        ></el-input>\n\n        <el-button type=\"success\" @click=\"handleClickOK\">\n          {{ actionText }}\n        </el-button>\n\n        <el-button type=\"default\" @click=\"handleClickCancel\">取消</el-button>\n      </div>\n\n      <MyDetailView :bank=\"bank\" @selection-change=\"handleSelectionChange\" />\n      <div class=\"toolbar toolbar-bottom\"></div>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { Refresh, Plus, TopLeft } from \"@element-plus/icons-vue\";\n</script>\n\n<script>\nimport MyPathBar from \"./path-bar.vue\";\nimport MyDetailView from \"./view-detail-table.vue\";\nimport { ElMessageBox } from \"element-plus\";\n\nexport default {\n  name: \"filebrowser-dialog-common\",\n\n  components: { MyPathBar, MyDetailView },\n\n  computed: {\n    dialogTitle() {\n      let title = this.title;\n      if (title != null) {\n        if (title != \"\") {\n          return title;\n        }\n      }\n      let s1 = this.actionText;\n      let s2 = this.wantText;\n      return s1 + s2;\n    },\n\n    actionText() {\n      let value = this.action;\n      return value == \"save\" ? \"保存\" : \"打开\";\n    },\n\n    wantText() {\n      let value = this.want;\n      return value == \"folder\" || value == \"directory\" ? \"文件夹\" : \"文件\";\n    },\n  },\n\n  data() {\n    return {\n      filename: \"\",\n      selectedItems: [],\n    };\n  },\n\n  methods: {\n    refresh() {\n      let bank = this.bank;\n      this.$store.dispatch(\"files/fetch\", { bank });\n    },\n\n    updateModelValue(p) {\n      this.$emit(\"update:modelValue\", p);\n    },\n\n    handleClickRefresh() {\n      this.refresh();\n    },\n\n    handleClickGoUp() {\n      let bank = this.bank;\n      let href = \"..\";\n      this.$store.dispatch(\"files/fetch\", { bank, href });\n    },\n\n    handleClickMakeDir() {\n      let title = \"新建文件夹\";\n      let text = \"请输入文件夹名称\";\n      ElMessageBox.prompt(text, title, {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n      })\n        .then(() => {\n          console.warn(\"todo: mkdir\");\n        })\n        .catch(() => {});\n    },\n\n    handleClickCancel() {\n      this.updateModelValue(false);\n    },\n\n    handleClickOK() {\n      this.updateModelValue(false);\n      let list = this.selectedItems;\n      if (this.action == \"save\") {\n        this.$emit(\"save-file\", list);\n      } else {\n        this.$emit(\"open-file\", list);\n      }\n    },\n\n    handleSelectionChange(items) {\n      if (items == null) {\n        return;\n      }\n      if (items.length == 1) {\n        this.filename = items[0].name;\n        this.selectedItems = items;\n        return;\n      }\n      let sep = \"\";\n      let str = \"\";\n      for (var i in items) {\n        let it = items[i];\n        str += sep + \"'\" + it.name + \"'\";\n        sep = \", \";\n      }\n      this.selectedItems = items;\n      this.filename = str;\n    },\n\n    init() {\n      let path = \"/\";\n      let base = \"file:///\";\n      let bank = this.bank;\n      this.$store.commit(\"files/init\", { bank, path, base });\n    },\n  },\n\n  mounted() {\n    this.init();\n  },\n\n  props: {\n    modelValue: Boolean,\n    bank: String,\n    title: String,\n    want: String, // ['file'|'folder']\n    action: String, // ['open'|'save']\n    multipleSelection: Boolean,\n  },\n\n  watch: {\n    modelValue(newValue, oldValue) {\n      if (newValue == true && oldValue == false) {\n        this.refresh();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.toolbar {\n  display: flex;\n  flex-direction: row;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.input-file-name {\n  flex-grow: 1;\n  margin-left: 10px;\n  margin-right: 10px;\n}\n</style>\n","import script from \"./dialog-common.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./dialog-common.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./dialog-common.vue?vue&type=style&index=0&id=2a3b2d19&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\home\\\\xukun\\\\git.bitwormhole\\\\wpm-ui\\\\vuejs\\\\wpm-station-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a3b2d19\"]])\n\nexport default __exports__","import { render } from \"./dialog-open.vue?vue&type=template&id=585f3254\"\nimport script from \"./dialog-open.vue?vue&type=script&lang=js\"\nexport * from \"./dialog-open.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\home\\\\xukun\\\\git.bitwormhole\\\\wpm-ui\\\\vuejs\\\\wpm-station-vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_createVNode","_component_MyDialogCommon","modelValue","$props","bank","multipleSelection","$options","updateModelValue","onOpenFile","handleOpenFile","__default__","name","computed","items","this","makeItems","elements","$store","getters","data","mode","current","edit","pathText","methods","handleClickEdit","path","handleClickGo","navTo","handleClickCancel","handleClickPathItem","item","handleClickPathRoot","src","dst","dir","i","makeItem","push","parent","dispatch","props","String","__exports__","_component_el_table","ref","onSelectionChange","handleSelectionChange","onCurrentChange","handleCurrentChange","_component_el_table_column","type","tableColumnType","prop","label","sortable","default","_withCtx","scope","_component_el_button","link","onClick","$event","handleClickItemName","row","formatter","formatTimestamp","formatByteSize","stringifyNumWithWidth","num","width","str","length","StringifyTimestamp","ms","t","Date","setTime","YY","getFullYear","MM","getMonth","DD","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","tryStringifySizeWithUnit","size","per","unit","n","toFixed","StringifySize","pKB","pMB","pGB","nop","selection1","selectionN","is_dir","openDir","href","getFieldByName","currentRow","fireSelectionChange","rows","$refs","theTable","getSelectionRows","item1","$emit","column","cellValue","index","ByteJS","TimeJS","Boolean","components","MyPathBar","MyDetailView","dialogTitle","title","s1","actionText","s2","wantText","value","action","want","filename","selectedItems","refresh","p","handleClickRefresh","handleClickGoUp","handleClickMakeDir","text","ElMessageBox","confirmButtonText","cancelButtonText","then","console","warn","catch","handleClickOK","list","sep","it","init","base","commit","mounted","watch","newValue","oldValue","MyDialogCommon","files","render"],"sourceRoot":""}