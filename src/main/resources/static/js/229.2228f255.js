"use strict";(self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[]).push([[229],{1229:function(e,t,l){l.r(t),l.d(t,{default:function(){return M}});var a=l(3396);function o(e,t,l,o,i,n){const d=(0,a.up)("ClientViewIndex"),m=(0,a.up)("AdminFrame");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1})}const i=e=>((0,a.dD)("data-v-c5e559d0"),e=e(),(0,a.Cn)(),e),n={class:"settings-project-types-index"},d=i((()=>(0,a._)("h1",null,"内容类型",-1)));function m(e,t,l,o,i,m){const u=(0,a.up)("MyToolbar"),r=(0,a.up)("MyTable");return(0,a.wg)(),(0,a.iD)("div",n,[d,(0,a.Wm)(u),(0,a.Wm)(r)])}function u(e,t,l,o,i,n){const d=(0,a.up)("el-table-column"),m=(0,a.up)("el-button"),u=(0,a.up)("el-table"),r=(0,a.up)("MyEditDialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(u,{data:n.items},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{prop:"type",label:"类型",sortable:""}),(0,a.Wm)(d,{prop:"patterns",label:"命名模式",sortable:""}),(0,a.Wm)(d,{prop:"label",label:"标签",sortable:""}),(0,a.Wm)(d,{prop:"priority",label:"优先级",sortable:""}),(0,a.Wm)(d,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(m,{link:"",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("详细")])),_:1}),(0,a.Wm)(m,{link:"",type:"primary",onClick:t=>n.handleClickEditItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(m,{link:"",type:"danger",onClick:t=>n.handleClickRemoveItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,a.Wm)(r,{modelValue:i.displayEditDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.displayEditDialog=e),title:"编辑类型",method:"PUT",target:i.theEditDialogTarget},null,8,["modelValue","target"])])}function r(e,t,l,o,i,n){const d=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),u=(0,a.up)("el-checkbox"),r=(0,a.up)("MyPrioritySelector"),s=(0,a.up)("el-form"),p=(0,a.up)("el-button"),c=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{"label-width":"100px"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:"类型名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.item.type,"onUpdate:modelValue":t[0]||(t[0]=e=>i.item.type=e),placeholder:"例如：text/plain"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"命名模式"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.item.patterns,"onUpdate:modelValue":t[1]||(t[1]=e=>i.item.patterns=e),placeholder:"例如：*.txt; 可接受多个值，以逗号分隔"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"目标"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.item.as_dir,"onUpdate:modelValue":t[2]||(t[2]=e=>i.item.as_dir=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件夹 ")])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:i.item.as_file,"onUpdate:modelValue":t[3]||(t[3]=e=>i.item.as_file=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件 ")])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:i.item.as_project,"onUpdate:modelValue":t[4]||(t[4]=e=>i.item.as_project=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 项目 ")])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"标签名"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.item.label,"onUpdate:modelValue":t[5]||(t[5]=e=>i.item.label=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"优先级"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:i.item.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>i.item.priority=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.item.description,"onUpdate:modelValue":t[7]||(t[7]=e=>i.item.description=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",null,[(0,a.Wm)(p,{type:"success",onClick:n.save},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["onClick"]),(0,a.Wm)(p,{type:"default",onClick:n.close},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"])])])),_:1})}function s(e,t,l,o,i,n){const d=(0,a.up)("el-option"),m=(0,a.up)("el-select");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.options,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,value:e.value,label:e.text},null,8,["value","label"])))),128)),(0,a.Wm)(d,{value:0,label:"默认值"})])),_:1})}l(7658);var p={name:"project-type-priority-selector",data(){const e=6;let t=[];for(let l=1;l<=e;l++){let e={id:l,value:l,text:""+l};t.push(e)}return{options:t}}},c=l(89);const h=(0,c.Z)(p,[["render",s]]);var f=h,_={name:"settings-project-type-edit-dialog",components:{MyPrioritySelector:f},data(){return{item:{as_dir:!1,as_file:!1,description:"",label:"",name:"",type:""}}},methods:{save(){let e=this.item,t="",l=this.method;if("POST"==l)t="insert";else{if("PUT"!=l)return;t="update"}this.$store.dispatch("content_type/"+t,{item:e}).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)},cloneObject(e){let t=JSON.stringify(e);return JSON.parse(t)}},props:{method:String,target:Object},watch:{target(e){this.item=this.cloneObject(e)}}};const y=(0,c.Z)(_,[["render",r]]);var w=y,g=l(2655),W={name:"settings-project-types-table",components:{MyEditDialog:w},computed:{items(){return this.$store.getters["content_type/all"]}},data(){return{displayEditDialog:!1,theEditDialogTarget:{}}},methods:{handleClickEditItem(e){this.theEditDialogTarget=e,this.displayEditDialog=!0},handleClickRemoveItem(e){let t="删除项目类型",l="确定要移除 ["+e.name+"] 这项目类型吗？",a="";g.T.confirm(l+a,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.removeItem(e)})).catch((()=>{}))},removeItem(e){this.$store.dispatch("content_type/remove",e)}}};const b=(0,c.Z)(W,[["render",u]]);var k=b,V=l(4870),v=l(2748);const T={class:"toolbar"},C={name:"settings-project-types-toolbar",components:{MyEditDialog:w},data(){return{displayEditDialog:!1,theEditDialogTarget:{}}},methods:{fetch(){this.$store.dispatch("content_type/fetch")},insert(){this.theEditDialogTarget={},this.displayEditDialog=!0},importPresetTypes(){let e="POST",t="import-project-types",l={};this.$store.dispatch("rest/execute",{method:e,type:t,data:l})},handleCommand(e){"IMPORT_PRESET_TYPES"==e&&this.importPresetTypes()}},mounted(){this.fetch()}};var E=Object.assign(C,{setup(e){return(e,t)=>{const l=(0,a.up)("el-icon"),o=(0,a.up)("el-button"),i=(0,a.up)("el-dropdown-item"),n=(0,a.up)("el-dropdown-menu"),d=(0,a.up)("el-dropdown");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",null,[(0,a.Wm)(o,{title:"刷新",onClick:e.fetch},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,V.SU)(v.hYj))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(o,{title:"添加",onClick:e.insert},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,V.SU)(v.v37))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(d,{style:{"margin-left":"15px"},onCommand:e.handleCommand},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,{command:"IMPORT_PRESET_TYPES"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 导入预置类型 ")])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(o,{type:"default",title:"更多"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,V.SU)(v.Tkc))])),_:1})])),_:1})])),_:1},8,["onCommand"])]),(0,a.Wm)(w,{modelValue:e.displayEditDialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.displayEditDialog=t),method:"POST",target:e.theEditDialogTarget,title:"添加类型"},null,8,["modelValue","target"])])}}});const U=(0,c.Z)(E,[["__scopeId","data-v-0c8bd931"]]);var D=U,j={name:"settings-project-types-index",components:{MyToolbar:D,MyTable:k}};const S=(0,c.Z)(j,[["render",m],["__scopeId","data-v-c5e559d0"]]);var x=S,P={name:"SettingsContentTypes",components:{ClientViewIndex:x}};const I=(0,c.Z)(P,[["render",o]]);var M=I}}]);
//# sourceMappingURL=229.2228f255.js.map