"use strict";(self["webpackChunkwpm_station_vue"]=self["webpackChunkwpm_station_vue"]||[]).push([[825],{9875:function(e,t,l){l.r(t),l.d(t,{default:function(){return Q}});var a=l(3396);function i(e,t,l,i,o,n){const m=(0,a.up)("ClientViewIndex"),d=(0,a.up)("AdminFrame");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m)])),_:1})}const o=e=>((0,a.dD)("data-v-c5e559d0"),e=e(),(0,a.Cn)(),e),n={class:"settings-project-types-index"},m=o((()=>(0,a._)("h1",null,"内容类型",-1)));function d(e,t,l,i,o,d){const u=(0,a.up)("MyToolbar"),r=(0,a.up)("MyTable");return(0,a.wg)(),(0,a.iD)("div",n,[m,(0,a.Wm)(u),(0,a.Wm)(r)])}function u(e,t,l,i,o,n){const m=(0,a.up)("el-table-column"),d=(0,a.up)("ImageView"),u=(0,a.up)("el-button"),r=(0,a.up)("el-table"),s=(0,a.up)("MyBatch"),p=(0,a.up)("MyEditDialog"),c=(0,a.up)("MyItemDetailDialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{data:n.items,onSelectionChange:n.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"selection"}),(0,a.Wm)(m,{prop:"type",label:"",width:"48px"},{default:(0,a.w5)((e=>[(0,a.Wm)(d,{modelValue:e.row.icon,"onUpdate:modelValue":t=>e.row.icon=t,"image-height":"24px","image-width":"24px"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(m,{prop:"type",label:"类型",sortable:""}),(0,a.Wm)(m,{prop:"patterns",label:"命名模式",sortable:""}),(0,a.Wm)(m,{prop:"label",label:"标签",sortable:""}),(0,a.Wm)(m,{prop:"priority",label:"优先级",sortable:""}),(0,a.Wm)(m,{label:"操作",width:"170px"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{link:"",type:"primary",onClick:t=>n.handleClickItemDetail(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("详细")])),_:2},1032,["onClick"]),(0,a.Wm)(u,{link:"",type:"primary",onClick:t=>n.handleClickEditItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(u,{link:"",type:"danger",onClick:t=>n.handleClickRemoveItem(e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Wm)(s,{modelValue:o.selectedItems,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedItems=e)},null,8,["modelValue"]),(0,a.Wm)(p,{modelValue:o.displayEditDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>o.displayEditDialog=e),title:"编辑类型",method:"PUT",target:o.theEditDialogTarget},null,8,["modelValue","target"]),(0,a.Wm)(c,{modelValue:o.displayDetailDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>o.displayDetailDialog=e),target:e.theDetailDialogItem},null,8,["modelValue","target"])])}function r(e,t,l,i,o,n){const m=(0,a.up)("ImageSelect"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-input"),r=(0,a.up)("el-checkbox"),s=(0,a.up)("MyPrioritySelector"),p=(0,a.up)("el-form"),c=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{"label-width":"100px"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"图标"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:o.item.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>o.item.icon=e),"image-height":"100px","image-width":"100px"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"类型名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.item.type,"onUpdate:modelValue":t[1]||(t[1]=e=>o.item.type=e),placeholder:"例如：text/plain"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"命名模式"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.item.patterns,"onUpdate:modelValue":t[2]||(t[2]=e=>o.item.patterns=e),placeholder:"例如：*.txt; 可接受多个值，以逗号分隔"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"目标"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.item.as_dir,"onUpdate:modelValue":t[3]||(t[3]=e=>o.item.as_dir=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件夹 ")])),_:1},8,["modelValue"]),(0,a.Wm)(r,{modelValue:o.item.as_file,"onUpdate:modelValue":t[4]||(t[4]=e=>o.item.as_file=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 文件 ")])),_:1},8,["modelValue"]),(0,a.Wm)(r,{modelValue:o.item.as_project,"onUpdate:modelValue":t[5]||(t[5]=e=>o.item.as_project=e)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 项目 ")])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"标签名"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.item.label,"onUpdate:modelValue":t[6]||(t[6]=e=>o.item.label=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"优先级"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.item.priority,"onUpdate:modelValue":t[7]||(t[7]=e=>o.item.priority=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.item.description,"onUpdate:modelValue":t[8]||(t[8]=e=>o.item.description=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",null,[(0,a.Wm)(c,{type:"success",onClick:n.save},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["onClick"]),(0,a.Wm)(c,{type:"default",onClick:n.close},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"])])])),_:1})}function s(e,t,l,i,o,n){const m=(0,a.up)("el-option"),d=(0,a.up)("el-select");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,value:e.value,label:e.text},null,8,["value","label"])))),128)),(0,a.Wm)(m,{value:0,label:"默认值"})])),_:1})}l(7658);var p={name:"project-type-priority-selector",data(){const e=6;let t=[];for(let l=1;l<=e;l++){let e={id:l,value:l,text:""+l};t.push(e)}return{options:t}}},c=l(89);const h=(0,c.Z)(p,[["render",s]]);var w=h,f=l(7967),g={name:"settings-project-type-edit-dialog",components:{MyPrioritySelector:w,ImageSelect:f.Z},data(){return{item:{as_dir:!1,as_file:!1,description:"",label:"",name:"",type:""}}},methods:{save(){let e=this.item,t="",l=this.method;if("POST"==l)t="insert";else{if("PUT"!=l)return;t="update"}this.$store.dispatch("content_type/"+t,{item:e}).then((()=>{this.close()}))},close(){this.$emit("update:modelValue",!1)},cloneObject(e){let t=JSON.stringify(e);return JSON.parse(t)}},props:{method:String,target:Object},watch:{target(e){this.item=this.cloneObject(e)}}};const _=(0,c.Z)(g,[["render",r]]);var y=_,W=l(3368),b=l(2655);const k={style:{"margin-top":"10px"}};function V(e,t,l,i,o,n){const m=(0,a.up)("el-button"),d=(0,a.up)("BatchToolBar");return(0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(d,{modelValue:n.items,"onUpdate:modelValue":t[0]||(t[0]=e=>n.items=e),title:"批处理",hideEmpty:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"danger",onClick:n.handleDelete},{default:(0,a.w5)((()=>[(0,a.Uk)(" 删除 ")])),_:1},8,["onClick"]),(0,a.Wm)(m,{type:"primary",onClick:n.handlePutToBuffer},{default:(0,a.w5)((()=>[(0,a.Uk)(" 存入缓冲区 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}var D=l(9698),U={name:"settings-intent-templates-batch",components:{BatchToolBar:D.Z},computed:{items(){return this.modelValue}},methods:{handleDelete(){let e=this.items;this.$store.dispatch("content_type/remove",{items:e})},handlePutToBuffer(){let e="contenttypes",t={};t[e]=this.items,this.$store.dispatch("jsonbuffer/put",{vo:t})}},props:{modelValue:Array}};const v=(0,c.Z)(U,[["render",V]]);var C=v,T=l(7139);const I={class:"info-parent"};function E(e,t,l,i,o,n){const m=(0,a.up)("MyIcon"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-form"),r=(0,a.up)("ElButton"),s=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(s,{title:"内容类型详情","align-center":"",width:"640px"},{default:(0,a.w5)((()=>[(0,a._)("div",I,[(0,a.Wm)(m,{class:"info-icon",src:n.item.icon,title:n.item.type,size:99},null,8,["src","title"]),(0,a.Wm)(u,{class:"info-form","label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"类型"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.type),1)])),_:1}),(0,a.Wm)(d,{label:"ID / UUID"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.id)+" / "+(0,T.zw)(n.item.uuid),1)])),_:1}),(0,a.Wm)(d,{label:"URN"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.urn),1)])),_:1}),(0,a.Wm)(d,{label:"显示名称"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.label),1)])),_:1}),(0,a.Wm)(d,{label:"命名模式"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.patterns),1)])),_:1}),(0,a.Wm)(d,{label:"文件/目录/工程"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.as_file)+" / "+(0,T.zw)(n.item.as_dir)+" / "+(0,T.zw)(n.item.as_project),1)])),_:1}),(0,a.Wm)(d,{label:"优先级"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.priority),1)])),_:1}),(0,a.Wm)(d,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.item.description),1)])),_:1}),(0,a.Wm)(d,{label:"创建时间"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.formatTime(n.item.created_at)),1)])),_:1}),(0,a.Wm)(d,{label:"修改时间"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,T.zw)(n.formatTime(n.item.updated_at)),1)])),_:1})])),_:1})]),(0,a._)("div",null,[(0,a.Wm)(r,{type:"default",onClick:n.close},{default:(0,a.w5)((()=>[(0,a.Uk)("关闭")])),_:1},8,["onClick"])])])),_:1})}var x=l(6465),S=l(4031),j=l(9466),M={name:"settings-local-repository-item-detail-dialog",components:{ElButton:x.mi,MyIcon:S.Z},computed:{item(){return this.target}},methods:{close(){this.$emit("update:modelValue",!1)},formatTime(e){return j.Z.StringifyTimestamp(e,"datetime")}},props:{target:Object}};const P=(0,c.Z)(M,[["render",E]]);var z=P,Z={name:"settings-project-types-table",components:{MyEditDialog:y,ImageView:W.Z,MyBatch:C,MyItemDetailDialog:z},computed:{items(){return this.$store.getters["content_type/all"]}},data(){return{displayEditDialog:!1,theEditDialogTarget:{},theDetailDialogTarget:{},displayDetailDialog:!1,selectedItems:[]}},methods:{handleClickEditItem(e){this.theEditDialogTarget=e,this.displayEditDialog=!0},handleClickRemoveItem(e){let t="删除项目类型",l="确定要移除 ["+e.name+"] 这项目类型吗？",a="";b.T.confirm(l+a,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.removeItem(e)})).catch((()=>{}))},handleClickItemDetail(e){this.theDetailDialogItem=e,this.displayDetailDialog=!0},removeItem(e){this.$store.dispatch("content_type/remove",e)},handleSelectionChange(e){this.selectedItems=e}}};const B=(0,c.Z)(Z,[["render",u]]);var O=B,$=l(4870),R=l(2748);const Y={class:"toolbar"},N={name:"settings-project-types-toolbar",components:{MyEditDialog:y},data(){return{displayEditDialog:!1,theEditDialogTarget:{}}},methods:{fetch(){this.$store.dispatch("content_type/fetch")},insert(){this.theEditDialogTarget={},this.displayEditDialog=!0},importPresetTypes(){let e="POST",t="import-project-types",l={};this.$store.dispatch("rest/execute",{method:e,type:t,data:l})},handleCommand(e){"IMPORT_PRESET_TYPES"==e&&this.importPresetTypes()}},mounted(){this.fetch()}};var A=Object.assign(N,{setup(e){return(e,t)=>{const l=(0,a.up)("el-icon"),i=(0,a.up)("el-button"),o=(0,a.up)("el-dropdown-item"),n=(0,a.up)("el-dropdown-menu"),m=(0,a.up)("el-dropdown");return(0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("div",null,[(0,a.Wm)(i,{title:"刷新",onClick:e.fetch},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,$.SU)(R.hYj))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(i,{title:"添加",onClick:e.insert},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,$.SU)(R.v37))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(m,{style:{"margin-left":"15px"},onCommand:e.handleCommand},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o,{command:"IMPORT_PRESET_TYPES"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 导入预置类型 ")])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(i,{type:"default",title:"更多"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,$.SU)(R.Tkc))])),_:1})])),_:1})])),_:1},8,["onCommand"])]),(0,a.Wm)(y,{modelValue:e.displayEditDialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.displayEditDialog=t),method:"POST",target:e.theEditDialogTarget,title:"添加类型"},null,8,["modelValue","target"])])}}});const J=(0,c.Z)(A,[["__scopeId","data-v-5c82ece1"]]);var F=J,H={name:"settings-project-types-index",components:{MyToolbar:F,MyTable:O}};const K=(0,c.Z)(H,[["render",d],["__scopeId","data-v-c5e559d0"]]);var q=K,G={name:"SettingsContentTypes",components:{ClientViewIndex:q}};const L=(0,c.Z)(G,[["render",i]]);var Q=L}}]);
//# sourceMappingURL=825.b6a2feb6.js.map